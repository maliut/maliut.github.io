<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[Mの综合研究]]></title><description><![CDATA[somewhere about myself]]></description><link>https://maliut.space</link><generator>GatsbyJS</generator><lastBuildDate>Sun, 31 Oct 2021 16:28:37 GMT</lastBuildDate><item><title><![CDATA[存在主义咖啡馆：自由、存在和杏子鸡尾酒]]></title><description><![CDATA[…]]></description><link>https://maliut.space/p/at-the-existentialist-cafe/</link><guid isPermaLink="false">https://maliut.space/p/at-the-existentialist-cafe/</guid><pubDate>Sat, 09 Oct 2021 13:16:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 810px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/23b1349fdfeffbb6f9b58400361170f1/47311/p1100522.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 137.93103448275863%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAcABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAQBAgMF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAXJw3gKgzVspE6Af/8QAGxAAAgIDAQAAAAAAAAAAAAAAAQIAEQMQEhT/2gAIAQEAAQUCZuRcW6OLpmJAGVSOIUueVJUrX//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8BH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8BH//EABwQAAMAAQUAAAAAAAAAAAAAAAABETECECAhUf/aAAgBAQAGPwKyich2NvUemZtDHD//xAAcEAADAQACAwAAAAAAAAAAAAAAARFhITFBofH/2gAIAQEAAT8hs0jxRM6Nw6IRTZUWvrBDi0W04Y9+iKo08ZT6JEq6Ef/aAAwDAQACAAMAAAAQjzcA/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPxAf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPxAf/8QAHRABAQEAAgMBAQAAAAAAAAAAAREAIVExQWGRcf/aAAgBAQABPxCIUORDO5j6VSmzq4oUDyr8zpRuIeHWRVZ6IKB93NosrHRWn9YUQqI0cAsfuKqz1PBugPZMIeV/u//Z&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;p1100522&quot;
        title=&quot;p1100522&quot;
        src=&quot;/static/23b1349fdfeffbb6f9b58400361170f1/627f4/p1100522.jpg&quot;
        srcset=&quot;/static/23b1349fdfeffbb6f9b58400361170f1/efcb5/p1100522.jpg 203w,
/static/23b1349fdfeffbb6f9b58400361170f1/02e66/p1100522.jpg 405w,
/static/23b1349fdfeffbb6f9b58400361170f1/627f4/p1100522.jpg 810w,
/static/23b1349fdfeffbb6f9b58400361170f1/47311/p1100522.jpg 1080w&quot;
        sizes=&quot;(max-width: 810px) 100vw, 810px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;趁着这次十一期间的空闲时间看完了本书。好几年前通过未读图书偶然知道了这本书，但它一直被我放在购物车里吃灰。直到这次在微信读书上看到，才意识到距它的出版已经过去了这么多年，以及它的流行程度已经远远超出了我的预料。&lt;/p&gt;
&lt;!-- more --&gt;
&lt;p&gt;作为一个“民间哲学爱好者”，我一向不愿意在公开场合发表一些观点，就像谁愿意认真看民科的文章呢？它更有可能带来的是误读而非真正有价值的启发。&lt;/p&gt;
&lt;p&gt;我也很久没有看过一些“哲普”书籍，因为就我之前的观感，很多这样的读物带入了太多作者自身的“私货”，参考性并不强。还有些读物带着哲学的名字，实则贩卖着心灵鸡汤，属实是对哲学的矮化。&lt;/p&gt;
&lt;p&gt;正如学习一门新技术的最高效方法，是直接去阅读官方文档，同样在学习哲学时也有很多人推荐学习原著。但对于像我这样一个几乎没有受过科班训练的单纯爱好者，在希望进一步登堂入室时，往往会遇到一些困难。&lt;/p&gt;
&lt;p&gt;首先，哲学不同于数学、物理学等学科。后者们往往拥有一套自洽的理论体系，从古至今的所有学科发展都是对这一套理论体系的发展和去伪存真，由此逐渐构建起整个学科的理论大厦。而我们学习的过程便是在这座大厦中拾级而上，每一层的知识都对更上层的学习有所助益。&lt;/p&gt;
&lt;p&gt;而哲学的体系——当然不同时期不同人的哲学之间也有脉络和传承，但——至少没有那么强。当一个哲学家面对概念上的困难，与学界前辈思想的微小不同，他往往倾向于定义出一套属于自己的、新的名词及话语体系。因此比起其他理科的同一套理论体系，哲学看上去就是由好多套相互交融但又排斥的体系所组成。&lt;/p&gt;
&lt;p&gt;又因为哲学不像其他理科有着明确的对错之分，我们很难决定如何去扬弃历史上的各个理论。而理论与理论们不断地堆叠，注定使得后来者想要学会“用哲学的语言说话”将会越来越难。&lt;/p&gt;
&lt;p&gt;其次，也是因为哲学中对名词和概念的敏感性，导致对这个领域知之甚少的读者很难顺利地把哲学书读下去。即使硬着头皮读了下去，也难以知道自己的理解究竟是不是原作者的本意。何况原作者把自己的思想用文字表达出来已经经过了一重损失，而翻译又经过了第二甚至第三重损失。&lt;/p&gt;
&lt;p&gt;如果说讨论呢？在电子书的笔记区常常能看到一些明显的理解谬误，可悖论也在于此：你怎么知道它一定是错误的，或是其实它是对的，只是我没能理解这位读者写下的话呢？&lt;/p&gt;
&lt;p&gt;另外，哲学家们自己的思想，往往也是在不断地变化之中。我们倘若仅仅阅读某一哲学家的代表作，也只能代表作者在某一时间的某一思想的侧面。某种意义上也是对这位哲学家的误读与偏见。&lt;/p&gt;
&lt;p&gt;再次，正如“哲学就是哲学史”（虽然大佬考据出来似乎这句话与黑格尔的原意相距甚远）所示，一个人的思想，不可能不被当时的整个历史环境所影响，尤其是对于存在主义这一相对而言更加形而下、更加入世的理论（更不必说它的发展处在二战这一极端动荡的时期）。如果只是离散地去读各个哲学家，而不去了解他们各自所处的历史环境与思想传承的脉络，也会对理解他们的思想平添困难。&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 810px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/a74cc1c13addc4b996a863bb6462c433/47311/p1100531.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 74.8768472906404%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAQBAgP/xAAXAQADAQAAAAAAAAAAAAAAAAAAAQID/9oADAMBAAIQAxAAAAHVYXyuCoP/xAAZEAEAAwEBAAAAAAAAAAAAAAABAAIDExL/2gAIAQEAAQUC8BRyq14Ec45s5s//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAVEQEBAAAAAAAAAAAAAAAAAAAQEf/aAAgBAgEBPwGn/8QAGxAAAgIDAQAAAAAAAAAAAAAAAAERMhASIUH/2gAIAQEABj8CjcspLI8OLH//xAAeEAACAQMFAAAAAAAAAAAAAAAAAREQQZEhMVGhsf/aAAgBAQABPyHQFl2Qpsb2kKSicB/Yycy7P//aAAwDAQACAAMAAAAQCO//xAAXEQEAAwAAAAAAAAAAAAAAAAAAETFh/9oACAEDAQE/EKRj/8QAGBEAAgMAAAAAAAAAAAAAAAAAABEhMWH/2gAIAQIBAT8QlY9P/8QAGhABAQEBAQEBAAAAAAAAAAAAAREAITFR0f/aAAgBAQABPxBFiRTrjggqlcgoe3x/dQHheKuKYK1ScBfe8tc3/9k=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;p1100531&quot;
        title=&quot;p1100531&quot;
        src=&quot;/static/a74cc1c13addc4b996a863bb6462c433/627f4/p1100531.jpg&quot;
        srcset=&quot;/static/a74cc1c13addc4b996a863bb6462c433/efcb5/p1100531.jpg 203w,
/static/a74cc1c13addc4b996a863bb6462c433/02e66/p1100531.jpg 405w,
/static/a74cc1c13addc4b996a863bb6462c433/627f4/p1100531.jpg 810w,
/static/a74cc1c13addc4b996a863bb6462c433/47311/p1100531.jpg 1080w&quot;
        sizes=&quot;(max-width: 810px) 100vw, 810px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;面对上文的这些问题，《存在主义咖啡馆》一书则交出了较好的答卷。如果用一句话来概括，这本书可以被称为存在主义哲学家们的群像剧。胡塞尔、海德格尔、萨特、波伏娃、加缪等等，一系列耳熟能详的人名，虽然在之前我已经很熟悉他们的名字和主要著作，但他们在我的脑海里也只是一个个孤立的点，也说不出他们的观点究竟代表了什么。但在这本书中，作者把他们真正串联了起来，使我对他们的思想脉络有了更清晰的认识。同时，通过对他们的日常生活以及所处的历史环境的描写，也让这些哲学家们不再是一座座似乎遥不可及的偶像，而是一个个鲜活的人。&lt;/p&gt;
&lt;p&gt;作者对书中内容的安排也较为合理。书中讲述哲学概念的部分与哲学史的部分大概五五开，对于非专业的读者来说既不会显得过于晦涩，也没有让这本书变成完全没有营养的八卦。也得益于对历史的讲述，作者能够将不同哲学家之间的观点作比较阐释，使读者更好地把握概念本身以及它们的沿革。&lt;/p&gt;
&lt;p&gt;很多“哲普”书的作者喜欢自以为是地在书中加入很多奇妙的比喻和修辞，以为能帮助读者理解，实则给信息多添加了一层噪音。更不用说这些比喻是否正确，会不会反而让人误入歧途。而本书作者的写作语言平和，存在感适度，能够较为忠实地反映这些哲学观点和历史的本来面貌。即使在有些篇目中亲自现身称“我”如何如何，也能让读者轻松将事实与作者的观点区分出来。作者的话也并非强加观点给读者，而是为了引起读者进一步的思考。&lt;/p&gt;
&lt;p&gt;也许有人认为这本书讲的太浅薄，“不够哲学”。不过在我看来这本书已经很好地完成了知识普及与导读的作用。如果你有更进一步学习的诉求，完全可以通过书中提到的人名和著作名去按图索骥。而在看完这本书后再去学习那些经典名著，也能因为这本书带来的前置知识而让你更好地理解。&lt;/p&gt;
&lt;p&gt;推荐给所有感兴趣的读者。&lt;/p&gt;</content:encoded></item><item><title><![CDATA[星露谷物语：我们无处逃离的“现代生活”]]></title><description><![CDATA[最早知道《星露谷》这款游戏的时候，它还在开发之中，而我正拿着手机模拟器沉迷《矿石镇》。后来也没有特别去关注它的发展，但当它的名字越来越频繁地在我耳边出现时，我知道它火出了预期，不过也没有去玩（虽然喜 +1 了）。直到最近想要重温此类游戏的乐趣时，考虑到 PC…]]></description><link>https://maliut.space/p/stardew-valley/</link><guid isPermaLink="false">https://maliut.space/p/stardew-valley/</guid><pubDate>Fri, 20 Aug 2021 12:19:00 GMT</pubDate><content:encoded>&lt;p&gt;最早知道《星露谷》这款游戏的时候，它还在开发之中，而我正拿着手机模拟器沉迷《矿石镇》。后来也没有特别去关注它的发展，但当它的名字越来越频繁地在我耳边出现时，我知道它火出了预期，不过也没有去玩（虽然喜 +1 了）。直到最近想要重温此类游戏的乐趣时，考虑到 PC 端、联机的因素，才真正打开它。&lt;/p&gt;
&lt;!-- more --&gt;
&lt;p&gt;我们选择一款种田游戏，往往是为了将自己从枯燥乏味的现实中抽离出来，进入一种田园牧歌式的生活。在这个世界中，我们才是自己的主人，我们用双手创造自己的生活，而游戏贴心地为我们省去了真正种田所需要的所有繁琐与劳累之处，并通过快速的反馈赋予了我们极大的成就感。&lt;/p&gt;
&lt;p&gt;在《星露谷》的开头，作者给予我们的便是这熟悉的动机。“我”作为一个 996 打工人，日复一日地重复着格子间的工作。而“我”所供职的 Joja 公司，是这个世界的垄断巨头，几乎控制了人们生活的一切。在工作中，“我”的时间被严格安排，“我”的一举一动都被监控，这使得员工更像是流水线上的机器。终于有一天，“我”决心不再忍受这样的生活，在得知祖父为“我”留下了一个庄园之后，便辞职回归农村，走上种田之路。&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 810px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/8d4e28d27bdab660c86f188dbf3fe363/07a9c/1.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 56.15763546798029%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACVElEQVQoz1VTTUtqURS9PyjQMMp0YsM+zFARw4kFDeyJejUrta5ezY+iNFPwNX0NBAdOqhdBQdRAnISQIinqT1nvrvO4D95gc84+Z62991l7H+n19RXD4RD9fh+fn5/4+voS/ng8xnQ6xWQyEf5gMMBAw4xGI3x/f+P9/R3dbhdPT094fn7G29sbLi4uIMmyjFQqhXQ6DUVRkEwmUa/XhdXqNTQaDdz9usPP21tUazVUq1VBzOfzgre3t4dwOIxQKASPxwNpfX0d+/v7qGng8/NzOJ1OBINBxGIxyBEZETmCpJJE+vQUysGBIPOOtrOzA6/XK5Le3NzA5/NB2tjYQLFYRKvVQjabxfb2Nk41sppVoWZUKDkFgeoPxBMhNCJRZLVXqBouk8ngQEvAIJeXl4LPQqTNzU0cHR0hHo9ja2sL0WgU19fXAlSpVFAul5FJ/yUrWhD6PL+6uhI4SsZXUard3V1IbrcbDocDdrtdZOCzc7kczs7OUCgUxNput9HpdNBsNsWdfs498eSxsNXVVUgul+ufbhSazyeQwuvry8sLRlrXHx4fUSqVRDD9nnjy2JS1tTVI7EwgEMDJyYnIlkgk/gvMajgWHKHf2ogwGLXWAx0fHwsedff7/ZDYdgKojaqqgkAwVxJoDNjr9fBwfy+S8EyXhD551PPw8BAS289RIIAN4Z7Vsos0kj8+PjCbzcBPwCCcWd3YTDaGRXCMpKWlJZhMJpjNZnA/NzeH5eVl4S8sLGBlZUUA9bmz2WyYn58X91arFUajEYuLi7BYLDAYDPgDIw0oZe0MVBoAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;1&quot;
        title=&quot;1&quot;
        src=&quot;/static/8d4e28d27bdab660c86f188dbf3fe363/d7542/1.png&quot;
        srcset=&quot;/static/8d4e28d27bdab660c86f188dbf3fe363/2efce/1.png 203w,
/static/8d4e28d27bdab660c86f188dbf3fe363/1d180/1.png 405w,
/static/8d4e28d27bdab660c86f188dbf3fe363/d7542/1.png 810w,
/static/8d4e28d27bdab660c86f188dbf3fe363/d56b5/1.png 1215w,
/static/8d4e28d27bdab660c86f188dbf3fe363/07a9c/1.png 1440w&quot;
        sizes=&quot;(max-width: 810px) 100vw, 810px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;相信大家对这个主题都不陌生。但在很多同类游戏中，玩家选择了回归乡村，从此便开始了世外桃源般的生活。在这个新世界中，玩家与旧世界毫无瓜葛，一切都可以凭自己的意愿从头再来。但《星露谷》的作者显然不想放弃这个矛盾。虽然玩家抛弃了以 Joja 公司为代表的现代都市生活，但资本却并不是你想甩开就能甩开的。Joja 公司就把自己的触角也伸向了玩家用来避世的小镇，在镇子的一角建立起了 Joja 超市。&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 810px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/b945bbd0812b3a398667ce3bc5f86099/c1b63/2.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 56.15763546798029%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAADIUlEQVQozw2R71PTBQCHv4YYg4wjcW6wzTG+Y7CNxpgbG7PGD7fhNhjbQJSx2UIbExggikEFHvTj1DpNubz44dEpZ6cMMpPrrtS66zo47cjOy+uf6K43vYunvXju8+rzvHmESvtzaux/Uah7gaHBRmsizLV7sPwL3NnY5v7WNg+ebbOeZe3pf6xswtV7/zJwbp2P5/7m+toWmYUJnsyGWDrlQ1AdGKXIEaXQOoYQrCDX56Sq+SamwF1qg7c5PPmY4JdbhD/fxNO7hiWcwehepOfEDZYewvzN31iZ8LIcr2baV4NQLMYpUIeRizEc9giHah3oSoIoXctUuOexH73FgY5FrNk1BJbY776FVhHhLf8Ag1f/IXXmZ071XCHhGSNm70Aoyg9QlN/G3oIAbxi7aLM0Um/qxRJ/RHNvhpbRVaqTszSkFnAlv8XW+wON9YN4ao5g7n+KvvMheyrvUCiuIt2TRshVaclRa9lRrkWw6cizlVFb3oK1cZKKw1/QeHaN4XNTpMNJ3ktdxOEex1UdxCkGMSWeYPCtI9fMUqy8xu5XRhFyakQKjSJ7bSKlLSL7fJV4nE2cDoWJHU0x0tfH5XQbF1JdfNb/NuPd7cSa/Nhej6FzzlNumaN0X5rCV88gFh9D6KvTcNamYdKu4ZKvnCvdKqY7HQx3RJmMBvkw0c7MiQgfvRPi/Xg7Ez1d9Ld1knB66TI14dc1U69wYZU6sMmbEUKuMoJvqgk0qZmOaFhPqcmktcwdN3IjWcvtQRMrw1XcHdLz9YCBr07qWYgbGXLrqTMaqZTVoi+woM0zE6/TIQguBTucGgSvktd8KmaiGlaTJXw3Iuf+uInHUyIb01I2ZmT8el7Gj+/K+H5EyuAxJYKjitxSAxJVBTlSkfGoEyHPU0L+QZECc9Z+UImidT8/XQjx4nqE3y96efapnz8XjvDHbITNy1kWEzyfP05mysduqY1d1dmQrXJeyn4n+9TZyg0l7FRq2Ckxs6tOhaRBRXfcTKrfwkm/iW9OW3jwgYVH4xY+GbYSH7ORHLIT9ViQSKzklGl52asg161A9Mv4H30dvNYVZyJcAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;2&quot;
        title=&quot;2&quot;
        src=&quot;/static/b945bbd0812b3a398667ce3bc5f86099/d7542/2.png&quot;
        srcset=&quot;/static/b945bbd0812b3a398667ce3bc5f86099/2efce/2.png 203w,
/static/b945bbd0812b3a398667ce3bc5f86099/1d180/2.png 405w,
/static/b945bbd0812b3a398667ce3bc5f86099/d7542/2.png 810w,
/static/b945bbd0812b3a398667ce3bc5f86099/c1b63/2.png 1200w&quot;
        sizes=&quot;(max-width: 810px) 100vw, 810px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;明显在小镇中他们也没有改变压榨员工的传统，以至于为了超市打工的 NPC 谢恩老是一副精疲力尽的样子，对话时也没什么好气。&lt;del&gt;可他的工作时间好像也只是朝九晚五诶。&lt;/del&gt;不过 Joja 公司并不打算止步于此，他们打算进一步收购小镇的社区中心，将其改造为超市的仓库。&lt;/p&gt;
&lt;p&gt;社区中心是小镇上历史悠久的建筑，用镇长刘易斯的话说，“这里曾经是这个镇子的骄傲”，经常举办各种活动。但由于现在人们的懒惰，人与人关系的疏离，几乎都不出门参加活动，导致社区中心无人问津，年久失修，几乎沦为了一座废墟。&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 810px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/487a0e8ff2768f6515570af6a07648a9/29114/3.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 56.15763546798029%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAA7EAAAOxAGVKw4bAAACkklEQVQozy3Q2U/aAADH8TrndGYemRyCVOgBLVYKFOS0gNwtUE4VIocCQqk6cYgsYxo3x2LMUHcky162xO1hvpjsZX/FHvcHjWT7Az7fX/IDWBJUi0bXdNIMCXZXiB8Fz5/bd3cV/0Xc2txMfVhzfinSv2+vf/GhXpC4Shg/pQwm+WQziHfCWsCHiQjJWF6vDEDKDZvmMuH62eu+T3m7NHHgJE5cxDHn+Pbmeb+QLkcCNrO15tb74MdCEs9HMIBbmIlg4pdRssYuyA2i9qrxbtd7w7vbXl3VpNm14TyNNT26y8P6UbNsS+aslNEqHT5YVp74VEAcnS3rwKcr6jyNerXKnAN9lSC/7y23Ytp6AG1F8bd56nPVfl701BnDuoco+Rb59fiBF+dTDGAXjxSI6U4Qq7nQJ1aItyBnSf1plqwz8JYXO0ubb3YcF0VqP4IKLMyHob2wWoj5j4KWqp8GVpekdT98vEpclcwftyz9PHWa1QksWgvB3YyxV7FfC/Z+2VwJIOv0PB9V80Go4wHPWKLthgC7RopO3xdCqt2o5iit3Y9h2yGEZ5BqAB5UXuT1nF15ukYyOik5+yi3BG77oE0aLDjBrF0BhLgMJhlvhOFqENnyQ8voFKWa4Bm0HkYaDNpNE4dRvMVhFR+UsCgyS/PP4hg49QAAgKEhACi71JRiohPRfG1Hrsp2Ti+JmmYFBtlhkYEXGJhnkUYALfnVoYAqHUL7GwZ4ZmyAh+8NAS7cRMnG9/3oTkx7sWk+L1F7nKbomosbRC1OnaLEG055kpKlFmRFGq44kOM4Dk6P/l+2YC6d5GHGoHCb5fWk9nWObLDquElKKyd6QXQFnmQN4qxjPmcGKzYovSgbvDM3OfIP/wXn0LAJixF/9QAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;3&quot;
        title=&quot;3&quot;
        src=&quot;/static/487a0e8ff2768f6515570af6a07648a9/d7542/3.png&quot;
        srcset=&quot;/static/487a0e8ff2768f6515570af6a07648a9/2efce/3.png 203w,
/static/487a0e8ff2768f6515570af6a07648a9/1d180/3.png 405w,
/static/487a0e8ff2768f6515570af6a07648a9/d7542/3.png 810w,
/static/487a0e8ff2768f6515570af6a07648a9/d56b5/3.png 1215w,
/static/487a0e8ff2768f6515570af6a07648a9/0d292/3.png 1620w,
/static/487a0e8ff2768f6515570af6a07648a9/29114/3.png 1920w&quot;
        sizes=&quot;(max-width: 810px) 100vw, 810px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;这里就需要玩家进行抉择。玩家可以选择帮助社区中心重焕生机。在这条路线中，玩家需要生产、收集游戏中各种各样不同的物品，献祭给废墟中的小精灵“祝尼魔”。每当献祭完成度达到一定程度后，就会解锁游戏中的新区域、新功能作为奖励。最终，在所有收集选项都完成后，社区中心会焕然一新，像是一座大别墅。大家齐聚一堂，其乐融融。而 Joja 超市则会受到大家的一致抵制，黯然离开小镇。&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 810px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/e3a31187fb01d5f11b61e766bbb3d4ef/01a9b/4.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 52.70935960591133%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAECA//EABcBAAMBAAAAAAAAAAAAAAAAAAECAwT/2gAMAwEAAhADEAAAAc4pw1QIK//EABgQAQEBAQEAAAAAAAAAAAAAAAECEQAi/9oACAEBAAEFAnch3qNT0ITVrv8A/8QAFhEBAQEAAAAAAAAAAAAAAAAAABEh/9oACAEDAQE/AYx//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGRAAAwADAAAAAAAAAAAAAAAAAAERECEx/9oACAEBAAY/ArjY6KHT/8QAGhABAAMAAwAAAAAAAAAAAAAAAQARIUFhcf/aAAgBAQABPyFhpDiaC3yb6p7JlaLIomlhhSMn/9oADAMBAAIAAwAAABDAD//EABYRAQEBAAAAAAAAAAAAAAAAAAEAIf/aAAgBAwEBPxBCSDL/xAAYEQEAAwEAAAAAAAAAAAAAAAABABEhYf/aAAgBAgEBPxAd7LXZ/8QAHBABAQEBAAIDAAAAAAAAAAAAAREAITFBUXGh/9oACAEBAAE/EAUEAHxcnTCdgrPRuNJSMv4Y+DiA/ev0iKO7NBWO/9k=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;4&quot;
        title=&quot;4&quot;
        src=&quot;/static/e3a31187fb01d5f11b61e766bbb3d4ef/627f4/4.jpg&quot;
        srcset=&quot;/static/e3a31187fb01d5f11b61e766bbb3d4ef/efcb5/4.jpg 203w,
/static/e3a31187fb01d5f11b61e766bbb3d4ef/02e66/4.jpg 405w,
/static/e3a31187fb01d5f11b61e766bbb3d4ef/627f4/4.jpg 810w,
/static/e3a31187fb01d5f11b61e766bbb3d4ef/78959/4.jpg 1215w,
/static/e3a31187fb01d5f11b61e766bbb3d4ef/0047d/4.jpg 1620w,
/static/e3a31187fb01d5f11b61e766bbb3d4ef/01a9b/4.jpg 1710w&quot;
        sizes=&quot;(max-width: 810px) 100vw, 810px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;但玩家也可以选择加入 Joja 超市的会员计划，支持将社区中心改造成 Joja 仓库。在这一路线中，翻新后的建筑外观也会变成和 Joja 超市一样，在小镇中显得刺眼的蓝色。而建筑内部依然维持了破旧的样子，里面仅有的设施都被拆除，取而代之的是成堆的箱子。游戏中的解锁奖励，在你走这条路线时依旧可以取得。只是获得的途径不再是生产、收集各种各样的物品，而是简单粗暴地 —— 通过金钱购买。&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 810px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/1aac54c221ad10bc4b047373c21bc81d/c1b63/5.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 53.20197044334976%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACqklEQVQozwGfAmD9ADkgD1JTZFWAnUaVtkqTslKNrz01MEgiDkglHWk1JKFbRL6ajpJIM3lQPnhZSYxCK7WLfbB4ZH88JWk6KAA6IQ9IPURSVllmiI1unaNXYmM3JhtOMCw3RIphR2CRVkqjg4dqYpZ2QjpwMR2ggInGr66cZFBuSlRHMUAATSoZTyoYUR0GXVNMYGloTxsGVS0WWkppQm7VTnLQWHTEiH2KY3W0KkykQTZEpJ6xzLerqIFUO1CCKTpoAD4ZE0UdF0IVDko9OlBPTkEUD00eFJFdPGRur1FlwUtevnd2ml5hixozhYFkKGVicXltd6OAPnFfNm1cMwBmSR9mRxxnRx1xUyN1VyZoSB9xTSCabzaogFOleVaGW02VdEZ4XTSAYCfBjC+ygUmZd02PcjGCay+CbDEAfFgkmncob00kXUAeYEEgYUMdRi4Sgl0hrH8ntoMonnUnl3IklXEfmnMhwIs346BC2Jg1jm40iWkmmXIiAE9NSHlVJkBMVzhNXTtOXj1PXR0UFWFIH4FxQ3JqVH9pMIJrLI9vJZJuIad8KrSFOHZnVzRGeoBrW7SIRQBkPiM6Gg1eS0RZU1VaTElaWF5GLR1FODKAe39XbrxYVlBjbYZ6bE2RbiKSbyWCajUuQHQ8U45qb457doQAX1xHe2ElSk1SEUOMKUdxI06HOiYeT0VHjJLIi5LWenNyTVt8QzpIf1gYi2cjUzskN0VzQVeRXmuWbm+LACxKcoZwNHNdMSxBZBVRlxhXnysmJ1VNYYWNzomGrohvQ1tmiSsmM1wuEWk2HTMgFT1DbDdIfk1YglhcdgAzOlJcVESHbS1kXUUNO4YTPoY2KitKLRlfQDVdOytXNhtSOS44JRd6PCV9NCcmGA0gFRQnGhgmGhcnGxVOU+XN9o7IAwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;5&quot;
        title=&quot;5&quot;
        src=&quot;/static/1aac54c221ad10bc4b047373c21bc81d/d7542/5.png&quot;
        srcset=&quot;/static/1aac54c221ad10bc4b047373c21bc81d/2efce/5.png 203w,
/static/1aac54c221ad10bc4b047373c21bc81d/1d180/5.png 405w,
/static/1aac54c221ad10bc4b047373c21bc81d/d7542/5.png 810w,
/static/1aac54c221ad10bc4b047373c21bc81d/c1b63/5.png 1200w&quot;
        sizes=&quot;(max-width: 810px) 100vw, 810px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;如果是你，你会作何选择呢？如果是一个（经济学概念中的）理性人，那么不难得出结论：加入 Joja 会员计划是更好的选择。&lt;/p&gt;
&lt;p&gt;如果你选择自己去收集各种物品，你的游戏体验将会十分繁琐。你需要来自种田、放牧、挖矿、打怪等各种来源渠道的物品，有些物品还只能在特定的季节、天气下获取，有些甚至在游戏的中后期才能获得。你将不得不为了收集而疲于奔命，投入巨大的前期成本只为了一点点用于献祭的产出。&lt;/p&gt;
&lt;p&gt;而如果你选择通过金钱购买解锁奖励，那么你的目标就被简化成了如何赚钱。至于如何赚钱，你完全可以选择自己喜欢的方式，忽略不喜欢的玩法。专注于某项技能也会使你在该技能上的熟练度快速提高，让你更有效率地赚钱。这就是我们熟悉的现代生活，通过社会分工，提高生产的效率。&lt;/p&gt;
&lt;p&gt;但从感性的角度，我相信大多数人还是会选择为了修复社区中心而收集的玩法。一方面，各种收集的物品也是游戏的一部分，从体验游戏内容的角度，我们很乐意去尝试。另一方面，游戏中的“我”本就是为了逃离以 Joja 公司为代表的大资本对打工人的压迫与异化，而来到了这个小镇，为何最终又要卖身依附于它，与它们同流合污呢？&lt;/p&gt;
&lt;p&gt;可倘若再仔细想想，我们会意识到，做出这样的选择某种程度上也是出于开发者对我们的仁慈。在游戏中，Joja 超市的存在感实在有限。它坐落在小镇的角落，与我们的农场隔得几乎最远。超市中贩卖的东西，大多数也比镇子中镇民自家开的杂货店要来的贵些。这使得我们几乎没有去超市购买东西的理由，因此即使剧情最后 Joja 超市被逐出小镇，对我们也没有什么影响。&lt;/p&gt;
&lt;p&gt;但假如这一切反过来呢？如果超市开在交通便捷的镇中心，甚至就开在你家的旁边，如果超市可以 24 小时营业，如果超市卖的商品种类远多于个体户杂货店，并且价格愈发低廉，而质量更佳……你还能轻易地做出将超市逐出小镇的决定吗？而这，才是真实世界中的超市，真正拥有的样子。&lt;/p&gt;
&lt;p&gt;《星露谷》的作者给了我们一个浪漫的结局，可现实生活中远没有如此浪漫可言。我们想要逃离资本社会对我们的压迫与异化，但又享受着它为我们带来的种种方便；我们想要回到乡村，过一种田园牧歌般的生活，但又四体不勤，五谷不分；我们可以在游戏中逃避现实，可回到现实中却又不得不被裹挟着前进；我们看似自由，却又别无选择。&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;《星露谷物语》是作者 Eric Barone 从 2012 到 2016 年，历时四年制作的独立游戏。游戏中的角色设计、文案、音乐与像素素材等，都完全由他一人独立完成。在他开始开发的 2012 年，独立游戏还是一个略显新颖的概念，国人登陆 Steam 的作品一只手就能数得过来。在游戏发布的 2016 年，独立游戏已成百花齐放，百家争鸣之势。而如今，独立游戏早已成为了一个烂大街的概念，成为了一个时髦的营销名词。&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 810px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/84df782d8f097c8e23dfe975f6c073df/c58a3/6.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 33.497536945812804%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAHABQDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAT/xAAWAQEBAQAAAAAAAAAAAAAAAAAFAQP/2gAMAwEAAhADEAAAAaYDCVhA3//EABcQAQADAAAAAAAAAAAAAAAAAAABIUP/2gAIAQEAAQUCuGr/xAAXEQEAAwAAAAAAAAAAAAAAAAACECFx/9oACAEDAQE/ATbeR//EABYRAAMAAAAAAAAAAAAAAAAAAAQQIf/aAAgBAgEBPwESr//EABcQAQADAAAAAAAAAAAAAAAAAAEQERP/2gAIAQEABj8CNW5//8QAGxAAAgEFAAAAAAAAAAAAAAAAABEBITFBUcH/2gAIAQEAAT8hUSFc20dErDP/2gAMAwEAAgADAAAAEIQv/8QAGBEAAwEBAAAAAAAAAAAAAAAAAAERIfD/2gAIAQMBAT8QeLmIp//EABgRAAIDAAAAAAAAAAAAAAAAAAEQEUHw/9oACAECAQE/ECkda//EABoQAQEAAwEBAAAAAAAAAAAAAAERACFBMfD/2gAIAQEAAT8QbqHywIIanzjeNT3E0ga65//Z&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;6&quot;
        title=&quot;6&quot;
        src=&quot;/static/84df782d8f097c8e23dfe975f6c073df/627f4/6.jpg&quot;
        srcset=&quot;/static/84df782d8f097c8e23dfe975f6c073df/efcb5/6.jpg 203w,
/static/84df782d8f097c8e23dfe975f6c073df/02e66/6.jpg 405w,
/static/84df782d8f097c8e23dfe975f6c073df/627f4/6.jpg 810w,
/static/84df782d8f097c8e23dfe975f6c073df/78959/6.jpg 1215w,
/static/84df782d8f097c8e23dfe975f6c073df/c58a3/6.jpg 1500w&quot;
        sizes=&quot;(max-width: 810px) 100vw, 810px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p class=&quot;metadata&quot;&gt;&lt;i&gt;Indie Game the Movie&lt;/i&gt; 中提及的具有代表性的独立游戏（从左至右）：&lt;i&gt;Super Meat Boy&lt;/i&gt;(2010), &lt;i&gt;Fez&lt;/i&gt;(2012), &lt;i&gt;Braid&lt;/i&gt;(2008)&lt;/p&gt;
&lt;p&gt;关于“独立游戏”的准确定义，一直以来都是一个容易引起争议的话题。但是在以前，鉴定一个游戏是否是独立游戏，并不真正成为一个问题。有人说，看到一款游戏就知道是不是独立作品了。因为这些作品都有着共同的特征：它们并不完美，也许存在着许多明显的缺陷，但有着浓郁的个人特色，而这往往使人欲罢不能。可现在，随着各个大厂、资本的入局，越来越多行业老兵们的加入，独立游戏这一领域下也逐渐“内卷”了起来。面对各方面都打磨得臻于完善的作品，我们很难再分辨它是不是一个“独立游戏”了。&lt;/p&gt;
&lt;p&gt;《星露谷》的作者，就好像《星露谷》中的“我”，也许并不在每个方面都擅长，但独自一人打造着自己向往的作品。而如今的巨头和资本，就好像《星露谷》中的 Joja 公司。它们嗅到了独立游戏市场的蓝海，蜂拥而至，在各方面资源的加持下，无论在数量和质量上都可以实现对个人的完全碾压。&lt;/p&gt;
&lt;p&gt;同样的故事曾经发生在工业界，如今它不仅发生在独立游戏界，还发生在微博、微信、b 站、抖音等等的内容领域。你以为你发现了一个宝藏素人，也许背后的是一整个 MCN 机构。你以为是你的兴趣选择了内容，实际上你看到的只是资本想让你看到的内容。&lt;/p&gt;
&lt;p&gt;如果《星露谷》放在现在才开始制作，那么又一个四年之后，它还能复制如今的热度吗……？&lt;/p&gt;
&lt;p&gt;至少是内容行业，作品与作品之间并不能严格地相互替代，一切皆有可能。所以等待，并心怀希望吧。&lt;/p&gt;</content:encoded></item><item><title><![CDATA[不要再拿组合式 API 与 React Hooks 来对比了！]]></title><description><![CDATA[在网上能看到很多人在谈论 Vue 的组合式 API（Composition API）与 React Hooks 时，将两者一起拿来比较，并认为随着这两者的推出，React 和 Vue 变得越来越像，甚至还引发过一些不大不小的撕逼。 诚然，Vue 的组合式 API…]]></description><link>https://maliut.space/p/composition-api-not-hooks/</link><guid isPermaLink="false">https://maliut.space/p/composition-api-not-hooks/</guid><pubDate>Sat, 14 Aug 2021 23:30:00 GMT</pubDate><content:encoded>&lt;p&gt;在网上能看到很多人在谈论 Vue 的组合式 API（Composition API）与 React Hooks 时，将两者一起拿来比较，并认为随着这两者的推出，React 和 Vue 变得越来越像，甚至还引发过一些不大不小的撕逼。&lt;/p&gt;
&lt;p&gt;诚然，Vue 的组合式 API 在设计之初受到过 React Hooks 的启发，且这两者都可以把逻辑抽象成函数的组合，来实现逻辑的内聚与复用，在视觉上有相似之处。但或许这就是它们所剩无几的相同点了。&lt;/p&gt;
&lt;p&gt;本质上组合式 API 与 React Hooks 的心智模型还是大不相同的，如果将它们混为一谈，不但容易引发对两者的误解，更可能（基于这份误解）造成写出来的代码中含有不易察觉的 bug。&lt;/p&gt;
&lt;!--more--&gt;
&lt;h2&gt;组合式 API 的动机与实现&lt;/h2&gt;
&lt;p&gt;组合式 API 的效果用下面这张图片就可以清楚地表示出来：&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 810px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/c265669334b87d3acf6a783bebdd6fbb/c1b63/1.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAACHUlEQVQ4y6WS63LaMBCF+/5v1GnaQrhjbnYCSXCgDRAb34SNrYsla7cmtJDJqD861WjW1mo+7dkjfcL/GJ8ufwnJYpKR9Jgdi4ikl3y93AcxIVlS7x1pnKR15iOc55TmBS+o5IJRBn/yjIuUslyUxzovFeWCi/IjrCsd+sEhSUgUC8av4gC0H4DnYxiepqoMsrVU6WLBVi5znxQhZ+xtQ4veULV60B/CwELGDHCl1H6zTPxnsnd5cYVBw3LKHiy+nAh3VpYcDLAAPazyEdL6cB/VCfutGqdDaXW1PUJnjIKb3C6ldlb8cavmL1Wc6YvqOtqWGPcqZwR3YzDDsoRxW9oDmHYgfMX3sGOVo562LXD+DuOwo8d9tLq4/wiLUVfZlnbG2gwrqd1ZvL4/rBySRvyd2TizTodOhji1kBth1CVbN8TPJrw2Id9e3QbYLrzN3POeAn8ZqrIyw3zbpi+32m8D3Z2dPsdy12XrG/BbGHSw4ibZlX78kbjbw/M2TXNxkV1/q92Auzew66DfR8WNV4WDiZ44MLIxiK6G1a+ERIs4nB2Su4zMdVWaXpjUm4fUWxWemxepvBqG0ODks0q/w7GJOUVt6plr/JZgM8NGjq/y0jKgbsXOVzJpFXa7uGNgrqw207U33/jzDU3ys8+nyqCb0eALaTey/m02YNrUswRlHe6n9GHCF5EibzXhHEOZ7GUUyDiUcQXGq/r38QtqyHwbuaxo4QAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;组合式 API 与选项式 API 对比&quot;
        title=&quot;组合式 API 与选项式 API 对比&quot;
        src=&quot;/static/c265669334b87d3acf6a783bebdd6fbb/d7542/1.png&quot;
        srcset=&quot;/static/c265669334b87d3acf6a783bebdd6fbb/2efce/1.png 203w,
/static/c265669334b87d3acf6a783bebdd6fbb/1d180/1.png 405w,
/static/c265669334b87d3acf6a783bebdd6fbb/d7542/1.png 810w,
/static/c265669334b87d3acf6a783bebdd6fbb/c1b63/1.png 1200w&quot;
        sizes=&quot;(max-width: 810px) 100vw, 810px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;在传统的选项式 API（Options API）中，组件为我们提供了一组 Object 形式的配置对象。我们可以将响应式变量定义在 &lt;code class=&quot;language-text&quot;&gt;data&lt;/code&gt; 字段，监听逻辑定义在 &lt;code class=&quot;language-text&quot;&gt;watch&lt;/code&gt; 字段，各个生命周期想做的事情定义在诸如 &lt;code class=&quot;language-text&quot;&gt;mounted&lt;/code&gt; 等生命周期字段中。&lt;/p&gt;
&lt;p&gt;但真实世界中的一个组件往往由复杂的逻辑交织而成，在组合式 API 中，我们只能把同一逻辑关注点的代码分散到各个字段中。例如我们需要一个监听器，但开始监听和取消监听就得分别放在 &lt;code class=&quot;language-text&quot;&gt;mounted&lt;/code&gt; 和 &lt;code class=&quot;language-text&quot;&gt;beforeDestroy&lt;/code&gt; 中。随着组件体积的膨胀，这些代码逻辑所在的位置愈发割裂，使得开发者在阅读理解代码时也愈发困难。&lt;/p&gt;
&lt;p&gt;为了解决这个问题，组合式 API 就应运而生了。在组合式 API 中，我们不再要求业务代码把自己的逻辑分门别类地放置在配置对象中，而是利用依赖倒置的思想，将配置对象的各个字段变为钩子函数（例如 &lt;code class=&quot;language-text&quot;&gt;mounted: someFunc&lt;/code&gt; → &lt;code class=&quot;language-text&quot;&gt;onMounted(someFunc)&lt;/code&gt; ），提供给业务代码，使业务代码能够将自己&lt;em&gt;钩入&lt;/em&gt; 组件的生命周期等逻辑中。这样，相同逻辑关注点的代码就可以被放在一起，从而提高了代码的内聚性。&lt;/p&gt;
&lt;p&gt;一段典型的组合式 API 代码如下所示（来自官网的例子）：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token function&quot;&gt;setup&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;props&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; repositories &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ref&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;getUserRepositories&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    repositories&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// fetch repositories&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;onMounted&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;getUserRepositories&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// 在 user prop 的响应式引用上设置一个侦听器&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;watch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;user&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; getUserRepositories&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    repositories&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    getUserRepositories
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;与它等价的选项式 API 则是：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      repositories&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  watch&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    user&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;getUserRepositories&apos;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  methods&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;getUserRepositories&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; 
      &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;repositories &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// fetch repositories&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;mounted&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getUserRepositories&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;虽然这个简单的例子里两种写法看上去差不多，但如果这个组件的功能再复杂些，选项式 API 写出来的代码很快就会变成一团乱麻。而组合式 API 中，我们的这段代码逻辑可以天然地放到一个函数当中，隐藏掉内部实现的细节，使组件整体的代码保持清爽。&lt;/p&gt;
&lt;p&gt;不仅如此，以函数来表示逻辑，还可以实现逻辑的细粒度复用。这也是组合式 API 带来的另一个好处。在选项式 API 中，虽然可以通过 mixin 的方式实现一定的复用，但存在着变量名冲突、难以处理逻辑之间的依赖关系等种种问题。而通过函数的方式进行逻辑复用，使这些问题迎刃而解，并且没有任何 magic，可以说是十分自然优雅。&lt;/p&gt;
&lt;h2&gt;Android Lifecycle API&lt;/h2&gt;
&lt;p&gt;与其说 Vue 的组合式 API 像 React Hooks，我觉得不如说它更像 Android 的 &lt;a href=&quot;https://developer.android.com/topic/libraries/architecture/lifecycle?hl=zh-cn&quot;&gt;Lifecycle API&lt;/a&gt; 。我挺惊讶居然没有人把这两者作对比。&lt;del&gt;说好的大前端呢&lt;/del&gt;&lt;/p&gt;
&lt;p&gt;虽说 Android 原生并没有 Vue 核心的响应式数据概念（当然，已经有官方支持的 LiveData 与 DataBinding 这些了&lt;del&gt;更不用说 Jetpack Compose&lt;/del&gt;，但这里不展开，不然就没完没了了），但 Android Lifecycle API 与 Vue 组合式 API 所要解决的问题 —— 即逻辑关注点分散、混乱的问题 —— 与解决手段，却是有着异曲同工之妙。&lt;/p&gt;
&lt;p&gt;在传统的 Android 应用开发中，不少逻辑都依赖于生命周期实现。Android 中拥有生命周期的单元是 Activity 和 Fragment ，其他的业务逻辑若是需要感知生命周期，就需要把它们的代码放到 Activity 和 Fragment 的各个生命周期中，这就导致了代码膨胀与逻辑关注点分离的问题。&lt;/p&gt;
&lt;p&gt;例如我们需要一个感知当前地理位置的功能，一般以如下形式实现：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MyActivity&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;AppCompatActivity&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MyLocationListener&lt;/span&gt; myLocationListener&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;onCreate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;// 可以类比为 Vue 的 created&lt;/span&gt;
        myLocationListener &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MyLocationListener&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;location&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;onStart&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;// 可以类比为 Vue 的 mounted&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;super&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;onStart&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        myLocationListener&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;start&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;onStop&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;// 可以类比为 Vue 的 beforeDestroy&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;super&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;onStop&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        myLocationListener&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;stop&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;很明显，这样的做法与 Vue 的选项式 API 存在同样的逻辑割裂、组件膨胀等问题。Android 官方也逐渐意识到了这个问题。因此，在它们提供的新的架构组件中，推出了 Lifecycle API。它提供的解决方案我们也不难想到。我们把 Lifecycle 作为一个单独的概念抽象出来，使之不局限于 Activity 和 Fragment 中。而需要感知生命周期的业务逻辑，可以以回调函数的形式把这些逻辑&lt;em&gt;勾入&lt;/em&gt; 相应的生命周期中。&lt;/p&gt;
&lt;p&gt;这样一来，和这个业务单元的所有相关代码都可以被放在一起，提高了内聚性，且保持了 Activity/Fragment 文件本身逻辑的清晰。另一方面，我们在使用这业务逻辑时也无需关心它究竟在 Activity 还是 Fragment 中，只要存在生命周期就好。这也提升了逻辑的可复用性。&lt;/p&gt;
&lt;p&gt;使用 Lifecycle API 实现的例子如下所示：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MyObserver&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;implements&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;LifecycleObserver&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// 可以类比为 Vue 的 onMounted()&lt;/span&gt;
    &lt;span class=&quot;token annotation punctuation&quot;&gt;@OnLifecycleEvent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Lifecycle&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Event&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ON_RESUME&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;connectListener&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// 可以类比为 Vue 的 onBeforeUnmount()&lt;/span&gt;
    &lt;span class=&quot;token annotation punctuation&quot;&gt;@OnLifecycleEvent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Lifecycle&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Event&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ON_PAUSE&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;disconnectListener&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// 类比为在 setup 函数中调用你自己的逻辑&lt;/span&gt;
myLifecycleOwner&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getLifecycle&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addObserver&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MyObserver&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;对比 Android 与 Vue，可以看到它们所面临的问题，以及选择的解决方式，都是极为相似的。&lt;/p&gt;
&lt;h2&gt;那么 React Hooks 呢？&lt;/h2&gt;
&lt;p&gt;在 React Hooks 出现之前，我们编写有状态组件，只能使用类组件（Class Component）的形式，并在类组件的生命周期方法中编写相关的逻辑。明显，这和 Vue 与 Android 中我们面临的问题是一样的。我们可以轻易地将上文展现的解决方式迁移到 React 中，为它设计一套新的 API：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MyComponent&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Component&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// 相当于 Vue 的 setup()&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;contructor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;props&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;super&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// 把业务逻辑注册到生命周期中，以实现逻辑的内聚和可复用&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;didMount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;didUpdate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  
  &lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;很容易理解，不是么？可是 React 团队却不满意于此，而是交出了一份不一样的答卷。他们完全抛弃了类组件的写法，连带着抛弃了生命周期的概念。&lt;/p&gt;
&lt;p&gt;我们学习一项新技术时，会想怎么把旧的思维方式迁移过去。这不就有人会问：class 的生命周期方法是怎么对应到新的 hooks 上面的呢？于是搜索了一下发现 &lt;code class=&quot;language-text&quot;&gt;useEffect&lt;/code&gt; 可以通过各种写法的组合来模拟原来的 &lt;code class=&quot;language-text&quot;&gt;componentDidMount&lt;/code&gt;、&lt;code class=&quot;language-text&quot;&gt;componentDidUpdate&lt;/code&gt; 与 &lt;code class=&quot;language-text&quot;&gt;componentWillUnmount&lt;/code&gt;，然后一边抱怨怎么起了个这么一个和原来的生命周期完全不像的名字，一边死记硬背各种组合的用法。&lt;/p&gt;
&lt;p&gt;那么为什么 React 团队放着前面简单的方式不做，而是采用这种看似如此绕的方式呢？其实 React Hooks 为我们带来的是一种新的思维方式，只是我们还拿旧的思路去理解它，所以觉得它比较绕。&lt;/p&gt;
&lt;p&gt;为了说明这个问题，我们还得从类组件说起。众所周知，React 采用了函数式编程的理念，通过不可变性来感知状态变更，从而触发 UI 更新。无状态的函数组件是纯函数，自然可以无限次数地调用。可对于有状态的类组件，每次渲染仅仅是调用它的 &lt;code class=&quot;language-text&quot;&gt;render&lt;/code&gt; 函数，这个组件类的实例在多次渲染之间仍然是同一个，因此在它身上定义的实例变量&lt;strong&gt;事实上成为了可变数据&lt;/strong&gt;。这就使得类组件的工作方式在 React 理念中显得格格不入，甚至带来 bug 的风险。&lt;/p&gt;
&lt;p&gt;可变数据的典型便是 &lt;code class=&quot;language-text&quot;&gt;this.state&lt;/code&gt;。虽然理论上我们必须通过 &lt;code class=&quot;language-text&quot;&gt;setState&lt;/code&gt; 函数来修改 &lt;code class=&quot;language-text&quot;&gt;this.state&lt;/code&gt;，但这只是为了让 React 能够感知到变化并触发重新渲染。你也完全可以直接对 &lt;code class=&quot;language-text&quot;&gt;this.state&lt;/code&gt; 赋值，然后手动触发渲染，或是让别处触发的重新渲染使你之前的修改体现在 UI 上。&lt;/p&gt;
&lt;p&gt;这样的行为符合我们长久以来（习惯于面向对象与可变数据）的认知，但有时会给我们带来麻烦，尤其是在有异步行为的场景中。React 核心开发者 Dan Abramov 在&lt;a href=&quot;https://overreacted.io/zh-hans/how-are-function-components-different-from-classes/&quot;&gt;他的文章&lt;/a&gt;中举了一个十分有代表性的例子。例如在社交网站中，我们可以点击关注一个人的社交帐号，向服务器请求回包后弹窗告知用户关注成功。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ProfilePage&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Component&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function-variable function&quot;&gt;showMessage&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;alert&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;Followed &apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;user&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token function-variable function&quot;&gt;handleClick&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;setTimeout&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;showMessage&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;button onClick&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;handleClick&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;Follow&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;button&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;这段代码存在着 bug，而 bug 的根源就在 &lt;code class=&quot;language-text&quot;&gt;this.props&lt;/code&gt; 的可变性上。假如我们在 A 的主页点击了关注，但在 3 秒中内切换到 B 的主页，由于 &lt;code class=&quot;language-text&quot;&gt;this.props.user&lt;/code&gt; 变成了 B，弹窗的内容就成了“Followed B”。但如果我们使用函数组件，就可以天然规避这个问题（注意这个例子并不涉及 Hooks）：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ProfilePage&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;props&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;showMessage&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;alert&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;Followed &apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;user&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;handleClick&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;setTimeout&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;showMessage&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;button onClick&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;handleClick&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;Follow&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;button&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;没有 bug 是因为，作为函数式组件，&lt;code class=&quot;language-text&quot;&gt;ProfilePage&lt;/code&gt; 本质只是一个普通的函数。当 &lt;code class=&quot;language-text&quot;&gt;user&lt;/code&gt; 改变时，React 传入新的 &lt;code class=&quot;language-text&quot;&gt;props&lt;/code&gt; 重新执行了这个函数。但在上次函数执行过程中声明的 &lt;code class=&quot;language-text&quot;&gt;showMessage&lt;/code&gt; 函数，它绑定的 &lt;code class=&quot;language-text&quot;&gt;props&lt;/code&gt; 的值仍然是上次执行时的值，而不是像类组件那样，改变了 &lt;code class=&quot;language-text&quot;&gt;this.props&lt;/code&gt; 的内容。以这个函数的视角来看，&lt;code class=&quot;language-text&quot;&gt;props&lt;/code&gt; 只是一个普通的对象值罢了，而不是某个实例变量的引用，因此在当次函数执行过程中，所有地方读到的 &lt;code class=&quot;language-text&quot;&gt;props&lt;/code&gt; 永远都是同一个值，即当次渲染传入的值。&lt;/p&gt;
&lt;p&gt;理解了函数组件如何规避可变状态带来的问题，就可以理解为何要用 Hooks 取代类组件。通过 Hooks，我们可以让 &lt;code class=&quot;language-text&quot;&gt;state&lt;/code&gt; 也和 &lt;code class=&quot;language-text&quot;&gt;props&lt;/code&gt; 一样，获得在组件单次渲染中的不可变性。这也更加贯彻了 React 的函数式、不可变的理念。我们可以把上面的例子用 &lt;code class=&quot;language-text&quot;&gt;useState&lt;/code&gt; 来改写，一样是符合我们预期，没有 bug 的。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ProfilePage&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;user&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; setUser&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;A&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;showMessage&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;alert&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;Followed &apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; user&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;handleClick&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;setTimeout&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;showMessage&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;button onClick&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;handleClick&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;Follow&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;button&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;没有 bug 的原因是，&lt;code class=&quot;language-text&quot;&gt;user&lt;/code&gt; 变量在单次渲染时实际上就是一个普通的字符串（可以想象把所有的 &lt;code class=&quot;language-text&quot;&gt;user&lt;/code&gt; 都替换成 &lt;code class=&quot;language-text&quot;&gt;&amp;#39;A&amp;#39;&lt;/code&gt; ）。而倘若通过 &lt;code class=&quot;language-text&quot;&gt;setUser&lt;/code&gt; 改变了 &lt;code class=&quot;language-text&quot;&gt;user&lt;/code&gt; 值，也只是触发下一次对函数的调用，对当次渲染毫无影响。&lt;/p&gt;
&lt;p&gt;我们可以以 Vue 的视角审视下这个例子。如果你认为 Vue 的组合式 API 与 React Hooks 相当的话，我们可以用组合式 API 来实现这个例子：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;html&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-html line-numbers&quot;&gt;&lt;code class=&quot;language-html&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;template&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;select&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;v-model&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;user&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;option&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;A&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;option&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;option&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;B&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;option&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;select&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;button&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;@click&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;handleClick&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;Follow&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;button&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;template&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;script&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;setup&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token script&quot;&gt;&lt;span class=&quot;token language-javascript&quot;&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; ref &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;vue&apos;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; user &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ref&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;A&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;showMessage&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;alert&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;Followed &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;user&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;handleClick&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;setTimeout&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;showMessage&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;script&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;不难看出这段代码和 React 的类组件实现一样，是存在 bug 的版本（当然，用选项式 API 也一样）。但是对于 Vue 来说这样的结果是符合预期的。因为不像 React 遵循的不可变性理念，Vue 采用的是响应式数据的理念，数据是可变的，这必然要求我们持有响应式数据的引用。&lt;/p&gt;
&lt;p&gt;事实上想要使用 React Hooks 完美还原这段 Vue 代码的能力，我们也要采取类似的做法，通过 &lt;code class=&quot;language-text&quot;&gt;useRef&lt;/code&gt; Hook 为 &lt;code class=&quot;language-text&quot;&gt;user&lt;/code&gt; 变量创建一个可以横跨多次渲染的引用。而想要在 Vue 中规避这个 bug，并没有完全对应 React 函数组件的做法，只能另想办法规避了。&lt;/p&gt;
&lt;h2&gt;useEffect 与 watch&lt;/h2&gt;
&lt;p&gt;React 的 &lt;code class=&quot;language-text&quot;&gt;useEffect&lt;/code&gt; Hook 与 Vue 组合式 API 的 &lt;code class=&quot;language-text&quot;&gt;watch&lt;/code&gt; 方法是一组经常被拿出来比较的概念。它们做的事情类似，都是在各自的依赖发生改变时，执行对应的逻辑。但光看它们的名字却是大不相同。倘若我们了解了 React Hooks 与 Vue 组合式 API 各自的理念和动机，就不难理解它们为什么不同。&lt;/p&gt;
&lt;p&gt;Vue 的 &lt;code class=&quot;language-text&quot;&gt;watch&lt;/code&gt; API 很容易理解，它对应于原来选项式 API 中的 &lt;code class=&quot;language-text&quot;&gt;watch&lt;/code&gt; 选项。顾名思义，就是监听数据的变更。由于 Vue 基于响应式数据的理念，能够跟踪所有响应式变量的变更，因此能做到这些并不费吹灰之力。&lt;/p&gt;
&lt;p&gt;而对于 React 的 &lt;code class=&quot;language-text&quot;&gt;useEffect&lt;/code&gt; Hook，上文已经提到，我们不要再用生命周期的思想去类比它，而是从函数式的角度去理解。&lt;/p&gt;
&lt;p&gt;在理想情况下，所有渲染函数都是纯函数，这样我们可以放心地无限次调用它们。但是现实显然没有这么美好，除了渲染之外往往还要做些别的事情。React 统一把这些事情认为是副作用（Side Effect），这也就是函数名 &lt;code class=&quot;language-text&quot;&gt;useEffect&lt;/code&gt; 的来历。&lt;/p&gt;
&lt;p&gt;说句题外话，从源码的角度，React 核心只是维护内部的组件树。至于把树的最新状态同步到 DOM 上这一工作（即 react-dom 的职责），也被认为是一种副作用。&lt;/p&gt;
&lt;p&gt;既然是渲染的副作用，那它自然是在每次渲染之后都会调用一次。而它的依赖数组，也只是用来规避重复调用副作用时可能带来的性能、死循环等问题。在 React 看来，依赖数组只是一个普通的数组，并不非得是真正的依赖。这也是为什么 React 不会为我们自动收集依赖。如果你愿意，你完全可以通过自己编排依赖数组来达到目的。只是大多数时候人脑应付不过来过于复杂的逻辑，因此官方推荐我们诚实地把依赖数组的内容与副作用函数的真正依赖保持一致。&lt;/p&gt;
&lt;p&gt;所以 &lt;code class=&quot;language-text&quot;&gt;useEffect&lt;/code&gt; 和 &lt;code class=&quot;language-text&quot;&gt;watch&lt;/code&gt; 这两者在设计意图上就完全不同，只是最终殊途同归而已。网上很多文章在对比组合式 API 与 React Hooks 时只会轻描淡写地提到一句“前者只执行一次，后者会执行多次”，却没有意识到这一区别的背后隐藏着它们设计理念上的巨大差别。&lt;/p&gt;
&lt;h2&gt;结语&lt;/h2&gt;
&lt;p&gt;在对比了 Vue 组合式 API 与 React Hooks 之后，我们发现它们并不是像看上去那样变得逐渐相似，恰恰相反，它们进一步把自己的特点推向了极致。Vue 通过组合式 API 进一步暴露了它的响应式数据能力，使之不再局限于 Vue 实例以内，更便于逻辑组合与复用。而 React 通过 Hooks 弥补了 class 组件中可变数据的隐含问题，进一步贯彻了函数式编程、不可变数据的设计理念。&lt;strong&gt;React 和 Vue 实际上变得越来越不同了&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;而对于我们使用者来说，在使用一项技术前需要让自己充分理解这一技术的设计理念，顺着它的思路来写代码。当然，这需要花点时间去学习和适应新的概念，尤其是对于 React Hooks。顺着正确的心智模型，才能事半功倍，而不是想当然地把旧的经验套用在新技术上，等出了问题再高呼真坑。&lt;/p&gt;</content:encoded></item><item><title><![CDATA[装修随笔]]></title><description><![CDATA[…]]></description><link>https://maliut.space/p/renovation/</link><guid isPermaLink="false">https://maliut.space/p/renovation/</guid><pubDate>Sat, 07 Aug 2021 23:34:00 GMT</pubDate><content:encoded>&lt;p&gt;如题，前段时间完成了人生的第一次装修。在经历了一系列兵荒马乱之后，休息了一段时间，回过头来再看这段经历，希望能尽量客观条理地记录下自己的见闻。如果有幸能帮助大家在面对装修时少一点迷茫，那就更好了。&lt;/p&gt;
&lt;!--more--&gt;
&lt;h2&gt;期待与担忧&lt;/h2&gt;
&lt;p&gt;一开始面对装修时我们总是怀着两种矛盾的心态。&lt;/p&gt;
&lt;p&gt;一方面，面对第一次能够完全设计自己新家的机会，我们无疑是兴奋的。我们会在网上寻找各式各样的装修效果图，并以此来想象新家未来的样子。&lt;/p&gt;
&lt;p&gt;另一方面，装修本身就是一个早已臭名昭著的行业，很容易就能看到别人在装修时遇到的各种烦心事。没有一家能够安安稳稳，完全顺利地完成装修的过程。这不禁也让人对即将开始的装修过程充满恐慌。&lt;/p&gt;
&lt;p&gt;而更令人感到恐慌的是，装修知识跨越了很多专业领域。这使得当你看到别人提到的一些装修中的坑，你甚至都看不懂他们在说什么。这就显得你像一只待宰的羔羊，随时会被敲骨吸髓。&lt;/p&gt;
&lt;p&gt;好在后来偶然来到了一个上海本地生活论坛（篱笆网）。在这个论坛上有很多人以日记的形式图文并茂地发了自己家的装修经历。贵在真实，他们的记录中并不全是效果图展示，也不都是投诉坑爹的。看的多了以后，就对整个装修过程有了全局的认识，也渐渐把一些之前只停留在文字上的术语与实际的工程步骤联系在了一起，给了我开始装修的底气。&lt;/p&gt;
&lt;p&gt;这也是我学到的一个经验，即本地生活论坛往往拥有最真实的一手信息。&lt;/p&gt;
&lt;h2&gt;公司选择&lt;/h2&gt;
&lt;p&gt;一般来说有装修公司与施工队可选。网上很多都说装修公司下面主要也都是外包工人，还要收额外的管理费，不如直接找靠谱包工头 + 第三方监理。&lt;/p&gt;
&lt;p&gt;老实说这并没有错，不过有公司这个实体在，终究更靠谱一点。毕竟我们也没有装修经验，且工作忙不能时刻盯着工地。（当然，找了装修公司也不意味着你就可以当甩手掌柜了。）另外找公司你能看到各路评价，但是找到靠谱包工头的难度就大多了。因此最终还是决定选择装修公司。&lt;/p&gt;
&lt;p&gt;刚开始肯定是想着通过我们熟悉的互联网渠道去寻找。可惜的是装修行业与互联网的整合并不是很深，不像其他业已成熟的 O2O 行业，能够为我们提供省心与标准化的服务。另外在互联网上营销厉害的几家公司，在网友中的风评反倒都很差。（网友：你把钱都拿去打广告了还指望管好装修质量？）&lt;/p&gt;
&lt;p&gt;后来发现篱笆网以后，就自然打算在这个平台上进行选择了。虽然这里面的装修公司也不是十全十美的，但贵在真实。（虽然后面发现装修公司还是会做一些控评，以及对于在网上发帖的客户可能会有一些区别对待）&lt;/p&gt;
&lt;h2&gt;设计师&lt;/h2&gt;
&lt;p&gt;装修公司一般都会有自己的设计师，如果你对设计有更高的要求，也可以花更多的钱选择独立设计师。我们房子又不大，也只想做中规中矩的装修。反倒是独立设计师对我们来说又平添了外部依赖与沟通成本，故一开始就不考虑。因此下文也都是讨论装修公司的设计师。&lt;/p&gt;
&lt;p&gt;设计师一般是装修公司中第一个与你打交道的角色。他们为你的量房并了解你的需求，然后出设计图，并只收取一笔极少的设计费或干脆由装修公司免费提供。而这一阶段往往会选择多个装修公司进行比稿，在他们之中选择一家正式签约。这也是为什么很多人把装修公司的设计师称为销售/绘图员。&lt;/p&gt;
&lt;p&gt;能感受到设计师的两种风格。有一类设计师比较专注在设计上面，能够给出一些比较有特色的设计；而另一类在设计上看上去中规中矩，但是对于装修的工艺，可能遇到的坑等信手拈来。&lt;/p&gt;
&lt;p&gt;我们最终选择了后者，现在看来还是明智的。因为本身房子限制，设计空间有限，对于功能分区的设想我们自己也已经想的八九不离十了。而对装修过程的了解，使得设计师能够顺畅地与装修工人沟通，在设计落地到施工上时避免了不少的坑。&lt;/p&gt;
&lt;p&gt;当然，这也取决于设计师的负责任程度。也有设计师在出完图收到钱以后就做了甩手掌柜。不过这个就得看运气了。&lt;/p&gt;
&lt;h2&gt;签约方式&lt;/h2&gt;
&lt;p&gt;稍微在网上了解了装修的人，都会接触到全包、半包、清包的概念。&lt;/p&gt;
&lt;p&gt;清包就是工人只出人力，装修用到的水泥黄沙等一切材料都要你自己负责采购。很明显这种是最省钱的，但是你自己也最累。装修公司都要保证自己的利润空间，肯定不会接受这种方式，一般是有闲且对装修过程十分了解的人，直接找工头才会这样做。&lt;/p&gt;
&lt;p&gt;而全包和半包就是谁来购买主材的区别。主材可以简单理解为那些看得见摸得着，但只有装修时才会特意去关注的建材，比如瓷砖、地板、橱柜之类的。全包就是全部通过装修公司选购，你只能从几个特定的款式中挑选，如果有定制化需求就得另加钱。而半包的话，这些就得自己去购买。&lt;/p&gt;
&lt;p&gt;现在网上主流都是推荐使用半包&lt;del&gt;中庸之道&lt;/del&gt;。不过个人觉得可以商榷。全包选择少，价格不透明，难以货比三家。不过也有好处，就是省去了与很多商家单独对接的精力，有什么问题也会有装修公司居中调节。（前提是装修公司要比较靠谱，在网上看到的不靠谱的例子也不少）。&lt;/p&gt;
&lt;p&gt;需要澄清的一点是，全包也并不意味着你可以对工地撒手不管了。它只是帮你解决了材料供应商的问题，但在实际施工中随时都可能会有情况发生，需要你去处理。如果真想要拎包入住，恐怕只能买精装修了。&lt;del&gt;可精装修被曝出质量问题的还少吗？&lt;/del&gt;&lt;/p&gt;
&lt;p&gt;我们最终名义上是半包，实际上介于半包和全包之间。在合同中约定了我们在装修公司合作厂家中挑选一定价值的主材，并承诺价格不高于市场价。在签约时也听店长唠嗑了几句，人工和材料费用的上涨是大趋势，为了维持装修公司的利润，未来全包会逐渐趋于主流。&lt;/p&gt;
&lt;h2&gt;材料采购&lt;/h2&gt;
&lt;p&gt;装修过程中的采购，频次低，金额大，且会服务你很多年，因此值得谨慎对待。&lt;/p&gt;
&lt;p&gt;随着网购的发展，我们往往会面临的抉择是在网上还是在实体店购买。网购挤占了不少实体店的空间，也滋生出了不少套路。&lt;/p&gt;
&lt;p&gt;最常见的套路就是款式区分线上与线下款，为同样配置的商品打上不同的型号以混淆视听。更有甚者会在不同的电商渠道上也区分不同的型号。&lt;/p&gt;
&lt;p&gt;型号被打乱，一方面杜绝了顾客在线下店看好型号，再去线上搜索比价的情况。另一方面，如果你拿着网上的型号和配置去线下咨询，他们就会以没有这个型号为借口，向你推荐配置和价格更高，但不一定符合你需求的产品。然后通过销售的口才让你冲动下单。&lt;/p&gt;
&lt;p&gt;有些大品牌，可以在网上搜到线上线下型号的对照表。如果搜不到，就只能靠自己多多对比配置信息进行判断了。还有一种说法是线上款之所以便宜，是因为品质有缩水，偷工减料了。我个人对此说法持怀疑态度。&lt;/p&gt;
&lt;p&gt;并非所有商品都是线上比较便宜，线下店的价格水分还是很大的。当然这也视品类而定。在线下逛时，光看标价是不够的，很多时候都是虚高，装作要买的样子和销售聊聊，才能打听到真实的价格。如果你能说会道，善于砍价，就更好了。&lt;/p&gt;
&lt;p&gt;印象比较深刻的是卫浴产品，上来就是对折起步，实在是让人大开眼界。还有看上去非常高科技的软水机，实体店报价就比线上便宜好几千，还送赠品。当然也有像方太这种线上线下统一型号统一价格的，点名表扬。&lt;del&gt;虽然线下购买还是送了不少赠品&lt;/del&gt;&lt;/p&gt;
&lt;p&gt;大多数情况线上价格会更优惠。如果正好赶上大促，还可能再享受一波优惠。如果赶不上大促，许多商家还能允许一段延迟发货期，多问问客服或许可以给你晚点发货。实在赶不上优惠也不用强求，否则一堆东西堆在工地就难以干活了。装修会使你意识到，能用钱解决的问题都是小问题，要是造成工程延期、配合不上之类的问题会更加头疼。&lt;/p&gt;
&lt;p&gt;还需要注意的一点是装修中的大件商品很多都不能立即发货，因此要提前做做功课，避免因为等待到货导致进度延期。&lt;/p&gt;
&lt;p&gt;在选购过程中，对于一些大件我们是在设计师的陪同下选购的。有人会很反感这种现象，认为设计师会吃回扣。这种情况确实存在，但还是像之前所说的那样，看设计师的靠谱程度。而设计师的存在还是很有必要的，因为商家默认你懂装修上的各种事情，会问你一些比较专业的问题，你甚至都听不懂。如果没有设计师的陪同，我们就只能和商家面面相觑了。&lt;/p&gt;
&lt;h2&gt;联系&lt;/h2&gt;
&lt;p&gt;装修并不是搭积木。在你可见之处的各种功能，往往都需要很多不可见之处的支持。因此在开始装修时，就一定要计划好未来家中的各种设施，越细节越好。否则一旦隐蔽工程成型，就再也没有补救的机会了。（但这其实蛮悖论的，因为第一次装修之前你根本就没有这么多知识，而随着装修过程你慢慢意识到了这些却又来不及了，只能说尽量吧）&lt;/p&gt;
&lt;p&gt;大家最耳熟能详的就是插座和开关的问题，每篇文章都会提要尽早计划好插座的位置，留够数量等等。设计师在出图时也会考虑这些，所以翻车的比较少。但还有很多东西是很难想到要在前期做好计划的。&lt;/p&gt;
&lt;p&gt;一个例子是零冷水热水器。如果被破旧出租房的热水器摧残过，一定都知道一开水龙头就放出热水是多么幸福。现在有很多热水器都拥有零冷水功能，但其原理决定了在铺设水管时必须事先增加一条回水管。而目前装修的标准化流程默认并没有这一项。如果你之前没提出来，后续安装热水器时就得犯难了。&lt;/p&gt;
&lt;p&gt;安装软水机也是类似的原理。不过软水机本身也是专业的机器，反倒会更上心一点。软水机的工作人员也会在水电定位时予以协助。&lt;/p&gt;
&lt;p&gt;现在还有很多人希望在家中实现智能家居，首要任务就是把开关都换成智能开关。但智能开关安装时比普通安装需要多一根零线，这也需要在电线布线时额外处理。&lt;/p&gt;
&lt;p&gt;其实像热水器、还有智能开关这两个，即使前期没做准备，后面也有补救的方案，但并不完美，或多或少还是存在些隐患。既然都重头装修了，为什么不一次性做好呢？&lt;/p&gt;
&lt;p&gt;还有一个比较大的问题就是家里的网络。如今无线网已经是媲美水电的基础设施了，但装修工人对此的了解还远远不足，只会把网线拉到指定位置完事。电信的工程师倒是非常专业，但只在装修结束后安装宽带时登场&lt;del&gt;然后帮我们穿了水晶头以及发现工人接法不对，把网口一一撬开重新接线&lt;/del&gt;。因此对于光猫、路由器的摆放、网口位置，家里是不是比较大以至于需要 AP/mesh 组网等，自己也得做好功课。&lt;/p&gt;
&lt;p&gt;关于网络这一块，网上有很多专业的文章了。我本身也是一知半解，而且没什么极客精神，就不在这里误人子弟了。如果你对这块比较有追求，一定要在一开始就做好规划，并一开始就紧盯住装修公司，包括网线、水晶头的用料。&lt;/p&gt;
&lt;h2&gt;监理&lt;/h2&gt;
&lt;p&gt;面对装修行业鱼龙混杂，以及客户缺乏装修知识的现状，一群曾经的装修行业从业者站了出来，催生了装修监理这一职业。如今监理已普遍被客户和装修公司所接受。&lt;/p&gt;
&lt;p&gt;现在的装修公司，提供监理已经成为了标配。不过同样归属于装修公司，难免让人觉得是既当运动员又当裁判员。此外，也有独立于任何装修公司的第三方监理。&lt;/p&gt;
&lt;p&gt;虽然装修公司的监理让人怀疑是不是会包庇自己人，但默认在他们讲职业道德的前提下，还是很有帮助的。这是因为他们对工人是有监督的强制力的。另外，比起工人，他们往往沟通能力较强，能成为客户与工人之间沟通的桥梁。&lt;/p&gt;
&lt;p&gt;第三方监理则在专业能力上更胜一筹，检查的项目也更加细致。但他们只能提出建议，对工人则没有强制力，工人有时并不服他们。这时有装修公司的监理在中间说和就比较重要。&lt;/p&gt;
&lt;p&gt;另外在第三方监理中还有一类陪签服务，即在与装修公司签约时负责审核报价单。&lt;/p&gt;
&lt;p&gt;在刚签约阶段，我们对装修往往还是比较懵逼的状态，对着装修公司给出的事无巨细的报价单也看不出个所以然（而在签约前，装修公司一般是不允许你带走报价单的）。这时候一个靠谱的陪签能帮你审核报价单是否合理，以避免潜在的增项，也可以为后续装修过程中可能会遇到的问题给你打个预防针。&lt;/p&gt;
&lt;h2&gt;接受不完美&lt;/h2&gt;
&lt;p&gt;虽然很遗憾，但不得不说装修就是一个不断妥协的过程。&lt;/p&gt;
&lt;p&gt;在游戏《Minecraft》中，整个世界被抽象成了一个个规整的小方块，这为我们布置场景提供了极大的便利。但现实中显然没有如此理想的环境。假如你有一格的空间，那么肯定能放下一格的工作台。但假如你有一米宽的空间，那么一定是放不了一米宽的柜子的。&lt;/p&gt;
&lt;p&gt;一个比较违背直觉的事实是，你家的墙与墙，墙与地之间的夹角并不是完美的横平竖直，呈 90° 的。如果你想要做的完美些，好的，请加钱（而且相当于变相缩小了你的室内空间）。有兴趣可以去搜索“顺平”和“垂平”。&lt;/p&gt;
&lt;p&gt;还要考虑的是踢脚线和石膏线的影响。这决定了你的家具不能完美地顶天立地（除非做吊顶）或者完美地贴合墙面。家里的管道也可能凭空占用你布局的一个角落。两种不同材料之间的交界面也不像游戏里那样可以自然贴合在一起。比如瓷砖和地板、和乳胶漆之间，必须考虑如何收边的问题。这又使你的家的角角落落显得参差不齐起来。&lt;/p&gt;
&lt;p&gt;最后，你买的家具和电器，也不能为你保证尺寸的精确性，误差是常有的事。如果你卡着尺寸买东西，结果刚好放不进去就尴尬了。装修与做事一样，都要留点余地。&lt;/p&gt;
&lt;p&gt;现在有万能的互联网，面对一些工艺上的问题，除了传统的做法以外，我们往往能在网上找到一些没那么主流的方法，但看似能完美解决你的问题。但这样的做法并非十全十美，它们可能需要花费不少的金钱，或是需要比较苛刻的前提条件，或是施工工艺比较复杂等等。即使理论上可行，实际上也要面对工人执行层的不完美。&lt;/p&gt;
&lt;p&gt;总之，如果选择了非主流的做法，就要面对可能翻车的风险。选择常规的做法，也许最后的效果并不完美，但至少也不会太离谱。&lt;/p&gt;
&lt;h2&gt;邻居&lt;/h2&gt;
&lt;p&gt;你买的房子可以选择，你的装修公司可以选择，你买的材料、家具可以选择，但你未来的邻居和物业的好坏，却像盲盒一样，当你能够认清楚他们的面目时，却已经没有选择的余地了。&lt;/p&gt;
&lt;p&gt;物业：干啥啥不行，收钱第一名。结合知乎上看到的各种物业事迹，说他们是当地黑社会地头蛇我也信了。本来想是不是个例，不过和监理聊了聊感觉大开发商的物业也不怎么样，更不用说也许是连物业费都收不上来的老破小了。也许这就是双输吧。&lt;/p&gt;
&lt;p&gt;邻居：由于是老小区，邻居也以老年人为主。虽然装修规定只能在工作日上班时间进行，但对一堆老年人来说并没有什么区别。因此他们对装修持有反感的态度也是可以理解的。但仅仅是因为一时嫌吵，就以各种莫须有的理由去各种举报，不得不让人怀疑是坏人变老了。&lt;/p&gt;
&lt;p&gt;更难受的是，装修的过程再烦恼也只是一时的，而物业和邻居的膈应却会持续很久。只能希望大家好运吧。&lt;/p&gt;
&lt;h2&gt;风险&lt;/h2&gt;
&lt;p&gt;现在智能家居的概念正走入寻常百姓家，不少人在装修之前的计划环节就已经把各智能生态纳入了统一规划。不过出于我个人对它的担忧，我并没有（刻意去）采用其中的任何一种。&lt;/p&gt;
&lt;p&gt;智能家居的理想无疑很美好，也有很大的想象空间，但有时我们需要扪心自问，是否真的需要一盏能够用手机控制开关和颜色的灯。当然，也可以配合传感器实现自动的开关，但只要你的动线设计合理，按个开关只不过是举手之劳。自动感应固然更胜一筹，但优势并不明显，可这却需要你在装修时花费不菲的人力物力去实现整套系统，显得并不那么值得。&lt;/p&gt;
&lt;p&gt;智能家居的各大厂商出于赢利目的，必然会希望构建自己的生态，对不属于其生态的产品支持很差或干脆不支持。这就导致了如果你想要构建智能家居，你购买家电的选择将大大变小，以至于有时不得不捏着鼻子选择性价比较低的产品。更糟的是这使得某一厂家的产品在你的家里形成了垄断，虽说正常使用起来比较方便，但假如他们开始作恶（例如给你家的电视加个广告），你也将毫无还手之力。&lt;/p&gt;
&lt;p&gt;此外，对于涉及安全隐私类的产品，例如电子锁、摄像头等，出于对程序员这一职业的了解，我对它们的安全性并不能抱有太大的信心。记得之前有新闻曝出联网摄像头可以被任何人看到直播的，实在是触目惊心。&lt;/p&gt;
&lt;p&gt;当然对于能大幅提升体验的产品也不要一味排斥。现在有很多小家电单品都提供了一定程度的智能化能力，不需要非得放到整个体系中来。&lt;/p&gt;
&lt;h2&gt;展望未来&lt;/h2&gt;
&lt;p&gt;作为一名软件工程师，习惯了赛博世界的工程，面对装修这一现实工程，满满的都是吐槽。&lt;/p&gt;
&lt;p&gt;在写代码时，虽然写出来的代码并不十全十美，但至少我们知道什么是好的，有原则可循。而在装修中，似乎一切都在与最佳实践对着干。各工序之间耦合严重，各种装修的隐蔽工程，一旦实现完成之后，就再也没有改动的可能了。缺乏通用的接口与意识，各要素之间的对接还是需要很多的定制化开发。这些使得装修是一条有去无回的单行线，一旦哪一步出了问题而又没有及时改正，就得忍受着这样的问题几十年，或者只能砸掉重来。&lt;/p&gt;
&lt;p&gt;那么，就没有更好的办法了吗？&lt;/p&gt;
&lt;p&gt;我们可以尽量选择灵活易于插拔的架构。我们选择了落地式的台盆、电视柜，独立的浴室柜、晾衣架等，以尽量避免在墙面和顶面打洞。&lt;/p&gt;
&lt;p&gt;装修行业中也自发地产生了一些统一的规范，例如插座盒的大小，所有厂商都遵循统一的规格，这样不同的产品之间就可以轻松地替换。另一个典型的例子是厨房与卫生间的集成吊顶，由统一大小的方形拼接而成，便于拆卸组装。在购买灯、暖风机时也不用再纠结大小尺寸，只要是兼容集成吊顶的都可以放心购买。考虑到厨房与卫生间往往是天花板漏水的重灾区，需要时常打开检修，这样模块化便于拆卸的吊顶就显得尤为实用。&lt;/p&gt;
&lt;p&gt;能够把这样的理念推广到整个装修过程中吗？就在装修的过程当中，我在网上看到了&lt;a href=&quot;https://zhuanlan.zhihu.com/p/80449951&quot;&gt;装配式装修&lt;/a&gt;的概念，就像游戏中的家园系统，划分成一个个标准块进行拼装，理论上完全避免了传统装修的各种缺点，十分心动。不过目前网上能找到的信息都是以宣传为主，没什么实操的帖子，倘若让我做小白鼠我也是不肯的。&lt;/p&gt;
&lt;p&gt;希望在未来能看到这种模式的发扬光大吧。&lt;/p&gt;
&lt;h2&gt;结语&lt;/h2&gt;
&lt;p&gt;装修实在是一个过于累人的过程，以至于仅仅是写这篇文章我都感到心累得几欲弃坑&lt;del&gt;甚至已经推翻重写了一次&lt;/del&gt;。也有很多很多上文没提到的知识和感受但无力再写出来了。&lt;del&gt;要不是另一半分担了太多我一定光速逃避去买精装修。&lt;/del&gt;&lt;/p&gt;
&lt;p&gt;最后还是想碎碎念几句。装修过程千头万绪，最理想的情况还是有人能够随叫随到，如果和长辈在同一个城市，或许能好很多。不过实在管不过来的话，就得学会抓大放小，不能太追求完美。看到网上很多和装修公司的纠纷，其实就是过于追求细节了，有些问题实际上住进去过两个月就会觉得没什么大不了。&lt;/p&gt;
&lt;p&gt;说起来看到链家也推出了装修服务，会把较老的二手房重新装修后挂牌出售，看来也是瞄准了装修这一痛点吧。不过这样的装修质量如何就不好说了，而且也不适用于自己有些特殊需求的场景。&lt;/p&gt;
&lt;p&gt;有网友说，装修是你在离开学校以后学习能力最强的时刻。诚不我欺。共勉。&lt;/p&gt;</content:encoded></item><item><title><![CDATA[不合时宜的 CSS：Tailwind CSS 引发的思考]]></title><description><![CDATA[最近时常在社交网络上看到 Tailwind CSS 被提起，自己前段时间出于兴趣也拿它来做了个项目。与其他很多技术不同，Tailwind CSS 自出现起就在网上有不小的争议。与网上很多文章不同，在这篇文章中，我并不想讨论它的技术细节，而是对目前原子 CSS…]]></description><link>https://maliut.space/p/out-of-date-css/</link><guid isPermaLink="false">https://maliut.space/p/out-of-date-css/</guid><pubDate>Mon, 14 Jun 2021 23:17:00 GMT</pubDate><content:encoded>&lt;p&gt;最近时常在社交网络上看到 Tailwind CSS 被提起，自己前段时间出于兴趣也拿它来做了个项目。与其他很多技术不同，Tailwind CSS 自出现起就在网上有不小的争议。与网上很多文章不同，在这篇文章中，我并不想讨论它的技术细节，而是对目前原子 CSS 这一做法回潮的现象，以及前端样式写法的发展，表达一些个人的想法，也希望能为读者带来一些启发。&lt;/p&gt;
&lt;!--more--&gt;
&lt;h2&gt;“前端三剑客”&lt;/h2&gt;
&lt;p&gt;即使在非专业人士中，前端的三大技术栈 —— HTML、CSS、JavaScript 也有不小的知名度。究其原因，一方面是因为它们是组成当今各种丰富多彩页面的基础，另一方面也是因为我们可以用很简单的语言解释其各自的用途，让人们&lt;del&gt;自以为&lt;/del&gt;理解了。经典的解释是：HTML 决定了网页的骨架、内容；CSS 决定了网页的样式；而 JavaScript 决定了网页的行为。&lt;/p&gt;
&lt;p&gt;看上去这三者各司其职，配合得十分美好。但它们真的是完全正交的吗？现实并不总是这么理想的。HTML 总是想插一脚样式的事情，且不说曾经的纯样式标签，例如 &lt;code class=&quot;language-text&quot;&gt;&amp;lt;b&amp;gt;&lt;/code&gt; 等，就算是现在的浏览器中，&lt;code class=&quot;language-text&quot;&gt;&amp;lt;body&amp;gt;&lt;/code&gt;、&lt;code class=&quot;language-text&quot;&gt;&amp;lt;h1&amp;gt;~&amp;lt;h6&amp;gt;&lt;/code&gt; 等基本的标签也会带默认的样式（这也是 &lt;a href=&quot;https://www.css-reset.com/&quot;&gt;CSS Reset&lt;/a&gt;、&lt;a href=&quot;https://csstools.github.io/normalize.css&quot;&gt;Normalize.css&lt;/a&gt; 等存在的原因）。还有些 HTML 标签还自带了交互的能力，美其名曰，可以提高用户在禁用 JavaScript 时的使用体验。&lt;/p&gt;
&lt;p&gt;而 CSS 也逐渐扩展着自己的能力边界。最早 CSS 只是为了附加一些简单的样式，但随着人们对样式和交互的需求不断复杂，旧有的能力已远远无法满足需要，因此新的能力不断被加入 CSS 标准中，也不断有各种 CSS 框架如雨后春笋般冒了出来。一开始它们只是增强原始 CSS 的语法，到后来逐步发展成了一套几乎&lt;a href=&quot;https://stackoverflow.com/questions/2497146/is-css-turing-complete&quot;&gt;图灵完备&lt;/a&gt;的闭环。经常能在网上看到一些纯 CSS 实现的酷炫交互效果，令人为之惊叹。&lt;/p&gt;
&lt;p&gt;JavaScript 嘛就更不用说了，随着 DOM API 不断完善，没有什么 HTML 和 CSS 能做的事情是 JavaScript 不能做的。&lt;/p&gt;
&lt;p&gt;但在这三者的能力都不断增强的时候，它们之间的互操作性却成了瓶颈所在。例如当你需要根据某些复杂的条件为不同的 HTML 元素附上不同的样式时，就需要用 JavaScript 写上胶水代码。并不是不能做，只是这一方面让 JavaScript 僭越了三者的分工，另一方面你的思维需要在三者之间切换，了解它们各自在对方的世界中暴露的 API，这一定程度上加重了你的心智负担。而有趣的是，这一点正好成为了 CSS 能力不足，需要进一步增强的理由，而增强后的 CSS 迫使你学习它引入的新语法，却只是做了与 JavaScript 能做的同样的事，进一步加重了你的心智负担。&lt;/p&gt;
&lt;p&gt;既然这三者是你中有我，我中有你的关系，不知大家有没有想过为什么非得把这三者区分得这么死，而不是统一到一套体系中来呢？或许我们需要从其他不同的角度寻找答案。&lt;/p&gt;
&lt;h2&gt;Web 与其他 GUI 技术的发展史&lt;/h2&gt;
&lt;p&gt;虽说一切能用 JavaScript 的实现的东西最终都会被 JavaScript 实现，以至于前端开发者无所不能。但也不妨让我们跳出传统网页端这一亩三分地，以大前端的视角看一看其他 GUI 技术，它们分别代表了在它们出现的那个年代，开发者对于如何设计 GUI 开发方式的思考与设想。&lt;/p&gt;
&lt;h3&gt;Java Swing&lt;/h3&gt;
&lt;p&gt;Swing 是 Java 原生支持的跨平台 GUI 开发框架。由于 Java 本身是一个非常严格的面向对象语言，Swing 自然也继承了其面向对象的风格。具体来说，Swing 中的每一个组件都是一个对象，而组件的内容、样式等，就是这个对象的属性。对象之间通过组合的方式，共同构成了复杂的应用界面。&lt;/p&gt;
&lt;p&gt;一个 Swing 程序的例子如下所示：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// 创建一个窗口&lt;/span&gt;
&lt;span class=&quot;token class-name&quot;&gt;JFrame&lt;/span&gt; frame &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;JFrame&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;HelloWorld&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// 关闭窗口时就退出程序&lt;/span&gt;
frame&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setDefaultCloseOperation&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;JFrame&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;EXIT_ON_CLOSE&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// 创建一个标签&lt;/span&gt;
&lt;span class=&quot;token class-name&quot;&gt;JLabel&lt;/span&gt; label &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;JLabel&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Hello World&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// 设置标签的一些样式和属性&lt;/span&gt;
label&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setIcon&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ImageIcon&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;path/to/your/image.png&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
label&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setLocation&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;200&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
label&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setIconTextGap&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; 
label&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setBorder&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
label&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setOpaque&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// 把标签添加到窗口中&lt;/span&gt;
frame&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getContentPane&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;label&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// 把窗口设成能包裹住内容的合适大小&lt;/span&gt;
frame&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;pack&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// 使窗口可见&lt;/span&gt;
frame&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setVisible&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;这是比较简单的场景，如果需要复杂的自定义布局，还可以拿底层 awt 的 Graphic 对象自己去绘制。虽然从代码示例上看还是比较清晰的，但在实际项目中，容易与逻辑代码混杂在一起，很难直观看出布局与样式。&lt;/p&gt;
&lt;h3&gt;Android&lt;/h3&gt;
&lt;p&gt;虽然 Android 有自己的一套 API，不过其设计与 Swing 类似，都是基于面向对象的思路。Android 的一大特点是引入了一套 XML 的布局方案，不知是不是从 HTML 中得到的启发。但 XML 本质上也只是对下层 API 的一个封装，用 XML 描述的布局使用 Java 代码也完全可以实现。在极端注重性能的场景下，甚至需要使用异步解析、或完全手写布局代码的方式来减小解析 XML 文本的开销。在布局或内容变化时，也需要通过命令式的语法，人工追踪变化的范围和过程，获取到控件对象进行操作。&lt;/p&gt;
&lt;p&gt;一个 Android 布局的样例如下所示：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;xml&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-xml line-numbers&quot;&gt;&lt;code class=&quot;language-xml&quot;&gt;&lt;span class=&quot;token prolog&quot;&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;LinearLayout&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;&lt;span class=&quot;token namespace&quot;&gt;xmlns:&lt;/span&gt;android&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;http://schemas.android.com/apk/res/android&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token attr-name&quot;&gt;&lt;span class=&quot;token namespace&quot;&gt;android:&lt;/span&gt;id&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;@+id/title_bar&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token attr-name&quot;&gt;&lt;span class=&quot;token namespace&quot;&gt;android:&lt;/span&gt;layout_width&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;match_parent&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token attr-name&quot;&gt;&lt;span class=&quot;token namespace&quot;&gt;android:&lt;/span&gt;layout_height&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;48dp&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token attr-name&quot;&gt;&lt;span class=&quot;token namespace&quot;&gt;android:&lt;/span&gt;layout_gravity&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;center&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token attr-name&quot;&gt;&lt;span class=&quot;token namespace&quot;&gt;android:&lt;/span&gt;background&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;@color/header_background&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token attr-name&quot;&gt;&lt;span class=&quot;token namespace&quot;&gt;android:&lt;/span&gt;gravity&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;center&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;ImageView&lt;/span&gt;
        &lt;span class=&quot;token attr-name&quot;&gt;&lt;span class=&quot;token namespace&quot;&gt;android:&lt;/span&gt;layout_width&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;wrap_content&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
        &lt;span class=&quot;token attr-name&quot;&gt;&lt;span class=&quot;token namespace&quot;&gt;android:&lt;/span&gt;layout_height&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;wrap_content&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
        &lt;span class=&quot;token attr-name&quot;&gt;&lt;span class=&quot;token namespace&quot;&gt;android:&lt;/span&gt;paddingBottom&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;4dp&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
        &lt;span class=&quot;token attr-name&quot;&gt;&lt;span class=&quot;token namespace&quot;&gt;android:&lt;/span&gt;paddingLeft&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;4dp&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
        &lt;span class=&quot;token attr-name&quot;&gt;&lt;span class=&quot;token namespace&quot;&gt;android:&lt;/span&gt;paddingTop&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;4dp&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
        &lt;span class=&quot;token attr-name&quot;&gt;&lt;span class=&quot;token namespace&quot;&gt;android:&lt;/span&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;@drawable/header_icon2&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;/&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;LinearLayout&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;与之相对应的 Java 写法如下（简单起见省略了部分代码）：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token class-name&quot;&gt;LinearLayout&lt;/span&gt; layout &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;LinearLayout&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;context&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
layout&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setId&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;R&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;title_bar&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
layout&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setBackgroundColor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
layout&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setGravity&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Gravity&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;CENTER&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token class-name&quot;&gt;ImageView&lt;/span&gt; image &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ImageView&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;context&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
image&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setPadding&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
image&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setDrawable&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
layout&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addChild&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;image&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;XML 的出现解决了纯代码写法的一些问题。在面对大部分情况下不太改变的静态布局时，使用 XML 编写可以显著提高可读性，更为直观，同时也便于结合 IDE 实现布局的实时预览与拖动调整。不过它的本质并没有改变，在实际场景中仍然需要大量在代码中获取对象进行操作，在布局变化时也需要写代码对布局对象进行手动管理。&lt;/p&gt;
&lt;h3&gt;React&lt;/h3&gt;
&lt;p&gt;虽然 React 也是 Web 技术中的一种，但我觉得值得将其单独拿出来一说。以 React 为代表的新一代 Web 技术创造性地使用函数式编程思想，实现了声明式 UI 的写法。其核心思想是 &lt;code class=&quot;language-text&quot;&gt;UI = f(State)&lt;/code&gt; 。&lt;/p&gt;
&lt;p&gt;在声明式 UI 的写法中，我们只需关注如何根据最新的状态渲染出 UI，而无需根据每次状态的变化去手动改变 UI 组件的状态，从而大大降低了代码编写的复杂度。而它的底层则使用一套通用的 Diff 算法，使得 UI 重渲染的过程尽可能高效。&lt;/p&gt;
&lt;p&gt;React 的另一个特点就是 JSX 语法。JSX 看上去像 HTML，但实际上是 JavaScript 语法的扩充。之所以设计成 HTML 的样式，是为了让熟悉 HTML 的开发人员能够更快地上手。如果你愿意，只使用纯 JavaScript 的 API 来写也是可以的。&lt;/p&gt;
&lt;p&gt;使用 JSX 而非 HTML 的好处是，由于它本质上是 JavaScript 语法糖，因此在编写布局时便可以与其他逻辑语句无缝衔接，这使得开发时的思路非常顺滑。例如，在 React 中，我们可以这样将一个数组渲染为列表元素：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;reactjsx&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-reactjsx line-numbers&quot;&gt;&lt;code class=&quot;language-reactjsx&quot;&gt;function List({ data }) {
  return (
    &amp;lt;ol&amp;gt;
      {data.map(item =&amp;gt; &amp;lt;li key={item.key}&amp;gt;{item.value}&amp;lt;/li&amp;gt;)}
    &amp;lt;/ol&amp;gt;
  )
}&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;面对 HTML、CSS、JavaScript 三分离导致的问题，React 给出了自己的答案。它将 HTML 与 JavaScript 相统一，彻底解决了两者交互不便的局面。而对于 CSS，React 也做了一层简单的封装，使得人们可以用一个 JavaScript 对象来表达一组样式。这层封装也使得 React 代码可以无障碍地迁移到其他没有 CSS 的平台，例如桌面和移动端上。&lt;/p&gt;
&lt;h3&gt;Flutter&lt;/h3&gt;
&lt;p&gt;Flutter 的主要思想与如今流行的声明式 UI 做法相同，但它作为一门全新的技术，没有那么多历史包袱，且整个框架及其实现语言 Dart 都控制在 Google 手中，因此可以从语法、工具链等层面直接支持想要的特性。这也使得它们在运行时更加高效，而语法看上去也更为激进：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;dart&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-dart line-numbers&quot;&gt;&lt;code class=&quot;language-dart&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MyApp&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;StatelessWidget&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token metadata symbol&quot;&gt;@override&lt;/span&gt;
  Widget &lt;span class=&quot;token function&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;BuildContext context&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Container&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
      decoration&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;BoxDecoration&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;color&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Colors&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;white&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      child&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Center&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
        child&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Text&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;Hello World&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            textDirection&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; TextDirection&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ltr&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            style&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;TextStyle&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;fontSize&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;40.0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; color&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Colors&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;black87&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;可以看到，使用 Flutter 开发的应用程序，无论布局、样式还是逻辑，全部都由 Dart 实现，使得它们之间的互操作毫无障碍。对于一些布局和样式，Flutter 直接为它们提供了单独的组件，鼓励大家多多使用组合的方式，而不必过多纠结于复杂的布局规则与嵌套深度。在构建布局时也只要像构建普通对象那样直接 new 就可以了，并不需要学习一门其他语言或 DSL。也不用担心由此引发的嵌套过深以及临时对象过多等问题，底层运行时自有优化的方式。&lt;/p&gt;
&lt;h3&gt;回到 Web 端&lt;/h3&gt;
&lt;p&gt;我们从时间维度列举了几个&lt;del&gt;我自己略有了解的&lt;/del&gt;具有代表性的 GUI 技术，从中可以一窥技术发展的趋势。一方面是在编写界面布局时，逐渐采用声明式的方式来写，这确实为我们减轻了不少心智负担。而另一方面是，大家几乎都不认为布局、样式和逻辑三者应当被严格分离，而是应该统一在一起，由同一个体系进行描述。&lt;/p&gt;
&lt;p&gt;那么为什么偏偏是 Web 端成为了异类，分裂出了 HTML、CSS、JavaScript 这三种独立的技术呢？我想这可以从历史的角度给出解答。&lt;/p&gt;
&lt;p&gt;HTML 的出现最早，早于上面的所有其他 GUI 技术。HTML 的全程是 &lt;em&gt;HyperText Markup Language&lt;/em&gt; ，可以看出它的初衷只是想更好地描述一个文档，因此需要对普通的纯文本文档进行一些增强。&lt;/p&gt;
&lt;p&gt;CSS 出现在 HTML 之后，本意只是对 HTML 的展示效果做一些美化，且美化的结果可以因人而异、因浏览器而异（这也为不同浏览器 CSS 一致性问题埋下了伏笔）。另外 CSS 有层次之分，例如可以让用户指定的样式覆盖浏览器的默认样式，这也是为什么 CSS 叫做&lt;em&gt;层叠&lt;/em&gt; 样式表。HTML 不应该依赖于 CSS，即使没有 CSS 也要保证网页的内容能够正常显示。出于这样的设计目的，将 HTML 与 CSS 分开是很合理的。&lt;/p&gt;
&lt;p&gt;JavaScript 的出现则更晚了，且一开始也只是为了做一些简单的表单与交互效果，在发明它时大家完全没有想到会发展到如今这样一个庞大的生态。在我印象中，若干年之前大家还会提到的一个最佳实践是用户会出于安全的考虑禁用 JavaScript，而被禁用之后的网页也应尽量保证内容的正常展示，因此 JavaScript 能不用就不用。不过在 SPA 开始流行之后就渐渐没有这种声音了。&lt;/p&gt;
&lt;p&gt;Web 技术和上面提到的其他技术最大的区别在于，Web 起初仅仅是想被用作文档的展示，而其他技术在各自的平台上都是为了做一个完整的应用。一个应用的功能和交互逻辑远比文档展示要复杂，这就需要在代码层面上，交互层与表现层需要尽可能方便地互操作。但 Web 发展到现在已经远远偏离了它被发明的初衷。&lt;strong&gt;Web 已经事实上应用化了。&lt;/strong&gt; 因此我们需要从应用的角度去重新审视 Web。这也是为什么我们会觉得 Web 的三分离架构已经开始拖我们的后腿。&lt;/p&gt;
&lt;h2&gt;“分层架构”&lt;/h2&gt;
&lt;p&gt;分层是软件开发领域十分常见的做法，随着代码库规模不断扩大，分层可以强迫开发者理清楚代码中各个模块的依赖关系，避免代码变成一团浆糊。但具体到如何分层，也是有一番讲究的。&lt;/p&gt;
&lt;p&gt;传统上我们提到分层架构时，都是指横向分层，例如在前后端还未分离的时代大家言必提及的 MVC 架构。在真实的项目中，我们还可以进一步将其分为 entity、dao、biz、action 等细分层级。而在纯粹的前端领域，HTML、CSS 与 JavaScript 也正好构成了结构层、样式层、交互层这三个相互独立的层级，这也使得它非常清晰明了，易于被人们所接受。&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 638px; &quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 56.15763546798029%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAABAABBf/EABQBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAWG6x0yXD//EABkQAQADAQEAAAAAAAAAAAAAAAEAAgMRE//aAAgBAQABBQK+ZQ6TwiDDOvZ//8QAFhEAAwAAAAAAAAAAAAAAAAAAARAR/9oACAEDAQE/AaV//8QAFhEAAwAAAAAAAAAAAAAAAAAAARAR/9oACAECAQE/ARF//8QAHBAAAQMFAAAAAAAAAAAAAAAAAAIxkRAREiEy/9oACAEBAAY/Ar5LkdUna5NjU//EABgQAAMBAQAAAAAAAAAAAAAAAAABERAh/9oACAEBAAE/IbI7G4At4pbx/9oADAMBAAIAAwAAABA77//EABcRAQADAAAAAAAAAAAAAAAAAAEQEZH/2gAIAQMBAT8QSaAdj//EABcRAAMBAAAAAAAAAAAAAAAAAAEQESH/2gAIAQIBAT8QCNX/xAAbEAEBAQACAwAAAAAAAAAAAAABEQAxkWHh8f/aAAgBAQABPxAJSsnxrKdPphweYuTch5yAT24ITf/Z&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;HTML、CSS 与 JavaScript&quot;
        title=&quot;HTML、CSS 与 JavaScript&quot;
        src=&quot;/static/11ff0bf1fcab52693cc0d2f76cdd9b3b/8608d/1.jpg&quot;
        srcset=&quot;/static/11ff0bf1fcab52693cc0d2f76cdd9b3b/efcb5/1.jpg 203w,
/static/11ff0bf1fcab52693cc0d2f76cdd9b3b/02e66/1.jpg 405w,
/static/11ff0bf1fcab52693cc0d2f76cdd9b3b/8608d/1.jpg 638w&quot;
        sizes=&quot;(max-width: 638px) 100vw, 638px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;但随着时代渐渐发展，开发者们发现单纯这样横向分层，对于愈发复杂的业务场景及它们组成的大而全系统，越来越力不从心了。很难再用一套普适的方案去解决各种各样错综复杂的业务问题。因此，与其关注如何从技术功能上将它们分层，不如更加关心如何从业务模块的角度将它们分离开来。&lt;/p&gt;
&lt;p&gt;这方面的典型就是后端的 &lt;a href=&quot;https://www.ibm.com/cloud/learn/soa&quot;&gt;SOA 架构&lt;/a&gt;。我们将业务逻辑抽象为一个个相对独立的服务，服务与服务之间通过暴露接口的方式调用。而在服务内部就可以自行选择实现的方式，只要保持接口不变，无论内部代码怎么划分、怎么重构，对外部调用方都是黑盒。这也体现了高内聚低耦合的原则。更进一步地，我们发展出了&lt;a href=&quot;https://aws.amazon.com/cn/microservices/&quot;&gt;微服务架构&lt;/a&gt;，以更好适应云计算和分布式的发展。在微服务架构中，服务与服务之间通过网络 API 通信，甚至可以让不同的服务采用不同的技术栈来实现。&lt;/p&gt;
&lt;p&gt;业界很喜欢创造很多新的名词来指代每一次微小的技术革新。抛开这些名词中细枝末节的定义区别，将它们简单化来说，其实也可以概括成分层架构。只是不同于传统的横向分层，它做的是纵向分层，将整个应用以不同的业务模块分割，而每个模块内部，视业务的复杂程度可以包含横向的一层或多层，或 whatever，随开发者喜欢。&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 810px; &quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 26.60098522167488%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAABYlAAAWJQFJUiTwAAABH0lEQVQY0yXO30rCUACA8b2NkJQYOXf+bsdz5nHqptMzbaLohQhdOLOrqKuMoKCImqGswgurJwi66eFaBT++60+zhPSDUEgHEgtRBmlaizKR2y/ET6vXl4RQ6LpVjAFCRgpCA2ODkF8aIlhUHK8TyopknHPb5kKYjOXy+eXycb392mUTObpw+qfMj3j7WKg59qJibWrUppreujxoLszw2h3ftY4exOAWdW+AusrYZ/eb7+Ttc8ca0+bMG54Hk4XdObGDOW7MivXIqEca4g1YaphSVdvDstcDzAUlj9j+ns7j9eY5WWWzGWoiWSk7ThkAvWgUAChAqKc0TCkiJL31VdBWqiQ4poRaVrodx/H2/cMUsjcYdcO+rw6rbvOf8+cHlFFfu0hU6n4AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;两种不同的分层方式&quot;
        title=&quot;两种不同的分层方式&quot;
        src=&quot;/static/a57c9a901f0ef146028d779a81e84048/d7542/2.png&quot;
        srcset=&quot;/static/a57c9a901f0ef146028d779a81e84048/2efce/2.png 203w,
/static/a57c9a901f0ef146028d779a81e84048/1d180/2.png 405w,
/static/a57c9a901f0ef146028d779a81e84048/d7542/2.png 810w,
/static/a57c9a901f0ef146028d779a81e84048/d56b5/2.png 1215w,
/static/a57c9a901f0ef146028d779a81e84048/4c7dc/2.png 1599w&quot;
        sizes=&quot;(max-width: 810px) 100vw, 810px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p class=&quot;metadata&quot;&gt;按技术层级横向分层，与按业务类型纵向分层。图源 &lt;a href=&apos;https://kislayverma.com/programming/how-to-organize-your-code&apos;&gt;https://kislayverma.com/programming/how-to-organize-your-code&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;在前端领域也发生着这样的改变。随着前端工程化的逐渐成熟，开发者不再需要操作原始的 HTML、CSS 与 JavaScript，而是将它们视为最终的编译产物。在此之上，前端组件化悄然兴起。我们不再将 HTML、CSS 与 JavaScript 视为三个泾渭分明的层级，而是将整个项目划分为各个大大小小的业务组件，把三者打散到每个组件之中。React All-in-Js 自不必说，即使是沿用了三分离的 Vue 也需要使用单文件组件，把各自的碎片封装在同一个文件里。紧跟后端发展的步伐，对标微服务，就成了现在方兴未艾的&lt;a href=&quot;https://micro-frontends.org/&quot;&gt;微前端架构&lt;/a&gt;。说不定未来就会开始出现“微全栈架构”呢，让我们拭目以待吧。&lt;/p&gt;
&lt;p&gt;其实近年来代码组织结构的变化和开发者观念的转变也是容易理解的。这并不是单纯技术层面的问题，更是人性的问题。代码的分层，按照技术层面横向来分，还是按照业务模块和组件纵向来分，本身只是观察同一个问题的不同角度，并没有对错之分。但是随着项目规模越来越大，业务越来越复杂，没有人能够完全掌握整个项目的所有细节，这就必须考虑如何多人协作。而与人打交道可比与代码打交道麻烦多了。&lt;/p&gt;
&lt;p&gt;如果多人协作时，有人专门负责页面内容，有人专门负责交互，有人专门负责样式，那么一方面每个人都要了解所有需求的业务逻辑，另一方面他们必然会花很多时间在各自的耦合部分上对接&lt;del&gt;撕逼&lt;/del&gt;，这无疑会极大降低开发效率。因此正常情况下我们都是让每个人单独负责一整个独立的业务需求。而项目人员组织结构的变化，最终也将反映在代码结构之上。&lt;/p&gt;
&lt;p&gt;此外，每个人的个性不同，写代码的思路也不同。虽然我们可以用一些代码规范、格式化工具等，使大家写的代码看上去相似，并避免一些公认为不好的写法，但解决问题的思路仍然是不可能做到完全一致的。这也是为什么读别人的代码是最痛苦的。因此我们尽可能地追求代码的高内聚低耦合，这样只要保证对外接口正常，模块内部自己想怎么干就可以怎么干。&lt;/p&gt;
&lt;h2&gt;前端组件化与 class 的没落&lt;/h2&gt;
&lt;p&gt;在前端组件化之后，我们就要重新思考曾经的做法放到现在是否仍然成立。&lt;/p&gt;
&lt;p&gt;这里就不得不提到 HTML 的 class 属性。现在大家提到 class 属性的用途，基本上只是用来配合 CSS 给元素附加上样式。但是 class 设计之初可不是只有这样的用途。这一点从名字上也看的出来，class 意为“类名”，本意只是给元素增加一个（可以重复的）名字。&lt;/p&gt;
&lt;p&gt;在 HTML 诞生之初，支持的标签名还很少，而且整个 HTML 都是一个单文件，内容一多可读性就会变得比较差。这时我们给一些元素增加人类可读的名字，可以有效提升代码的观感。也就是说 class 并不是单纯服务于 CSS 的，这也是从传统来说大家都推荐给 class 起一个有意义名字的原因之一。&lt;/p&gt;
&lt;p&gt;HTML5 为 HTML 定义了更多的语义化标签，用来描述很多网站中共通的部分。它也起到了标准化的作用，更有助于 SEO，但也在一定程度上替代和削弱了 class 的作用。&lt;/p&gt;
&lt;p&gt;而在如今组件化的时期，开发者拥有了将各种原始标签封装成业务组件的能力，而在上层界面拼装时，只需将业务组件进行组合。这等同于我们拥有了创造新标签的能力，可以用标签的名字来表达这个组件的意义。这使得 class 的表意作用进一步被削弱。而配合声明式 UI 的写法，我们也甚少再去利用 class 操作原生 DOM 对象了。&lt;/p&gt;
&lt;p&gt;终于，class 只剩下了用于附加 CSS 样式的功能。&lt;/p&gt;
&lt;p&gt;但是，如果用 class 只是为了附加样式，是不是给人一种脱了裤子放屁的感觉呢？程序员都知道命名是最困难的事情之一。如果只是为了附加样式用那么一次，却需要你想这么多名字，甚至催生出了 &lt;a href=&quot;http://getbem.com/&quot;&gt;BEM&lt;/a&gt; 这种繁琐的解决方案，这一切值得吗？另外，将 HTML 与 CSS 的代码分离开也导致开发和阅读代码时你的注意力需要反复横跳，窗口反复翻页，无形中也破坏了开发思路的连贯性。&lt;/p&gt;
&lt;p&gt;那么，该使用 inline style 吗？相信受过专业训练的大家一下子就会对这个词产生本能的反感，并列举出种种不该这么做的理由。嘛，inline style 的代码给人的观感确实丑、繁琐，毋庸置疑。不过其他理由在今天是否还成立呢？这是一个值得商榷的问题。&lt;/p&gt;
&lt;p&gt;反对 inline style 的一个理由是 inline style 破坏了 CSS 的层次关系，因为行内样式的优先级最高，这使得项目中的其他地方失去了能够覆盖样式的能力，这违背了&lt;em&gt;层叠&lt;/em&gt; 样式表设计的本意。但覆盖样式的能力真的值得使用吗？我想大概很少有人能在不借助参考资料的情况下短时间回忆起各种 CSS 选择器的优先级规则吧。如果想把 CSS 的覆盖样式能力作为 feature 大规模使用在项目中，长此以往只会使逻辑更加混乱和难以维护，最终只能 &lt;code class=&quot;language-text&quot;&gt;!important&lt;/code&gt; 完事。&lt;/p&gt;
&lt;p&gt;可能会有人希望将这一特性用于组件样式自定义的接口。例如，有一个通常情况下是蓝色的按钮，但在特定的场景下，可以通过覆盖该按钮的样式将颜色改为红色。但请注意，这不是一个单纯 CSS 的问题，与其简单地使用 CSS 覆盖，我们更应该做的是去思考在什么业务场景下需要改变按钮的颜色，并给这个按钮组件提供一个属性来区分不同的场景。另外，随着组件样式越来越丰富，往往需要很多 CSS 样式共同呈现出完整的视觉效果，这种时候指望简单覆盖一个 CSS 就可以实现改变颜色的效果是不现实的。&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 810px; &quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 44.827586206896555%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABmUlEQVQoz42QTWsUQRCG95fm4EG8+AcCAYOgOXgxh3hRQYxgDuZgFE0iGA8bBRcEWQQRwa/szM7s7nx390xP92P1ajwp7sAzTb3V9VZVD5xzFGWFURVfM8/6sePqS9h9n/Pw8zVujdfZ/7LDcPiWg6fPeXHymvTdLvmrDeanm5jTZ5g794Tb2PGYQTDM8gLTlHyaedYeeS49hptvFux8uMzmaI27H69weHjC/Qd77B8cEw+3mT+5QHJ0EX20h966gdq6jh2NGHjvOf9656laT2nAWI/uG+pOmvWarrNorWnbDmcNzpS4tsLbDt80v+h7Bm3XYeSStRYngqhIBd71EvvfoaOXXNgmnFZiK7lAF2LRA50VQ6UN0aJmmjcsZPV5lrMoFfOyQWmFNmZJ27YrMQi/OKv5Pqv4MSuJk5wkqYimKZN4SiyNzuYVyrSydrcsCue/WBouKsWsaEhlsqxQFHlNmqbMsoJE9Ezy50b/NdTSOUzwTaY7k9WjaUGalERRzGSaMBEt5M2qEyp5n7zW1Mr8Kfgbq5gFfgLEu6TdrwN8lgAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Element UI 中的 button&quot;
        title=&quot;Element UI 中的 button&quot;
        src=&quot;/static/b1d552b6490269fb49fb5c6209058482/d7542/3.png&quot;
        srcset=&quot;/static/b1d552b6490269fb49fb5c6209058482/2efce/3.png 203w,
/static/b1d552b6490269fb49fb5c6209058482/1d180/3.png 405w,
/static/b1d552b6490269fb49fb5c6209058482/d7542/3.png 810w,
/static/b1d552b6490269fb49fb5c6209058482/77672/3.png 1060w&quot;
        sizes=&quot;(max-width: 810px) 100vw, 810px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p class=&quot;metadata&quot;&gt;Element UI 中的 button 组件就是一个很好的例子。它通过 type 属性区分不同的业务场景，从而表现为不同的颜色，而不是直接暴露一个 class 供调用方覆盖。这一方面明确了业务场景，符合语义化的设计，另一方面也提供了色彩的规范，防止调用方滥用造成的视觉混乱。&lt;/p&gt;
&lt;p&gt;反对 inline style 的另一个理由（也许是最重要的理由）就是使用 class 可以对样式进行复用。在前组件化时代这一点确实非常重要，因为它是复用样式的唯一手段。但组件化出现之后，我们不禁面临一个尴尬的问题：是使用 class 复用样式，还是使用组件封装复用样式呢？不难意识到，当然是通过组件来复用了，毕竟采用组件的形式，什么都可以复用，而 class 只能用于复用样式。组件是完全的上位替代。&lt;/p&gt;
&lt;p&gt;另外，组件化的出现也一定程度导致使用 class 复用样式变得困难。组件化出现之前，无论你的 CSS 再复杂，终究全局共享同一张样式表，只要 class 名字相同，就可以复用样式。但在组件化出现之后，为了避免不同组件间 class 名字的冲突，我们往往会使用 &lt;a href=&quot;https://github.com/css-modules/css-modules&quot;&gt;CSS modules&lt;/a&gt;、&lt;a href=&quot;https://vue-loader.vuejs.org/zh/guide/scoped-css.html&quot;&gt;Scoped CSS&lt;/a&gt; 等方式规避，这反而对不同组件间复用样式造成了阻碍。&lt;/p&gt;
&lt;p&gt;再考虑一个很现实的因素。在实际项目中，不同的需求总是会有定制化的东西，你辛辛苦苦设计了复用体系，一旦产品改个需求，就一朝回到解放前了。这导致我们实际能够复用的样式总归是很局限的。例如我们设计了这样一个可复用的样式，一切看上去都很美好：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;html&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-html line-numbers&quot;&gt;&lt;code class=&quot;language-html&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&apos;&lt;/span&gt;container&lt;span class=&quot;token punctuation&quot;&gt;&apos;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;container1&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;div&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&apos;&lt;/span&gt;container&lt;span class=&quot;token punctuation&quot;&gt;&apos;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;container2&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;div&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&apos;&lt;/span&gt;container&lt;span class=&quot;token punctuation&quot;&gt;&apos;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;container3&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;div&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;style&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token style&quot;&gt;&lt;span class=&quot;token language-css&quot;&gt;
&lt;span class=&quot;token selector&quot;&gt;.container&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;display&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; flex&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;margin&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 10px 0&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;padding&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 10px&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;style&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;但随着产品的不断迭代和调整，慢慢地它变成了这样：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;html&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-html line-numbers&quot;&gt;&lt;code class=&quot;language-html&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&apos;&lt;/span&gt;container1&lt;span class=&quot;token punctuation&quot;&gt;&apos;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;container1&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;div&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&apos;&lt;/span&gt;container2&lt;span class=&quot;token punctuation&quot;&gt;&apos;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;container2&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;div&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&apos;&lt;/span&gt;container3&lt;span class=&quot;token punctuation&quot;&gt;&apos;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;container3&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;div&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;style&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token style&quot;&gt;&lt;span class=&quot;token language-css&quot;&gt;
&lt;span class=&quot;token selector&quot;&gt;.container1&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;display&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; flex&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;margin&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 10px 0&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;padding&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 10px&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token selector&quot;&gt;.container2&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;display&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; flex&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;margin&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 10px 0&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;padding&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 0&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token selector&quot;&gt;.container3&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;display&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; flex&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;margin&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 10px 20px 0 5px&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;padding&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 0 10px&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;style&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;面对这样不能复用，但又不是完全不能复用的代码，你十分难受。痛定思痛之后，你意识到如此粗粒度地复用 CSS 是没有前途的。于是你把样式代码按各自的功能进行更加细粒度地划分，直至可以复用的最小单元，改写成了这种模样：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;html&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-html line-numbers&quot;&gt;&lt;code class=&quot;language-html&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&apos;&lt;/span&gt;container1 flex&lt;span class=&quot;token punctuation&quot;&gt;&apos;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;container1&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;div&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&apos;&lt;/span&gt;container2 flex&lt;span class=&quot;token punctuation&quot;&gt;&apos;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;container2&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;div&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&apos;&lt;/span&gt;container3 flex&lt;span class=&quot;token punctuation&quot;&gt;&apos;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;container3&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;div&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;style&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token style&quot;&gt;&lt;span class=&quot;token language-css&quot;&gt;
&lt;span class=&quot;token selector&quot;&gt;.container1&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;margin&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 10px 0&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;padding&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 10px&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token selector&quot;&gt;.container2&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;margin&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 10px 0&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;padding&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 0&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token selector&quot;&gt;.container3&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;margin&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 10px 20px 0 5px&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;padding&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 0 10px&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token selector&quot;&gt;.flex&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;display&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; flex&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;style&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;那么恭喜你，此时的你已经在发明 Tailwind CSS 了。&lt;/p&gt;
&lt;h2&gt;Tailwind CSS 为我们做了什么&lt;/h2&gt;
&lt;p&gt;CSS 在 Web 发展的初期很好地履行了自己用于样式美化的职责。但随着前端网页逐渐从简单的文档流变得复杂化、应用化，CSS 与 HTML、JavaScript 三分离的特点事实上阻碍了开发效率的提升。在前端工程化和组件化兴起之后，人们对前端软件工程的观念也有所转变和发展。原先我们在学习 CSS 时耳熟能详的各类原则和最佳实践，已经不那么正确且有用了。&lt;del&gt;大人，时代变了。&lt;/del&gt;&lt;/p&gt;
&lt;p&gt;但 Web 长久以来的发展，已经造就了一个无比庞大的互联网生态圈。纵观技术的发展史，一个成功的、活的久远的技术，其成功的秘诀往往并不是技术本身。比技术方案更重要的是先发优势，以及能不能形成足够庞大活跃的生态。因此，即使 Web 技术有着诸多现在看来不甚合理的地方，但这些历史包袱也是无法被轻易抛弃的。我们能做的，只是将不好的一面尽可能封装，使之变得更为好用罢了。&lt;/p&gt;
&lt;p&gt;在这一点上 Tailwind CSS 就做的恰到好处。它不像 Sass/Less，试图发明一个“更好的” CSS，也不像 Flutter for Web，试图让大家忘记 CSS 和其他的一切，重塑整个 Web 生态，也不像 CSS in JS，虽然拥抱了组件化，但依然要让繁琐的 CSS make your hands dirty。它用原子类的封装，为我们温柔地隔离了 CSS 的世界。它敏锐地发现了 class 属性的逐渐变味与没落，并利用它，使得开发者完全不需学习新的语法就能轻易看懂与上手。&lt;/p&gt;
&lt;p&gt;Tailwind CSS 的出现也是历史发展的必然结果。正如我在上一节中举的例子，其实在平时开发过程中我们也已经有意无意间使用了原子类来解决 CSS 细粒度复用的问题。而 Tailwind CSS 将这一切规范化、工程化了。&lt;/p&gt;
&lt;p&gt;当然 Tailwind CSS 还提供了一些其他的能力，例如对项目中各类边距、颜色、单位等的标准化。这也是相当值得称道的点，可以为我们的页面美观程度保持一定的下限。不过这些都没那么重要了，在合适的时间出现解决合适的问题，它必定会是当今这一时代最值得使用的 CSS 框架。&lt;/p&gt;</content:encoded></item><item><title><![CDATA[抛弃 Hexo，拥抱 Gatsby]]></title><description><![CDATA[在去年年底的时候，在外观和功能没有明显变化的情况下，将本博客的技术栈从 Hexo 改为了 Gatsby。没错就是自己重写了一份。随后也为 @Fin 使用 Gatsby 重写了博客。既然是差不多的事情就放一起写了吧。 其实重写博客的想法早已有之，在之前自己写 Hexo…]]></description><link>https://maliut.space/p/from-hexo-to-gatsby/</link><guid isPermaLink="false">https://maliut.space/p/from-hexo-to-gatsby/</guid><pubDate>Sun, 23 May 2021 18:25:00 GMT</pubDate><content:encoded>&lt;p&gt;在去年年底的时候，在外观和功能没有明显变化的情况下，将本博客的技术栈从 &lt;a href=&quot;https://hexo.io/zh-cn/&quot;&gt;Hexo&lt;/a&gt; 改为了 &lt;a href=&quot;https://www.gatsbyjs.com/&quot;&gt;Gatsby&lt;/a&gt;。&lt;del&gt;没错就是自己重写了一份。&lt;/del&gt;随后也为 &lt;a href=&quot;https://finzhang.space/&quot;&gt;@Fin&lt;/a&gt; 使用 Gatsby 重写了博客。既然是差不多的事情就放一起写了吧。&lt;/p&gt;
&lt;!-- more --&gt;
&lt;p&gt;其实重写博客的想法早已有之，在之前&lt;a href=&quot;/p/hexo-theme-simpow&quot;&gt;自己写 Hexo 主题的时候&lt;/a&gt;，我就有感于 Hexo 的弊端。作为一个使用者，你只是正常的写 Markdown 然后发布，用什么都无所谓。但开发 Hexo 主题使用的是各类模板，让人梦回 JSP 时代。一方面编辑器的支持不太好，写代码没那么顺手；另一方面，在前端技术飞速发展的现代，模板式的写法确实显得落了一截，很难享受到很多前端发展的最新成果。这也是为什么之前我列了很多 TODO 项，因为一些复杂的功能开发起来实在麻烦，使我没动力继续下去了。&lt;/p&gt;
&lt;p&gt;之前写主题时，我就设想了许多动态化的功能。我理想中的博客已经不仅仅是一系列 Markdown 文章的集合，而是逐渐向一个应用化的方向发展。去年学会了 React 与 Vue 两大框架，就自然而然地与前端应用产生了联系。&lt;/p&gt;
&lt;p&gt;我设想中的博客网站基于 React 或 Vue 技术栈。将一个单页应用用于博客并不适合，因为会有 SEO 的问题，但作为我的个人空间，我并不在乎它能否被搜索引擎找到&lt;del&gt;，甚至想避世隐居&lt;/del&gt;。除了 Markdown 以外，博客的内容还可能来自其他很多数据源，因此将会有一个数据中间层，将所有数据源转变为 JSON 之类的通用数据格式。而前端页面在使用数据时，就可以像普通网站那样，通过 API 把数据请求回来。&lt;/p&gt;
&lt;p&gt;我甚至都开始设计接口，准备造轮子了。不过在搜索类似的做法时，我找到了 JAMStack 技术栈。它不仅能够完全符合我的需求，而且也解决了 SEO 的问题。它甚至有自己的&lt;a href=&quot;https://jamstack.org/&quot;&gt;官网&lt;/a&gt;。初次看到它的理念，就像遇到了一位老朋友一样，令我兴奋不已。我并不想把这篇文章变成 JAMStack 的介绍帖，因为它的官网已经写的足够好了，无需画蛇添足，感兴趣的朋友可以移步它的官网进一步阅读。&lt;/p&gt;
&lt;p&gt;在 JAMStack 的官网上列举了许多具体实现的框架（当然，Hexo 作为静态网站生成器，也是其中的一员）。结合 React + SSG 的标签，我们很容易将目光放在当今最为流行的框架之一 —— Gatsby 之上。在对比了其他定位类似的框架之后，我发现它不仅拥有上述 JAMStack 提到的所有优点，而且还有一个最大的特点，即 GraphQL 中间层，可以将任何来源的数据源统一转换，在前端代码中利用 GraphQL 做编译期查询。简直与我的想法不谋而合！&lt;/p&gt;
&lt;p&gt;除此之外，Gatsby 还提供了其他人性化的功能。例如内置的 Link 组件，在首次加载页面后即可预加载其他页面，用户跳转时无需刷新整个页面，得到 SPA 的丝滑体验。还有 gatsby-image 插件对图片的处理，为你自动压缩、优化，根据浏览器环境选择合适的图片格式与图片大小进行加载，同时还能拥有渐进式加载的过程。不仅省去了你之前自己处理图片、上传图床的功夫，还大大提升了用户浏览时的体验。&lt;/p&gt;
&lt;p&gt;Gatsby 上手难度并不高，唯一蛋疼的是在国内安装颇费一番功夫。虽然 npm 可以换国内源，但是底层需要一些图片处理的能力，安装过程会直接从 GitHub 原始地址下载，还有 node-gyp 之类的配置等需要安装，要么有个好的梯子，要么需要自己额外处理下。开发过程倒是轻松愉快，借助 React 的庞大生态，可以轻松实现之前做的很蛋疼的功能。在之前的开发记录最后，我留下了一堆 TODO 项，都是因为做起来很麻烦的，这次也都一口气实现了出来。&lt;/p&gt;
&lt;p&gt;顺便，在开发的过程中，也实现了不少副产物。在 Hexo 中有现成的评论插件，不能在 Gatsby 中使用，因此直接重写了一份。另外评论的邮件提醒功能，也调研了阿里云的邮件服务与云函数得以实现。由于它们都有每月一定的免费额度，我们就可以愉快白嫖。&lt;/p&gt;
&lt;p&gt;Gatsby 中也没有现成的文章加密功能，为此也自己造了一个轮子，研究了一下 gatsby-remark 插件的写法，并开源发布在了 npm 。地址在 &lt;a href=&quot;https://github.com/maliut/gatsby-remark-encrypt&quot;&gt;gatsby-remark-encrypt&lt;/a&gt; ，欢迎大家多多 star ←_← 。与 Hexo 版本的加密插件不同，它并不负责 UI 的展示，而只是专注于实现加密功能本身，提供加密后的数据源供 GraphQL 调用。当然，我在文档中也提供了简单的 Code Example 。&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;之后也为 &lt;a href=&quot;https://finzhang.space/&quot;&gt;@Fin&lt;/a&gt; 写了一份博客。虽然用的是同一套技术栈，但由于网页的布局与涉及到的功能都和自己的有不少区别，因此也接触了不少新东西，例如对 Latex 的使用、pdf 嵌入、以及一些 Gatsby 的高级 API 等。碰巧在这期间 Gatsby 也升级到了 v3 版本，主要改进了图片的使用方式，变得更为简单，遂学习之。&lt;/p&gt;
&lt;p&gt;一个有趣的功能是全文搜索。虽然 Gatsby 生态中已经提供了一些现成的搜索插件，但是实际使用后发现它并不能支持中文分词搜索。将搜索插件所生成的索引文件打开来看后，发现所有中文的内容都默认被过滤掉了。所幸在网上找到了一篇介绍 VuePress 使用 FlexSearch 进行繁体中文搜索的文章，配合自己的调试，总算是做出了比较完美的解决方案。有时间的话后续也再深入了解一番，写篇文章。&lt;/p&gt;
&lt;p&gt;另一个值得一提的点是，为了让自己在新的项目中有所收获，我也尝试了一番前段时间老是见人提起的 TailwindCSS 框架。我个人觉得还是值得一用的，而对这种原子 CSS 的用法也有了一些个人感想，在未来也会单独发文。或许某一天我也会用 Gatsby v3 + TailwindCSS 更新我的博客。（又给自己挖坑了（笑&lt;/p&gt;</content:encoded></item><item><title><![CDATA[白嫖大厂！搭建自己的跑团平台]]></title><description><![CDATA[…]]></description><link>https://maliut.space/p/paotuan/</link><guid isPermaLink="false">https://maliut.space/p/paotuan/</guid><pubDate>Fri, 19 Feb 2021 11:30:07 GMT</pubDate><content:encoded>&lt;p&gt;本文介绍了一种搭建跑团平台的新思路，它具有配置简单、完全合法、使用免费等优点，适合朋友间小范围进行跑团活动。并基于此思路，搭建了一个现成的平台，提供骰子、线索面板、日志记录、人物卡等一系列开箱即用的功能。&lt;/p&gt;
&lt;p&gt;本文相对偏重设计理念与实现思路。如果读者想要以使用者的角度了解平台的使用方法，建议参考这个&lt;a href=&quot;https://www.bilibili.com/video/BV15K4y1H7tf&quot;&gt;视频版本&lt;/a&gt;，记得一键三连哦~&lt;/p&gt;
&lt;p&gt;访问 &lt;a href=&quot;https://paotuan.github.io&quot;&gt;paotuan.github.io&lt;/a&gt; 立即开玩，或通过微信扫描下方的二维码访问本平台的小程序版本。如果您对此感兴趣或有任何意见或建议，欢迎加群 115699014 一起交流。&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 258px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/a2c8bc93629165c87bb42c0ba631af5b/53f89/minacode.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAMFBP/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHXk4k2ExWYUB//xAAaEAACAwEBAAAAAAAAAAAAAAABAgADESES/9oACAEBAAEFAneLcCQeXKSiK3pejJmwDB//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AR//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AR//xAAaEAEAAgMBAAAAAAAAAAAAAAABABEQMWEg/9oACAEBAAY/AuSjfcUb3BbA8UT/xAAZEAEAAwEBAAAAAAAAAAAAAAABABEhMVH/2gAIAQEAAT8hEHSpsuy+KdlovGWMwniFPQtWdXYhbSAw8hEFBP/aAAwDAQACAAMAAAAQj9dB/8QAFxEBAQEBAAAAAAAAAAAAAAAAAREAEP/aAAgBAwEBPxBZxwQhv//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8QH//EABwQAQEAAwEAAwAAAAAAAAAAAAERACExQWGBkf/aAAgBAQABPxBPRoT3HZ64UP0ZaSgUuMTMAlMb9GCR8mGwTxb3vxgUYC6amsPbAS4CVVdeac8eSM//2Q==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;跑团 IO 小程序码&quot;
        title=&quot;跑团 IO 小程序码&quot;
        src=&quot;/static/a2c8bc93629165c87bb42c0ba631af5b/53f89/minacode.jpg&quot;
        srcset=&quot;/static/a2c8bc93629165c87bb42c0ba631af5b/efcb5/minacode.jpg 203w,
/static/a2c8bc93629165c87bb42c0ba631af5b/53f89/minacode.jpg 258w&quot;
        sizes=&quot;(max-width: 258px) 100vw, 258px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;!-- more --&gt;
&lt;h2&gt;我们的平台是什么&lt;/h2&gt;
&lt;p&gt;去年春节的时候，为了方便几个朋友一起跑团，就搭了一个平台 &lt;a href=&quot;/p/botim&quot;&gt;BotIM&lt;/a&gt; 。自己用了几次以后朋友给我提了些建议，但当时自己也不怎么懂一些现代前端框架，开发能力有限，再加之跑团本身也是个低频行为，就搁置了下来。而今年正好学了一些新技术，也想到了一个方法能把这个平台 SaaS 化提供给大家使用，于是趁放假的时间爆肝开发了一波，把之前提到的没提到的功能都加上了。前段时间跑了一次&lt;a href=&quot;/p/log-100-percent-angel/&quot;&gt;测试团&lt;/a&gt;，效果还挺好的，所以也想做个介绍推荐给大家。&lt;/p&gt;
&lt;p&gt;和其他的平台不同，严格意义上来说它并不是一个跑团平台，而是通过借助大厂的力量并加之一些跑团功能的二次开发，让任何人都可以无门槛地拥有一个自己的跑团平台。&lt;/p&gt;
&lt;h2&gt;为什么需要搭建自己的跑团平台&lt;/h2&gt;
&lt;p&gt;可能会有人说，现在已经有了很多现成的跑团平台和工具了，为什么还要再自己做一个。它与其它平台的差异点在哪里。&lt;/p&gt;
&lt;p&gt;一般我们进行网团时用的都是 QQ 机器人或者一些比较专业的跑团平台。 QQ 机器人的好处就是基本使用方便，不用去额外的平台&lt;del&gt;谁没有 QQ 呢&lt;/del&gt;，但受限于既有的交互方式，一些额外功能就需要用并不怎么人性化的指令来实现。另外，如果要看人物卡或者是其他资料就只能多个窗口切来切去了。&lt;/p&gt;
&lt;p&gt;另一点是，大概去年初的时候 QQ 封禁过了一片机器人，当时引发了一片哀嚎以及跑团圈子对腾讯的口诛笔伐。但其实完全可以理解，因为 QQ 从来没有给第三方提供过正规的机器人接口，现在的机器人都是通过对 QQ 协议的破解来实现的。你可以批评腾讯没有互联网的开放精神，但他们这么做也有客观的商业、安全、乃至我国国情的特殊因素。而使用破解协议这样的做法，本身就是风险极高的行为&lt;del&gt;开发者要抓狂了&lt;/del&gt;。你可以说我只是拿它来跑团，人畜无害，但其背后蕴含的商业价值使得它必定会被人拿去做坏事。因此这条路是首先要被排除的。&lt;/p&gt;
&lt;p&gt;然后再说说那些比较专业的跑团平台。我在网上也陆陆续续看到过很多功能很完善的跑团平台，大多是玩家自己用爱发电开发出来的。无论从技术上还是执行力上我都很敬佩这些开发者们。但是考虑到网团的特点，跑团本身圈子也比较小，也并不是一个高频的行为。在知乎上也看过一些讨论跑团平台的话题，这样的平台很难将其商业化盈利，养活自己。但用爱发电的话，服务器、带宽的费用，开发人员的时间和精力，都是一个不小的成本。这注定是一个难以持续的行为。因此，对这些平台能持续多久，我在平台上的信息是否安全等等，心里还是不太放心的。&lt;/p&gt;
&lt;p&gt;那么，就没有别的方法了吗？&lt;/p&gt;
&lt;h2&gt;我们的解决方案&lt;/h2&gt;
&lt;p&gt;一个网团平台的核心其实是一个即时通信系统。其他的功能可以慢慢做，但是如果连基础的消息都会延迟或者丢失的话，那是很令人抓狂的。即时通信系统背后的坑很多，无论是从产品、技术方案设计还是服务器资源的角度，都是一个很大的挑战。所幸的是我们并不需要从零开始自己实现这一切，各大厂商都提供了现成的服务，比如腾讯云通信、网易云信、融云 SDK 等。虽然它们都是商业产品，要价不菲，但为了吸引用户，各家都提供了免费的试用版本，这样就可以达到白嫖的目的。&lt;/p&gt;
&lt;p&gt;这里我选用的是腾讯云的 SDK，因为我个人比较熟悉。从官网上可以看到腾讯云 IM 定价每月￥999 起，对个人自用肯定是不现实的。但有可以只支持最多 100 人的体验版，而且这样的体验版没记错的话也能创建 100 个。这对于我们小圈子跑团完全够用了。&lt;/p&gt;
&lt;p&gt;看到这里可能又有人疑惑了，跑团圈子再小，总不至于 100 个人就够用。这你就陷入了思维定势。由于网团的核心是即时通信功能，大家在设想一个跑团平台时，就会容易把它想成一个我们熟悉的社交平台，大家每个人在这个平台上注册一个帐号，一起组局一起玩。甚至我看到一些平台在此基础上更加延伸，加入了主持人与玩家的评价、互相关注等等功能。但是，这些真的是我们需要的功能吗？如果我们需要社交，QQ 和微信不香吗？何况跑团圈素有先做朋友后跑团的说法。在我看来，跑团平台只是一个用完即走的工具，它不负责为你找到跑团伙伴，而只是为你的跑团过程提供尽可能多的方便。&lt;/p&gt;
&lt;p&gt;在明确了跑团平台的定位以后，我们的技术方案也就顺理成章了。并不是我一个人守着一个苦逼的 100 人帐号满足所有人，而是如果你有一群经常一起玩的小伙伴，或者你是个经常带团的主持人，你就可以开通一个体验版。甚至你不嫌麻烦每开个团都开通个体验版也没人拦着你。&lt;/p&gt;
&lt;p&gt;这样做不仅解决了如何白嫖试用版的问题，也同时解决了 Secret 的鉴权问题，一箭双雕。IMSDK 可以通过本地对 AppId 与 Secret 计算进行鉴权，但将 Secret 放在本地有泄露的风险，可以让别有用心之人恶意消耗你的资源。因此这种方式只能用于调试，在生产环境中则需要一个专门的业务服务用于服务端鉴权。但我们采用了多应用的实现方式以后，就无需写死一个特定的 Secret 了，而是由使用者自行输入他们自己申请的体验版信息，交由本地计算鉴权。这样既不用担心泄露风险，又不用为鉴权服务付出额外的成本。退一步说，即使 Secret 发生泄漏，它也只不过是一个体验版而已，完全不会造成什么损失。&lt;/p&gt;
&lt;p&gt;&lt;del&gt;有趣的是腾讯云 SDK 自己也没想到这种骚操作用法，导致实际实现时还遇到了一点小问题，需要对 SDK 稍作修改才能实现&lt;/del&gt;&lt;/p&gt;
&lt;p&gt;解决了后端即时通信的问题，我们还要解决前端界面的问题。好消息是 SDK 也提供了现成的 Demo，我们不用从头写起，而是在它的基础上加以修改就可以了。而代码的部署，我们可以放在 Github Pages 上，这样也不用付出额外的成本。&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 810px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/3e63bb6871439cc4108ca00da95b2462/4352a/1.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 25.615763546798032%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAAsTAAALEwEAmpwYAAABM0lEQVQY0w3Hz0vCUADA8f2vEXTpGgUeEymyQCKFUonwIFaHoSBzjpmGU7RAh+aPOXVON/fmttrc26bv5ff0+RJgYwnifDQWHdcP9tjewj8HBru9A3cqMFYq8AKk6WbvZ8T3BspaP+zGsAzr1/UCol7naJqmKGoiTifijCoWWKY0FkSM8VpZytLUD3Yu9BYLSVrMD3B9ZNq+aQdbb0/cRKOJ5PNtLM6Uy1W2dBJ6ODq7qzAU3NpsSyhzQ0vXDjW7s8b30DbBeweHKXRF4+wXJsKRSDSevo49VVi2VqFPL1+OL+4/PxjoWAVumeNEzZDXqlqsDfLV5saQMy18TqJQHqcbmCBJ8u01l04leZ7v9fu5bCb1mOh0ughhsJInykhxgA/91VKStJnlGlMdt+eoLWEB4H+6kPj0/kkYlAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;腾讯云 SDK 提供的 Demos&quot;
        title=&quot;腾讯云 SDK 提供的 Demos&quot;
        src=&quot;/static/3e63bb6871439cc4108ca00da95b2462/d7542/1.png&quot;
        srcset=&quot;/static/3e63bb6871439cc4108ca00da95b2462/2efce/1.png 203w,
/static/3e63bb6871439cc4108ca00da95b2462/1d180/1.png 405w,
/static/3e63bb6871439cc4108ca00da95b2462/d7542/1.png 810w,
/static/3e63bb6871439cc4108ca00da95b2462/d56b5/1.png 1215w,
/static/3e63bb6871439cc4108ca00da95b2462/4352a/1.png 1364w&quot;
        sizes=&quot;(max-width: 810px) 100vw, 810px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p class=&quot;metadata&quot;&gt;腾讯云 SDK 提供了几乎所有主流平台的 Demo，而且功能十分完善且开源，可以直接拿来使用&lt;/p&gt;
&lt;br&gt;
&lt;p&gt;现在我们已经有了一整个现成的即时通信平台，接下来就是往上堆跑团相关的特色功能了。其实跑团平台的核心功能就是骰子，其他的都是 nice to have 。在一批 QQ 机器人惨遭封禁之后，也有不少人提出可以用支持合法聊天机器人的 IM 软件进行跑团，例如钉钉或是 Telegram 。这类机器人的实现原理是在监听到群消息或其他事件后，向你的业务服务器发送通知，你接收到通知后可以执行自己的逻辑，例如计算出骰子结果，然后再向群里以机器人的名义发消息等等。&lt;/p&gt;
&lt;p&gt;这样固然是最为安全严谨的做法，但也带来了额外的开发复杂度与成本。真的没有更简单的做法吗？在我们自己的平台里，大可不必这么复杂。只要把机器人作为一个特殊的用户加入到平台中就可以了。只需做一个开关让游戏主持人决定它的加入和离开。在最终用户看来，这一切并没有什么不同，但大大减少了我们的实现成本。&lt;/p&gt;
&lt;p&gt;其他的功能，例如笔记、log、人物卡等功能，就是无脑往上堆就完事了。当然最佳实践是把它们储存在后端，以获得漫游功能。但秉承着我们平台的白嫖理念，我们依然选择把逻辑放在前端实现，通过特定格式的消息以借助 IMSDK 进行同步。这样做的缺点是用户必须在线才能接收到这些消息，但本来人齐了才会开始跑团不是吗？问题不大问题不大。&lt;del&gt;其实硬要做离线漫游也是可以做一做的，但是引入的复杂度实在是让人感觉得不偿失。&lt;/del&gt;&lt;/p&gt;
&lt;h2&gt;功能介绍&lt;/h2&gt;
&lt;p&gt;详细的功能介绍建议大家看&lt;a href=&quot;https://www.bilibili.com/video/BV15K4y1H7tf&quot;&gt;视频版本&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;这里就简要列举一下目前支持的功能吧。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;基础功能（来自腾讯云 IMSDK）&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;C2C 会话&lt;/li&gt;
&lt;li&gt;群会话&lt;/li&gt;
&lt;li&gt;建立群（群主自动成为游戏主持人）&lt;/li&gt;
&lt;li&gt;黑名单&lt;/li&gt;
&lt;li&gt;消息 7 天漫游&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;邀请入群&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;可生成分享链接，他人点击后登录平台即可自动入群参加游戏&lt;/li&gt;
&lt;li&gt;可生成分享二维码，可通过小程序登录并自动入群&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;骰子指令&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;支持各类常用的骰子指令（基于开源库 &lt;a href=&quot;https://github.com/GreenImp/rpg-dice-roller&quot;&gt;rpg-dice-roller&lt;/a&gt;）&lt;/li&gt;
&lt;li&gt;支持在指令后接上属性或技能的名字、难度等级，若导入了人物卡，则会自动判断成功与否&lt;/li&gt;
&lt;li&gt;支持在聊天记录中点击属性或技能的名字，快速投骰&lt;/li&gt;
&lt;li&gt;支持在人物卡中直接点击属性或技能的数值投骰&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;设置 bgm&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;支持主持人将网易云音乐链接分享给大家，会生成嵌入式播放器发送给所有玩家&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;笔记功能&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;支持主持人发布重要笔记，笔记除了显示在聊天记录中，也会固定在右侧面板，方便随时查阅&lt;/li&gt;
&lt;li&gt;玩家可对笔记进行复制、拖动排序与删除等操作&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;log 功能&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;支持玩家对游戏 log 进行复制。log 会保存在本地缓存，不受 7 天漫游限制，除非手动清除&lt;/li&gt;
&lt;li&gt;log 可以进行拖动排序与删除，以应对网团过程中聊天记录较为混乱的场景&lt;/li&gt;
&lt;li&gt;log 可以导出为纯文字、HTML、JSON 等多种格式，满足各种场景的需要&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;人物卡功能&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;主持人可以为玩家导入 excel 格式的人物卡（目前只支持 CoC 规则），导入后所有人可见&lt;/li&gt;
&lt;li&gt;人物卡显示当前玩家的基本信息、属性与技能的数值以及 1/2、1/5 速查表&lt;/li&gt;
&lt;li&gt;属性与技能可按照数值高低进行排序；可根据名字或首字母进行快速搜索&lt;/li&gt;
&lt;li&gt;点击属性或技能数值，可以根据当前对应的技能与难度进行进行快速投骰&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;最后特别鸣谢 &lt;a href=&quot;https://finzhang.space/&quot;&gt;@Fin&lt;/a&gt; 的大量点子与测试。大家若有任何意见建议欢迎通过留言、issue、加群等方式反馈。&lt;/p&gt;</content:encoded></item><item><title><![CDATA[跑团实况 - 天使百分百]]></title><description><![CDATA[【防剧透预警】如果你未来有兴趣跑这个团，请不要再往下看了。 去年的原创模组今年终于有机会跑了，同时也是新跑团平台的第一次试用。在全新的平台上跑全新的团，令人高兴的是整体的效果还不错，有一种努力得到了回报的感觉，很开心。 角色： 马尔克（玩家：zh）： 2…]]></description><link>https://maliut.space/p/log-100-percent-angel/</link><guid isPermaLink="false">https://maliut.space/p/log-100-percent-angel/</guid><pubDate>Sun, 14 Feb 2021 15:07:00 GMT</pubDate><content:encoded>&lt;p&gt;【防剧透预警】如果你未来有兴趣跑这个团，请不要再往下看了。&lt;/p&gt;
&lt;!-- more --&gt;
&lt;p&gt;去年的原创模组今年终于有机会跑了，同时也是新跑团平台的第一次试用。在全新的平台上跑全新的团，令人高兴的是整体的效果还不错，有一种努力得到了回报的感觉，很开心。&lt;/p&gt;
&lt;p&gt;角色：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;马尔克（玩家：zh）：&lt;/p&gt;
&lt;p&gt;22 岁，温和礼貌的英国大学生。高中时曾在效实中学交换学习一段时间。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;铃木翼（玩家：boss）：&lt;/p&gt;
&lt;p&gt;35 岁，日本法官，在旅游的路上与马尔克偶遇。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 18:44&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;2012年，效实中学即将迎来百年校庆。在校庆之际，效实园里却流传起了一个神秘的言论——「只要考到100分，你就能见到天使」。为了揭开这个传言背后的真相，调查员们决定来到效实中学开始调查。&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;马尔克在高中时期，曾经在效实中学交换学习了一个学期。值此百年校庆之际，他受到当时在效实里结识到的朋友的邀请，决定故地重游拜访母校。&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;在从伦敦飞回去的飞机上，他认识了一名来自日本的法官铃木翼，巧的是他正好要去宁波旅游，但还有几天空闲时间不知该如何打发&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 18:48&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;[理论上只是交换算不上母校吧】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 18:48&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;（我真闲））&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 18:49&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;得知铃木翼对各种怪谈颇感兴趣，马尔克便故弄玄虚到“我听我的朋友说，在效实中学里曾经流传着一个传言，「只要考到100分，你就能见到天使」。”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;（半个母校（笑），马尔克在中国的母校）&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;果然这成功勾起了铃木翼的兴趣，于是他们约定一起去效实中学实地探访一番。&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 18:50&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【全世界飞还找事干的boss】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 18:52&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;这是一个普通的工作日，两个人一起来到了效实中学门口。上午9点，对社畜来说正是上班高峰，但对高中学生来说，上午的第一堂课都快上完了。此时的校门口门可罗雀，只有门卫坐在门卫室里，百无聊赖地打量着外面。&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【你们可以行动了】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 18:53&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【震惊，第一步竟然是要想办法先进学校】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 18:53&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;你好&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;你会说中文吗&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 18:53&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【不对啊，按理说我们已经认识了，为什么boss你这是初次见面的说法】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 18:54&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;（因为）日本人））&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 18:54&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“托交换的福，我还是会一点中文的，虽然并不算好，但日常交流应该没问题”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“我去和门卫说说看”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“看看能不能让我们进去”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;走向门卫室，让门卫注意到我&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 18:56&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;看到有人靠近，门卫走出门：“你好，请问有什么事吗”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 18:56&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“你好，我是效实中学过去的学生，今天是回来看老师的，请问现在允许访客进入学校吗？”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【不允许，全团终】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 18:57&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“哦哦，是来看老师的啊，欢迎欢迎。不过我们现在管理比较严格，怕有闲杂人等混进去，能告诉我你要找哪位老师吗？”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 18:58&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“教化学的郭洪涛老师。”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 18:59&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“好的好的”门卫麻利地开了一张访客单，“你登记一下，然后把访客单让老师签个字，出来的时候记得交还给我。”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 18:59&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;你好&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;我算是他的监护人&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;我能进去吗&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:00&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【？？】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:00&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;我是他父亲的朋友&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:00&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“对，这是我表叔，这回陪我一起来的”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:00&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;？&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:00&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【？】&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【按boss为准！】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:00&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;（国籍不同）&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;（表叔过分了）&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:01&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;门卫露出了疑惑的神情，毕竟要说一个东方人是一个英国人的表叔，实在是非常少见。&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:01&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;拜把子的&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:01&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【跨国婚姻，跨国婚姻】&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“所以可以让他进去吗”’&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:03&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“你好，你不是我们学校的学生或校友，那按照规定，请你出示一下身份证我们做个登记。”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:04&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;外国人哪来的身份证啊&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;这是我的护照&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:05&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“居然是日本人，我都没看出来。”门卫小声咕哝着，“今天真是巧，平时都没见到外国人，今天这一大早就遇到两个。”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;然后他登记完转过身来“好的，你们请进吧。”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:06&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“确实蛮少见的”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“谢谢您了”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:06&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;两个人顺利进入了校园内，真巧第一节课下课了，路上三三两两有学生走过。&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;你们准备如何行动呢&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:07&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;要干什么呢maruko san&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:07&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“我想想，我可以先去找一下那位邀请我回来看的同学”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【他是谁啊，有信息吗】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:07&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;（你们可以自由提出行动，也可以按照地图行动，我先放一张地图）&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【呃，没想这么细节】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:08&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;那好&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:08&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【你可以现编】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:08&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;去教学楼找人吧&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;是姓柳是吧&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;我们日本也有这个姓&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:09&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【这为啥是我编啊！而且邀请我回来的同学应该是当年我的同学，现在也应该毕业了】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:09&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【不过照理说你当时认识的人应该已经毕业了】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:09&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【对啊】&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【就设定成赛亚人吧！】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:09&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【可以】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:09&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【那么问题来了，赛亚人原名是啥我已经忘记了！】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:09&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【徐珑迪】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:10&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“恩，他之前说到他现在回到效实当化学老师了”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“我们先去教学楼找个学生问下化学办公室在哪儿”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;尝试在路上随便逮一个学生问路&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:11&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;你不是在这里念过书吗&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:12&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;两人尝试在路上随便找一个学生问路，不过也许是因为在校园里同时出现一个中年人和一个外国人的组合太少见了，学生们纷纷用警惕又好奇的眼神打量着你们。&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:12&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【忘得差不多了，毕竟是交换】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:12&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;（要问路的话可以过个信用评级或者任何语言类技能）&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:13&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【而且三四年换办公室位置也蛮常见的吧，才没几年整个白杨路校区都要没了】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-bot_2VUZCE7GL&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;bot&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:14&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;铃木翼 🎲 信用评级 d100: [36] = 36 ≤ 50 成功&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:14&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“铃木先生，要不您去找个学生问问？我这人嘴笨，还是个西洋人。怕是学生都不信任我”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:14&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;那我找那个穿着痛T恤的男的吧&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;一看就是个宅男&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:15&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“很有道理！”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:16&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;铃木翼自然地对着一个穿着痛T的男同学搭话，也许是看到铃木翼文质彬彬，温文尔雅，又或许是察觉到了死宅同类的气息，他并没有迟疑就与铃木翼交谈了起来。&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“你好，有什么可以帮助你的吗？”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:16&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;你好化学办公室在哪里&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:17&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“化学办公室啊，你从教学楼的大门进去，一楼往左手边的走廊一路走到底就是了。”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:18&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【那不是女厕所吗！】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:18&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;感谢那天有机会一定送几本书籍给你&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;（改建了）&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:18&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【2333】&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“老板大气，还有别的什么要问的吗，没事的话我就上课去了”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:19&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;暂时没有了感谢&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:20&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“那我们过去吧，希望徐珑迪现在在办公室”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;前往化学组&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:22&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;好&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:22&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;照着这位同学的话所说，两人走进了教学楼的大门。效实中学的教学楼的布局是与别处不同的，进门是一块挑高的大厅，要先上半层楼高的台阶。左侧的墙上挂着效实中学名师们的照片，右边的大屏幕上则循环滚动着一些校园内的新闻。&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;（你们可以侦查一下）&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-bot_2VUZCE7GL&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;bot&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:22&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;马尔克 🎲 侦查 d%: [98] = 98 &lt;/div&gt;&lt;div class=&apos;content&apos;&gt;铃木翼 🎲 侦查 d%: [47] = 47 &lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:23&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【关键词识别好像不会自动判定】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-bot_2VUZCE7GL&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;bot&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:23&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;铃木翼 🎲 侦察 d%: [83] = 83 ≤ 85 成功&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:23&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【我反正没过】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:23&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;（诶，为啥没判定）&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:23&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;错别字吗&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:23&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【侦查vs侦察】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:24&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;[流汗]&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:24&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【boss过了】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:25&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;也许是这里的场景几年来都没什么变化，马尔克对此熟视无睹，但第一次来访的铃木翼却像个好奇宝宝一样左顾右盼起来。&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:26&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【都35岁了！】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:27&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;就像是在练习中文，铃木翼对着墙上的滚动式大屏幕上的字念了起来。“效实之星名单：xxx，xxx；绿卡名单：xxx，xxx；语文竞赛获奖名单：xxx,xxx”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;马尔克被铃木翼的话语所吸引，也不由自主抬头向大屏幕看去。&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;（两个人过一个灵感）&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-bot_2VUZCE7GL&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;bot&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:27&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;马尔克 🎲 灵感 d%: [5] = 5 &lt;/div&gt;&lt;div class=&apos;content&apos;&gt;铃木翼 🎲 灵感 d%: [98] = 98 &lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:28&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【看来和错别字没关系】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:28&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【holy shit】&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;（哦这个我知道了）&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:28&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;技能没这个&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:28&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;（灵感对应的是智力）&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;（人物卡里读的是智力，没灵感，这个要特殊处理一下）&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;显然还是马尔克对中文的掌握更胜一筹，看到大屏上的信息，他发觉到几乎所有的获奖名单里面，都有【小晴】这一个名字。看来这位同学一定是一个风云人物吧。&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:31&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【神tm小晴，我尴尬的记忆要苏醒了！】&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“这小晴看来不一般啊，把能拿的奖都拿了”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:32&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;哈鲁酱啊&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:32&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“看来什么时候都有天才，真让人羡慕”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:33&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;也是&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:33&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“铃木先生你想说什么？”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:33&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;我在想自己从来没获奖过的学生生涯&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:34&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“对比您现在的成就，看来学生时代的奖项确实算不上什么了！”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“我们去化学办公室吧”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;走向化学组&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:34&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;哟西&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:35&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【真 · 家 乡 话】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:35&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;顺着走廊一路往前走，两个人来到了——女厕所。不过明显化学办公室不可能在女厕所里，两人拐了个弯以后顺利来到了化学办公室。&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;（两个人过幸运）&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-bot_2VUZCE7GL&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;bot&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:36&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;马尔克 🎲 幸运 d%: [95] = 95 &gt; 25 失败&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;铃木翼 🎲 幸运 d%: [98] = 98 &gt; 45 失败&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:36&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【讲道理，凭什么不能在女厕所里，这是对女性的歧视！】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:37&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;非常不幸的是，可能是化学组开会去了，或是都上课去了，总之现在的化学组办公室空无一人。&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:37&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;既然没有人&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;你带我参观参观吧&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:37&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;不过似乎门没有锁，两个人在办公室里四顾茫然。&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;（你们准备怎么做）&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:38&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;进去不太好&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;我们去图书馆看一看吧&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;正好我也识得几个汉字&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:39&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“虽然我很想做一次地主之谊，但过了好几年我怕是对这学校的熟悉程度还不如您呢”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“铃木先生有什么想看的书吗”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:40&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;你介绍一下你喜欢的吧&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:40&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“我想如果我们想调查这个天使的传说，最好还是找一个知情人大概了解一下情况”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“这样漫无目的地走我担心一会被保安请出去！”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:41&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;既然是传说&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;我还是想看看有什么文字记载的蛛丝马迹&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:41&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“这也是个思路”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“我想想”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“我正好比较擅长在图书馆找东西，不如兵分两路？铃木先生你试着去找下知情人，然后我去图书馆看看文字记录”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【boss这么高的话术】&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【不找npc吹逼浪费了】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:43&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;可以&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;你有什么推荐的人吗&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;比如工作了很久的好说话的&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:44&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“我当年读书时倒是知道几位比较好说话的，就是不知道他们还在不在原来的岗位上”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“比如教物理的袁老师和教语文的叶老师”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“不过如果是传说的话，在学生里可能流传更广？”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“毕竟老师可能对这种事情都不会当真吧”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“这是我的想法，铃木先生可以自己决定去找谁，老师或者学生”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:47&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;那我去体育馆试一试吧&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:47&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“可惜徐珑迪不在，否则他应该是一个理想的咨询对象”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“行，那一会见”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;马尔克前往图书馆&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:47&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;（那马尔克先行动）&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;虽然对学校的布局已经有些淡忘了，但身体的本能反应不会骗人，想着要去图书馆，马尔克的脚步自然而然地带领着他前进。没几步路便来到了图书馆。由于是上课时间，图书馆里的人很少。看到一个外国人，前台稍稍惊讶了一下，但也没有做出什么阻拦。想必他很信任外面的门卫，只要能进到学校里，就不会是坏人。&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;（可以行动了）&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:50&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【我怀疑你在抄我的文章！】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:51&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;（真的吗，抄的哪一段）&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:51&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【在学校里的都不是坏人.jpg】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:51&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;（没印象了o(╥﹏╥)o我手打的）&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:51&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【那我们是英雄所见略同】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:51&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;（666&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:53&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;马尔克走到校史校历分类的书架前，浏览起书籍，尝试找到和天使相关的记载&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:53&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;（过图书馆）&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-bot_2VUZCE7GL&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;bot&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:53&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;马尔克 🎲 图书馆 d%: [17] = 17 ≤ 67 成功&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:53&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【不愧是我！】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:56&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;校史校历分类的书架里有着不少老书籍，大多数的学生都对此不感兴趣，书上也因此蒙了薄薄一层灰。马尔克仔细地在其中翻找起有关于天使的记载，但翻了整整好几排都没有什么收获。&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;正当马尔克感到气馁的时候，从他手上的书里掉出来一张纸条。&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:57&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【结束了吗，感觉需要一个休止符】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:58&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;马尔克定睛一看，这本书名叫《效实学生》，它的封皮已经泛黄破旧，一看就相当古老了，可里面的纸条很新，就好像是最近才放进去一样。&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;（我发个图片）&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:58&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【艹，我就知道】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:58&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;（要读书吗）&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:58&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【真就改编】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:58&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;（233333）&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:59&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;我先侦查这张字条&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:59&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;（请）&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;roll&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-bot_2VUZCE7GL&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;bot&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:59&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;马尔克 🎲 侦察 d%: [58] = 58 &gt; 55 失败&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 19:59&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;{？？}&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 20:00&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;马尔克对着纸条看了看，这就是一张普通的纸条，没什么特殊的。纸条上的文字也十分清晰可辨。&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 20:01&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“好吧，虽然我很奇怪这两种截然不同的字体，是某种行为艺术吗”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;我读书&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 20:02&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;马尔克阅读了这本书，这本书中介绍了一些当时效实中学知名校友的资料，其中最大篇幅介绍的也是连如今都大名鼎鼎的童第周校友。&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 20:03&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“虽然这位生物学家确实很厉害，但感觉这不是我现在需要的信息”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;看看周围有没有人，没有我就把字条拿走&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 20:04&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;由于是上课时间，图书馆里本来人就寥寥，更不用说是大多数时候都无人问津的校史部分书架。马尔克看了看四周，确定没有人以后，把字条放进了自己的兜里。&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 20:05&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“不如看看别的书架，说不定会有额外收获”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【】我能对整个图书馆用图书馆吗】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 20:06&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【可以】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-bot_2VUZCE7GL&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;bot&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 20:06&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;马尔克 🎲 图书馆 d%: [58] = 58 ≤ 67 成功&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 20:08&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;眼看时间还早，马尔克信步走到了图书馆的其他区域搜索起来。图书馆里的大多数书籍都是正经的学术资料，并没有什么和天使有关的内容。倒是在一些角落里的娱乐杂志里，找了一些名字里带着“天使”的旅游景点，还有一些带着“天使”的 galgame 之类的。不过很明显和效实中学都没什么关系。&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 20:09&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【什么！当年图书馆里有gal的杂志吗！】&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“看来图书馆是没什么别的收获了，希望铃木先生那边能找到知情人吧”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 20:09&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;（我也不知道诶嘿嘿）&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 20:09&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;走向图书馆&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【boss交给你了】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 20:10&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;（那场景切换到boss）&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 20:10&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;*走向体育馆&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 20:11&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;虽然不怎么认得效实的路，但是体育馆的建筑实在太有特点了，而且从教学楼的后门出去以后一眼就能看到，因此铃木翼毫不犹豫地向体育馆走去。&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;有一个班的学生正在上体育课，似乎是到了自由活动的时间，一群学生在里面打篮球，充满了青春活力的气息。&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【boss请】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 20:12&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;上去和休息的搭话&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;打得不错啊&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 20:14&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;铃木翼对着一个正从场上换下来的学生搭话。也许是激烈的运动能降低人的防备心理，这名学生对突然出来的外人并没有丝毫客套，径直攀谈了起来。&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 20:15&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【这河狸妈】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 20:15&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“还行吧，好久没打了，累死了，休息一会”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【合理吧，大老师就是用长跑的时候套叶山的话】&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【boss继续】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 20:17&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;我也是刚来&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;你们这里谁打得最好啊&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 20:18&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“看，就是那个”，学生随手指向场地中央“又高又壮，大家都顶不住，投篮还准。我们都叫他boss”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 20:19&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;很有我当年的风范啊&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 20:19&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【这很河狸】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 20:19&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;对了你们学校最近有什么有趣的事情吗&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 20:21&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“有趣的事情吗？我们百年校庆快到了，我们这一届刚好赶上，真是幸运啊。到时候有很多活动，大家都很期待。”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 20:21&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;哦&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;有什么有趣的活动吗&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;这种祭奠我当年也经常举行呢&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 20:22&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【祭……奠】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 20:23&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;（问题不大&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 20:23&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“emm，我想想，现在确定的应该有校友签到活动、校庆的话剧、演出、晚会、各种各样都有啦”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“说起来看你也不是学生，你是校友吗？那一天欢迎来参观呀”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 20:24&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;一定一定&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;那除了这个呢&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;有什么传说这类的吗&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;你看动画里常有的那种&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 20:26&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“传说？我不看动画的，你说的具体是哪种呀”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 20:26&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;你看&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;比如那种半夜音乐教室传出的钢琴声啊&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;树下告白就能成功啊&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 20:29&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【有那味了】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 20:29&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“哈哈哈哈哈，您可真会说笑，我们可都是学过高中政治的唯物主义者，怎么会相信这种无厘头的事情？”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 20:30&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;我听说你们有一档走进科学的节目&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;有这种的吗&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 20:31&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“顶多就是半夜发现厕所的灯突然亮了，结果发现是灯的声控坏掉了这种事情吧。你看，最后不还是可以用科学解释的。”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 20:32&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;也是&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;天使什么的你们也不信的&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 20:34&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“天使？”看来这个词对于这个年龄的男生很少听到，他歪了歪头，随后就当你在自言自语，没有继续接你的话。&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 20:35&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;回去和晗神会和&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 20:36&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;看来并没有问到什么有趣的东西，铃木翼起身返回，正好在体育馆的门口遇到了从图书馆出来的马尔克。&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【你们继续】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 20:36&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“我找了一圈图书馆，但没发现什么和天使传说有关的东西”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 20:37&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;那有什么特别的东西吗&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;我看看‘&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 20:37&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“虽然在校史区一本旧书里找到一张奇怪的字条，但好像和那个传说也没关系”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;拿出字条给铃木翼看&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 20:38&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;（过啥&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 20:38&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【这个不用过啊，纸条就如图所示】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 20:38&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【你可以侦查看看有没有进一步信息】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 20:39&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;（艹卡关了&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 20:40&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“我倒是有个想法”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 20:40&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;（23333）&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 20:40&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“这个传说不是说考试考一百分就能见到天使吗”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 20:40&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;找那个小晴&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 20:40&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“那位总是考第一名的小晴同学想必一定考过很多一百分”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“确实如此”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“那么我们得找到她先”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【刚刚的大屏幕上我们看到她的班级了吗】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 20:41&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【看到了，就当是高二（1）班】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 20:42&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;去吧&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 20:42&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;出发，但去的路上先去看一眼化学组来人了没&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 20:42&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;可以&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 20:43&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;两个人原路返回教学楼，又来到了化学组办公室。幸运的是这次老师们都在场。&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 20:44&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“你好，请问徐珑迪徐老师在吗”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 20:44&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“诶，这不是马尔克吗？”徐珑迪老师和郭洪涛老师都看到了马尔克，一脸惊喜。“真是难得啊，你居然漂洋过海过来了。”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 20:45&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【都看到了还行，我的见到老师就尴尬症要犯了】、&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“啊郭老师你也在，对的，这不正好校庆，徐珑迪就邀请我回来看看”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“最近工作顺利吗”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 20:47&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“哈哈哈哈，你们关系还是这么好啊，挺好挺好。”郭老师憨憨笑着。“最近还不错啦，这帮学生还挺给力的”，他说着指了指桌子上放着的试卷，“这次考得比二班好了不少”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 20:48&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【袁姐姐震怒】&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“哦对了，这是我父亲的朋友，铃木翼，是这回陪我一起来的。”介绍同行人&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 20:51&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“你好你好，欢迎来参观百年名校效实中学。我是郭洪涛，化学老师，当年也教过马尔克一段时间。”郭老师客套着和铃木翼握了握手。&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 20:52&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;你好&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 20:53&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“对了郭老师，我们在门卫登记的时候是说来找 ，这个证明还需要麻烦您签字一下”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;把证明拿给熊猫（？）&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;然后趁这个机会尝试用眼神示意徐珑迪出去说话&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 20:54&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“好的好的”郭老师爽快地签了字。&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【我去，这个眼神示意要过什么】&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【遇事不决过个幸运吧。因为你和徐珑迪以前关系好，给个奖励骰】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-bot_2VUZCE7GL&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;bot&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 20:55&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;铃木翼 🎲 幸运 d%: [5] = 5 ≤ 45 成功&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;马尔克 🎲 幸运 d%: [66] = 66 &gt; 25 失败&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 20:56&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【奖励骰怎么骰啊】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-bot_2VUZCE7GL&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;bot&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 20:56&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;KP 🎲  2d%kl1: [47, 81d] = 47 &lt;/div&gt;&lt;div class=&apos;content&apos;&gt;马尔克 🎲  2d%kl1: [93d, 53] = 53 &lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 20:57&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;（我去，你幸运只有25）&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-bot_2VUZCE7GL&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;bot&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 20:57&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;马尔克 🎲 幸运 2d%kl1: [96d, 54] = 54 &gt; 25 失败&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 20:58&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【我输了】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 20:58&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;徐珑迪老师似乎在专注忙着别的事，没有注意到马尔克的眼神示意。&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 20:59&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“对了，徐珑迪你一会有课吗，能不能带我们逛逛学校，说实话好久没来，都快不认识了！”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“郭老师您先忙吧。”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:00&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“好啊，正好上午一节课上完了，那我们就去逛一逛吧”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“是啊，好久没见了，正好叙叙旧”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:00&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;走到走廊上&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“可把你小子拽出来了，最近过得如何”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:03&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“哈哈哈哈，最近沉迷工作。刚毕业出来就回效实做了老师，感觉有时候还会产生一种自己还是学生的错觉，倒是和学生的关系也都不错。不过还是得多提醒自己已经是老师了，要注意点形象。”难得见到老同学，徐珑迪老师兴致高昂，滔滔不绝了起来。&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:04&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“我觉得你可以的，毕竟熊猫对你可是青睐有加”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“说实话，这回我回来还为的是另外一件事”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“我听说我们学校最近流传一个奇怪的传说，说是考试考一百分就会见到天使”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“这传说蛮奇怪的，不像是高中水平的传说”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“所以我和这位铃木翼先生就想着来调查一下这件事”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“关于这个传说你有了解吗”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“既然你心态这么学生，我相信如果有这么个传说你一定对此有所耳闻（狗头）”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:07&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“哈哈哈哈，我以为是什么严肃的事情呢，这不就是我们还在念书的时候那一届传起来的吗？不过应该也没怎么传给后面几届的学生吧？反正现在那群学生我是没听他们有在聊这个。”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“没想到你小子回去念大学，还念起了玄学了，这个转行有点厉害啊！”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:09&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“可拉倒吧，在下读的可是根正苗红的物理，我来这就是为了破除这种传说的迷信！”马尔克做出义正辞严状&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:09&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“嘿嘿”他似乎想到了什么，坏笑着说，“正好我手上有这次考试多余的试卷，要不你就当场做一做，看看有没有天使，不就知道了吗？”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:10&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“算了算了，我觉得这种传说肯定限定是在读学生”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“而且我化学老早全还给熊猫了”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“但是你不觉得这传说不合理吗？传说要流行起来，一定要有不可证伪性或者暧昧性”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“考到一百分就能见到天使的可重复性太高了，只要有人考了一百分问问他见到天使不就行了么”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“难道效实中学后继无人，这么多年都没人考到一百分吗！”做出痛心疾首的滑稽样子&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“铃木翼先生，你觉得是不是这么一个逻辑”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;马尔克转向一旁的同行者寻求建议&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:19&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;也是&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;真的没有吗&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:20&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“至少我是没听说过”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:20&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;真正的科学&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;应当是大胆假设&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;小心求证&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;而不应该是觉得怎样就怎样&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:20&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“这就是为什么我们在这了”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:21&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;那么那个小晴同学能引荐一下吗&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:21&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“我个人是觉得这就是当初有个人无聊乱编的”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“小晴同学这么有名吗，连你们都知道？”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:22&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;不有名我能知道吗&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;刚和这里的学生聊了一会&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;大家都觉得很强&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:22&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“门口大屏幕也有，啥榜她都是第一名”马尔克补充道&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:22&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“我正想说呢，你们说找个考了100分的人问一下，就郭老师班上的学霸小晴，你们实在好奇是可以去问一下”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:22&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;我们两个外国人直接去不大好吧&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;得你们引荐&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;找个由头&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:22&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;你帮我们引荐下吧&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;我们直接过去怕是马上被保安请出去了&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:23&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“那我们一起去一班教室看看”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:23&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;不是保安的问题&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;先对个口径吧&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;什么理由找&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;既然很多人不清楚这个事&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;还是不要太引人注目好&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:24&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“很有道理”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“就说某杂志要写效实中学的校庆新闻，想要采访一下在校优秀学生？”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“这个理由如何”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:25&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;不好&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;日后没有杂志就暴露了&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;就凭你校友身份找来了解一下学校为由吧&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:27&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“那没有找一个学生的道理吧”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:27&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;以为他优秀&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;因为&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;所以可以来接见国际友人&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:28&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“啊这”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:25&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“小晴同学不仅是大学霸，还是学校文学社的社长，现在应该在准备校庆特刊的制作”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“不如就以帮助她做校庆特刊取材的名义，让她来给你们做往届学长前辈的采访如何？”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:28&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;你们这样讲最好&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;就定个时间吧&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:28&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“这也可以”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“今天放学之后？”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:29&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;（怎么感觉在密谋拐卖女高中生）&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:29&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【本来就很不对劲】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:29&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;徐老师，你有空吗&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;到时候希望你在场&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;这样对方不至于过于提防&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:29&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“现在就去看看吧，反正她拿了绿卡，不上课也无所谓”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;徐珑迪老师仿佛回到了学生时代，露出了恶作剧般的笑容&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“我接下来应该都没课的，走吧走吧”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:31&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;不应该是把人叫来吗&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:33&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“这样可能会让她紧张”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【冲！】&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;前往高二一班&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:32&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;一行人上了二楼，来到了高二一班的教室。徐老师在教室门口张望了一番，然后抓了个学生问了问。你们与他相隔几步，隐隐约约能够听到他们的对话。&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;（两个人过聆听）&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-bot_2VUZCE7GL&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;bot&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:33&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;马尔克 🎲 聆听 d%: [64] = 64 &gt; 50 失败&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;铃木翼 🎲 聆听 d%: [73] = 73 &gt; 71 失败&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:35&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;？&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;太小声了&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;听不见&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:35&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【老倒霉蛋了】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:35&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;可惜，学生们的嬉戏打闹声盖过了他们的交谈声，两人并不能分辨出他们说了些什么。一会儿，徐老师走向你们“小晴不在，不过我问了她们同学，她应该是去做校庆特刊的取材了，刚刚好像是往中山厅的方向去了。”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:36&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;那顺便去看看这个中山厅吧&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;说来中山还是孙先生在日本的名字呢&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:36&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“看来也没别的事可做，过去看看吧”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“没想到铃木先生对此这么了解”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“我都不知道呢，白在中国念了半个高中了”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:37&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“铃木先生真是知识渊博”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:38&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;毕竟我不像一般日本人&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;我对政治还是有点兴趣的&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:38&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;在徐老师的带路下，一行人往中山厅的方向走去。中山厅的大门紧闭，从门里传来的声音推测，里面应该是在进行戏剧的排练。&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;（两个人过聆听）&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-bot_2VUZCE7GL&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;bot&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:39&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;铃木翼 🎲 聆听 d%: [73] = 73 &gt; 71 失败&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;马尔克 🎲 聆听 d%: [92] = 92 &gt; 50 失败&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:39&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;我怀疑你的代码&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:39&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【两个聋子】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:39&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;关键一样什么情况&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:39&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;（总有概率的嘛）&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:39&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【但是我知道里面一定会说，王老师你可要注意自己的言行啊】&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【都这个时候了还敢和黑五类接触】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:39&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;（艹）&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;（你现实作弊）&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:40&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【但是这这信息也没啥意义啊】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:40&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;这不是玩梗嘛&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:40&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“看起来中山厅在使用中，我们可以进去吗”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:41&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“进去吧，没事，不打扰到他们就行”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:41&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;推门进去&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:42&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;马尔克准备推门进去，但他刚伸出手，突然门打开了，一个标致的女生冲了出来，口中还喊到“童第周？！”。没想到，正好与马尔克撞了个满怀。&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:43&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【要不要过体质对抗】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:43&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;随后她抬起头，低声道歉“不好意思，没注意到外面有人。”从屋子里传来友人关切的询问：“小晴，怎么了，突然跑出去？”显而易见这位与你们撞了个满怀的女高中生就是小晴本人了。&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;（不用不用，不是打架情节）&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;（你们怎么行动）&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:44&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;和她道歉&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;指责maruko&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:44&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;（那我就当我没事了）“抱歉抱歉，我也没注意”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:45&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;被一个轻音柔体的妹子撞到，虽然马尔克的身体并没有受到什么大冲击，但是心里却砰砰直跳（误&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:46&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“我猜你就是那位校内著名的小晴同学”马尔克看向徐珑迪&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【别这样，感觉我很可怜】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:47&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;（又不是你，是你的角色，和你没关系&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:47&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【好！】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:48&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“没关系，不好意思，是我开门太急了”。小晴再次道歉。
“是的，这就是小晴同学。”徐珑迪老师说道。随后他转向小晴，“小晴同学你好，这个是马尔克，当时也是我在效实读书时的同学。你不是正好要给校刊取材嘛，我想我的这个老同学也许能帮你一些忙”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“啊那真是太感谢了！”小晴忙不迭向你们道了谢。&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:50&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“我很高兴我能帮上忙。这样吧，我们找个地方坐下聊聊，你看看需要了解什么。”马尔克提议道&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:50&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;正好我有几个问题&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:51&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“恩，这是我父亲的朋友，是正好一起来效实参观的，不介意的话他也有些问题想了解”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“这样我们算是互相帮助了。”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:52&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“好的呀。我在中山厅取材也差不多了，接下来准备去特别楼看看一些艺术社团，我们可以去那边坐坐。”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“有什么问题尽管问我吧！”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:53&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【等会，那个特别楼就是露天舞台那个楼吗】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:53&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;（对）&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:53&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【原来这叫特别楼】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:54&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;（我瞎命名的，叫特别楼有点像galgame的感觉了）&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:54&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“那就出发吧”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:56&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;一行人向着特别楼走去。小晴向你们介绍到“特别楼主要是我们的美术、音乐、劳技教室。那边还有一个天然舞台，给有才艺的同学进行表演。效实园里的大家都挺多才多艺的。”看得出来她很喜欢她的母校与同学们。&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:56&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;一边走着，马尔克一边假装漫不经心地提问&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“对了小晴同学，刚刚你从中山厅出来的时候，好像在喊童第周？那不是我们效实好几十年前的著名校友吗，你刚刚也在排练历史剧？”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【说起来小晴的友人没交代就被忽略了，这合理吗】&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【工具人也有工具人的尊严啊！】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 21:59&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【23333 工具人要排历史剧，小晴取材完跟她打了声招呼然后走了】&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“啊，那个啊，对，我们是在排历史剧来着。”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;小晴听到你的问题，稍微有点欲言又止的样子。&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-bot_2VUZCE7GL&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;bot&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 22:01&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;马尔克 🎲 心理学 d%: [2] = 2 ≤ 10 成功&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 22:01&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【艹】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 22:01&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;（nb!）&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;马尔克敏锐地感觉到小晴隐瞒了一些什么。虽然确实是在排练历史剧，但小晴喊童第周却不是剧情的一部分，而是另有原因。&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 22:03&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【虽然我知道但是我不能说！真难受！】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 22:03&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;（哈哈哈哈哈哈哈）&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 22:03&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;马尔克点点头，表示理解&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 22:06&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;剧情是啥&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;是什么时间的呢&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;能和我讲一讲吗&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 22:09&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“你说历史剧的剧情吗？刚刚在排练的那一段是讲wg时期，一位老师遭到了迫害，但还是尽心尽责教育学生的故事”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 22:10&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;下次排练方便我们看吗&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 22:11&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“可以啊，不影响到排练就行。不过啊，这个节目是要在校庆当天给全体校友表演的，我个人还是建议不要把自己提前剧透了比较好哦”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 22:12&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“哈哈，有点道理。不过这么说的话，这段剧情里童第周有出场吗？”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 22:13&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“我不确定诶，这段应该没有吧，不过之前几段会有。我其实也就是去采访呆了一会，也没看全，所以不太确定。”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 22:14&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【没问题了，去特别楼吧】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 22:15&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;说话间，大家已经来到了特别楼。&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;走进楼里，耳边传来宏大的管弦乐声。原来是管弦乐队在为校庆进行排练&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;（我切个bgm）&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;环顾四周，马尔克和铃木翼发现角落里有一群人聚在一起，似乎在聊着些什么。&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;（你们可以行动了）&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;（你们都没音乐技能，分辨不出他们演奏的是啥）&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 22:17&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【要 来 了】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 22:18&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;（晗神：我已经看穿了一切）&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 22:19&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【总感觉这段可以skip】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 22:20&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;（2333333 可是你们聆听就没成功过，不努力刷个技能成长吗）&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-bot_2VUZCE7GL&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;bot&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 22:20&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;马尔克 🎲 聆听 d%: [24] = 24 ≤ 50 成功&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;铃木翼 🎲 聆听 d%: [7] = 7 ≤ 71 成功&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 22:22&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;在优美的音乐声中，他人的说话声就显得有些违和与突兀了。不过也正拜此所赐，两个人听到了那群人的聊天内容。&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;原来是三个看上去比较焦虑的家长：“校长先生，别的学校都在补课，为什么效实中学不补课啊？”，“效实这么多的艺术课有什么用呢？高考又不考这些。”，“我的孩子文理科成绩都不错，选哪个好呢？”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;而校长只是平静和蔼地说：“任何选择都是对的。”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 22:18&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;找个地方坐下&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 22:19&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;舞台周围的位子很空，你们随便坐了下来。&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 22:19&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“就请小晴同学多多关照了，你看下你想了解些什么？”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 22:24&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“其实我最近在烦恼校庆特刊的制作，不知道怎么样才能填满版面呢，两位前辈有什么好的建议吗？”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 22:25&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;用图片&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 22:25&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“不妨考虑向在校学生和校友约稿？”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“百年校庆这样的大事，一定有很多人有话想说”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 22:26&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“嗯嗯，嗯嗯。”小晴忙不迭地掏出纸笔，把你们的建议都记录了下来。&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“那正巧，马尔克前辈是效实的交换生吧，这么难得，有没有兴趣来给校庆特刊写一篇呀？”小晴的大眼睛对马尔克忽闪忽闪。&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 22:29&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“惭愧惭愧，我倒是乐意效劳，不过我的中文写作这几年都基本还回去啦，恐怕写出来也是污染版面。你们校刊接受英文投稿吗？”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 22:31&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“可以呀，不碍事不碍事，这不是挺有特色的吗？”听了马尔克的话，小晴露出了笑容。但紧接着笑容又变成了疑惑的神情。“童第周？！我看错了吗？”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 22:32&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“什么童第周？”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-bot_2VUZCE7GL&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;bot&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 22:32&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;马尔克 🎲 侦察 d%: [86] = 86 &gt; 55 失败&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 22:34&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;听到了小晴突然的话，马尔克努力向四周看了看，但是也没有发觉什么奇怪的地方。另一边，小晴轻轻摇了摇头：“可能是我最近压力太大了吧，总是想着校庆特刊的事情。刚把乐团里一个人看成童第周了。”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;她揉了揉眼睛。“要不还是在外面走走，看点绿色放松一下心情吧，在这里看什么都能联想到校庆。”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 22:35&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“小晴同学真不容易，一边高中学习这么忙，还要准备这些额外的工作”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 22:35&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;你见过他吗&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 22:37&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“童第周啊，是啊，我怎么可能见过他呢……这都多久之前的人了……哈哈”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 22:36&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;要不去直接去那个铜像吧&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;我看前面挺多贡品的&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;你们不是唯物主义吗&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;怎么还信这个吗&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 22:39&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“说起童第周”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“最近好像不止你一个人见到过他啊，你看，这是我在图书馆发现的字条，看上去哪位同学也很关心校庆特刊的事情把字条放进了旧书里，结果还得到了童第周的亲笔回答”马尔克用开玩笑的语气说道，拿出那张字条给小晴还有徐珑迪看&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 22:44&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“这是啥？”徐珑迪满脸疑惑地看着这个纸条。
而一旁的小晴却似乎受到了巨大的精神冲击：“这是……什么？我？难道我现在是在做梦吗？”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 22:44&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【对发生该团的时间线有了进一步把握】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 22:45&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;只见她一脸不可置信的表情，随后双手抱头蹲了下来。&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 22:45&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“发生什么了，小晴同学？”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-bot_2VUZCE7GL&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;bot&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 22:45&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;马尔克 🎲 心理学 d%: [76] = 76 &gt; 10 失败&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 22:45&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【boss快用你无敌的话术说点什么！】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-bot_2VUZCE7GL&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;bot&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 22:47&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;铃木翼 🎲 话术 d%: [70] = 70 ≤ 81 成功&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 22:47&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;小晴&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;这纸条上的字是你写的吗&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 22:49&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“是……”小晴用微弱的声音说着，“为什么你会有这个……”
不过不用她说，你们也能看得出来，这上面的笔迹和她之前记录你们建议时的笔迹是一样的。&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 22:49&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;但你知道另一个人是谁吗&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 22:51&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“童第周啊……虽然我也不知道是不是……我只是做了个梦……梦里他告诉我叫童第周。”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 22:50&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“我是在图书馆里的旧书里拿到的，抱歉啊，我不知道这是你的东西。”马尔克把字条交给小晴&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 22:52&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;小晴接过字条，心情慢慢平复下来，但脸色依然是像唯物主义者见到了鬼一般惊恐&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 22:52&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;不要怕鬼&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;我倒是觉得你们应当希望鬼的存在&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;这样不就能有新的研究课题了吗&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;发生了不能解释的事情应当面对并得到真相&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;怕是没有用的&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;再说了&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;就算是鬼&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;童先生也不会把你们怎么样的&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 22:55&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;即使再不靠谱的事物，从散发着成熟大人气息的铃木翼先生口中说出来，都增加了好几份可信度。听了你的话，小晴也鼓起了勇气，重新站了起来。&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 22:56&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;那么为了真理&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;说一说发生了什么吧&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 22:58&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“就是这段时间，我天天都能梦到穿越回了几十年前，在效实校园里偶遇了青年童第周。可没想到醒来以后，也总感觉能在学校的各个地方看到酷似梦里青年童第周的身影。”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“连着几天都是这样，实在是让我神经都要衰弱了。”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 22:59&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;主动上前搭话吧&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;说不定能告诉你你不知道的这所学校的趣事的&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;还能写进校刊多好&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 23:00&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;听着铃木翼 小晴的交谈，马尔克回过头对着徐珑迪挤眉弄眼，小声说道：“你看看，这算不算是看到天使了？”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 23:01&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;徐珑迪：“天使竟是童第周？！”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;小晴：“可是我觉得这只是日有所思夜有所梦罢了。”她又仔细看了看刚才觉得像是童第周的那个同学：“那个人应该是五班的简相如。乐团的人我基本上都认识的。只是刚才那一瞬间不知道为什么就看着特别像。”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 23:04&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【艹这也差太远了】&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“不过这字条上的毛笔字大概不是错觉，毕竟每个人都看得到，除非是有人恶作剧……大概也不会有人这么无聊”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 23:08&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“是啊，我本以为只是最近压力太大，但是这个毛笔字彻底让我动摇了。不过这么一说别人恶作剧也不是没有可能。”从震惊中恢复过来的小晴依然怀抱着最后一分对唯物主义的坚持。&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“还是出去走走吧。”仿佛被一股无形的力量牵引着，大家默默向着银杏林中的童第周雕像走去。&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-bot_2VUZCE7GL&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;bot&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 23:09&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;马尔克 🎲 力量 d%: [22] = 22 ≤ 70 成功&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 23:09&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【好，我不去！】&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【皮一下我很开心】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 23:10&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;（23333）&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;银杏树是效实中学的校树。要是往常，小晴一定会很热情地向客人介绍这片银杏林的来历吧，可此时她也只是心事重重地走着。&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;两个人侦查雕像&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-bot_2VUZCE7GL&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;bot&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 23:10&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;铃木翼 🎲 侦察 d%: [69] = 69 ≤ 85 成功&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;马尔克 🎲 侦察 d%: [32] = 32 ≤ 55 成功&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 23:12&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;两人发现，雕像的底座上堆满了柚子、橘子甚至各种零食。&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 23:12&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“我记得当年这种风气不是被批评过么，怎么变本加厉了”马尔克对徐珑迪疏导&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;说到&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 23:13&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;建议徐老师把关&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 23:13&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“没办法，同学们要放，我们又管不住，也追查不到人。总不至于为了这个事情放个监控摄像头吧，也不是什么原则性的事情”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“不过托他们的福，我们吃了好几次免费的水果和零食了。”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 23:15&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“那严格说可是贡品，居然敢吃，难怪有人说你们中国人好多坚定的唯物主义战士”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 23:13&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;阳光透过树叶斑驳地洒在地上，小晴似乎是有点犯困，她靠着雕像坐下，眼皮渐渐合拢了。&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 23:15&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【艹旁人还在就坐下睡觉，不对劲】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 23:13&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;我想尝试一下能不能一起睡着&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;看看有什么情况&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 23:14&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;（boss要睡觉那你过一个意志）&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-bot_2VUZCE7GL&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;bot&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 23:16&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;铃木翼 🎲 意志 d%: [1] = 1 大成功&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 23:16&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【让boss睡】&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【他大成功】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 23:17&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;（可是这是意志检定，成功了应该抵抗睡眠才是）&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 23:17&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【判定成功应该是遂意志吧】&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【就是他想睡，成功了】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 23:17&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;（可以）&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;阳光明媚，正是睡觉的好时机，看着此情此景，铃木翼也不由得眯起了眼睛，困意渐渐袭来。&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 23:16&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;看到小晴旁若无人坐下睡觉，马尔克顿时有点奇怪：“小晴同学？你还在吗”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;马尔克尝试叫醒小晴&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 23:19&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;马尔克叫了叫小晴，没过一会儿，小晴苏醒了过来。&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;马尔克过个聆听&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-bot_2VUZCE7GL&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;bot&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 23:20&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;马尔克 🎲 聆听 d%: [85] = 85 &gt; 50 失败&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 23:21&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【聋子我是专业的】&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“小晴同学你还好吗，怎么忽然就睡着了？”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 23:22&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;马尔克似乎听到了小晴说了什么，但声音实在太小，根本听不出来。不过紧接着小晴就用所有人都能听到的正常音量自言自语起来“对——了——，不，不如做一版效实校友的介绍，比如童第周，还有得诺贝尔奖的屠呦呦，还有……”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;马尔克过灵感&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-bot_2VUZCE7GL&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;bot&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 23:24&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;马尔克 🎲 灵感 d%: [56] = 56 &lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 23:24&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;（过了）&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;听到小晴的话，马尔克感到了一股违和感。他仔细思考了一下违和感的来源。屠呦呦院士也是效实中学的知名校友，作为同样基础学科的大牛，马尔克对她自然是有所耳闻。但尽管她得诺贝尔奖的呼声很高，但并没有获奖啊，为什么小晴会这么说……？&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;意识到这一点的马尔克 sc 0/1d3&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-bot_2VUZCE7GL&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;bot&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 23:28&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;马尔克 🎲 sc d%: [60] = 60 &gt; 36 失败&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;马尔克 🎲  d3: [3] = 3 &lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 23:28&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;[??]&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 23:28&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;（23333）&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 23:28&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【这河狸妈】&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【我觉得这还是蛮不合理的，只是听到了这么个东西就掉3点，已经快赶上看到不该看的了】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 23:31&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【数值平衡问题，那-1？】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 23:31&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【-1好】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 23:31&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【可以】&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;意识到这一点的马尔克受到了极大的冲击，作为物理系学生，他一直认为自己是坚定的唯物主义者，但此时他的信仰也开始动摇了。&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;另一边，没有理会马尔克的询问，小晴好像是突然被注入了无限的动力。她说着“我要去图书馆查资料了！”便飞快地向图书馆的方向冲去。她的表现与睡觉前判若两人。&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 23:31&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【艹，这种行为倒是该sc】&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;马尔克转向徐珑迪：“额，小青同学平常思维都这么跳脱的吗”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 23:33&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“呃……”徐珑迪在旁边也是一脸黑线，“我是没见过啦，不过我也不是教他们班的，对她也不是很了解”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 23:33&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“我跟去图书馆看看，小晴同学这状态挺让人害怕的”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;马尔克跟去图书馆&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 23:35&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;另一边，铃木翼也靠在雕像旁边沉沉睡去。不知道过了多久，他缓缓睁开眼睛，却看到了与之前完全不同的景象。&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;铃木翼发现自己似乎置身在一座雄伟的拱顶房间里，那些位于高处的石头穹棱几乎隐没在了头顶的黑暗里。房间里有几乎与普通房间一样高的台座或者桌子。宽大的台座顶部散落着书籍、文件以及一些看起来像是用于书写的工具——由某种紫色金属铸造、表面带有古怪图案的罐子与一头染着颜色的长杆。&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 23:39&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;看看书&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;写的啥&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;找报纸&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 23:41&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;铃木翼想要伸手看看台座上散落着的那几本书。那些台座非常高大，看上去已经远远超过了人类的身高，但铃木翼似乎能够从上方俯瞰它们，这令他感到十分古怪和难受。&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;当铃木翼伸出手时，映入眼帘的却不再是正常人的手，而是一只巨大的垂挂在头部下方的绿色触须。受到惊吓的他不由自主地低头看向自己的身体，看到的却是一个十英尺高，十英尺宽的满是皱纹的彩虹色圆锥体。&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 23:42&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;好帅&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 23:42&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;看到这个景象，铃木翼 sc 1/1d6+1&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-bot_2VUZCE7GL&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;bot&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 23:43&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;铃木翼 🎲 sc d%: [29] = 29 ≤ 46 成功&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 23:45&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;铃木翼素来喜好怪力乱神，因此虽然看到的是十分诡异的景象，但也在他想象力所能覆盖的范围之内。但由于自己变成了奇怪的生物，还是受到了一点小小的惊吓。&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;他翻开书，这本书其实是一本笔记本，扉页上的文字虽然是他从未见过的文字，但似乎并不影响铃木翼读懂它。上面写着“人类你好，我们正在收集宇宙各地的知识，请你把自己的专业内容写在这本笔记上。不用害怕，之后我将把你送回原来的世界。”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【boss先下线】&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【回到晗神】&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;马尔克跟着小晴往图书馆进发。但在图书馆里绕了一圈，只看到三三两两个学生，但并没有看到小晴的身影。&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 23:51&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【好家伙，消失了，果然美少女jk邂逅都是假的】&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;四下搜寻看看能不能找到&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-bot_2VUZCE7GL&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;bot&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 23:51&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;马尔克 🎲 侦察 d%: [28] = 28 ≤ 55 成功&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 23:54&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;马尔克在图书馆周围四处搜寻，但并没有发现什么值得留意的踪迹。但在路过其他的学生时，听到了他们的闲聊。&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“你刚看到了吗？小晴刚刚来借了一堆书走，不愧是学霸啊，让我看这么多书我的头都要炸了。”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“是啊，而且我看到她和一个男生一起往阅览室方向去了。难道这就是学霸的约会吗？唉，女神都有男朋友了，我的青春结束了。”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 23:55&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“我懂了，按文艺作品剧情这个男生一定是童第周”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;但不信邪的马尔克还是要去阅览室看一看&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 23:57&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;来到阅览室，由于是上课时间，学生们都在教室里，阅览室里的人寥寥无几。因此马尔克一眼就发现了小晴和铃木翼坐在窗边读书。她面前的桌子上放了一叠厚厚的书。&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-bot_2VUZCE7GL&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;bot&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 23:58&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;马尔克 🎲 侦查 d%: [34] = 34 &lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 23:59&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【结果男生是铃木翼，童第周究极工具人】&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;马尔克走上前去翻了翻桌子上的书，这些书大部分都是些类似《更高更妙的物理》、《基础有机化学》等各个学科的知识，但有一本破旧的没有名字的书在这书堆里面显的格格不入。&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-13 23:59&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【35岁在高中生视角看怎么会用男生这个形容啊啊】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-14 0:00&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【因为只看到背影吧，而且铃木翼APP70】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-14 0:00&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【我翻书这两个人没有看到我吗】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-14 0:01&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【他们专注于眼前自己的书，并没有理你】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-14 0:02&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;马尔克觉得这不合理，因为他去图书馆的时候铃木翼还在睡觉，怎么一转眼就超到他前面从图书馆走到阅览室呢，于是他拿出手机打通之前铃木翼在中国的电话号码&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-14 0:03&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【因为你在图书馆搜索也要时间】&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;放在桌子上的铃木翼的手机响了，铃木翼奇怪地看着手机，就像是看什么新鲜事物一样，随后用并不是很熟练的操作接通了电话&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-14 0:05&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;看到是面前的铃木翼接起了电话，马尔克就把电话挂了&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-14 0:05&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“摩西摩西？”铃木翼困惑地放下了手机。&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-14 0:05&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;走到他们面前试图吸引他们的注意力，“怎么回事，你们怎么忽然在这看起书了”&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“徐珑迪呢”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-14 0:07&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;小晴：“啊，我是想到了一些好点子，有办法继续做校庆特刊了。”
铃木：“对，对，我是帮助小晴一起做。徐珑迪？他说他有事先回去了。”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-14 0:09&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“虽然感觉怪怪的，但有点子总是不错的。需要我帮忙吗，反正我也没别的事”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-14 0:11&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“好啊，那能帮我们收集摘抄一些效实历史上知名校友的资料吗？谢谢了”小晴说到。&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-14 0:11&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“好吧……”马尔克答应着，决定先去翻下桌子上那本没有名字的书&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-14 0:12&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;马尔克翻开了桌上那边看上去格格不入的无名之书。这本书看上去有一定的年头了，里面的文字晦涩且难以辨认。&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;（过困难母语检定）&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-bot_2VUZCE7GL&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;bot&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-14 0:14&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;马尔克 🎲 困难母语 d%: [58] = 58 &gt; 27 失败&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-14 0:14&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【老文盲了，读不懂也看不懂】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-14 0:16&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;并非古文专业的学生，书上的内容对马尔克来说还是过于困难了。反复翻了几页，只能勉强辨认出出现过很多次的「伟大种族伊斯」这几个关键词。&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;但是当翻到书的后半部分时，后半部分记录了一些伟大种族的科学技术，里面配有不少通俗易懂的图片，作为物理专业的马尔克自然能轻松阅读。&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;马尔克注意到有一种机器与交换身体相关。这个机器由许多杆子、轮子与镜子组成，中央有着一面圆形的凸面镜。&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;过一个灵感&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-bot_2VUZCE7GL&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;bot&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-14 0:18&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;马尔克 🎲 灵感 d%: [97] = 97 &lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-14 0:19&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【灵感也这么差，这种人真的是读物理的吗（质疑）】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-14 0:19&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“这个机器构造看上去挺简单的，我说不定就能做出来。不过交换身体是什么鬼？”马尔克一脸迷茫&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-14 0:20&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“这本书是从那儿找到的？”马尔克问向两人&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-14 0:22&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;两人看到这本书，露出了十分惊讶的神色：“你看这个书干什么？这个书里面没有我们需要的信息啦，放回来吧放回来吧”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-14 0:23&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“好吧。”马尔克放下书，想办法偷偷把揣进怀里&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-14 0:24&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【这个过个啥？妙手？潜行？】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-14 0:24&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【敏捷】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-14 0:24&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【可以，哪个成功算哪个】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-14 0:24&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【不过你不是说他们特别精力集中么，我翻书他们都没注意】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-14 0:25&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【对，他们精力集中在自己看的书上】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-14 0:27&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【那我不应该很容易拿到才对】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-bot_2VUZCE7GL&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;bot&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-14 0:27&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;马尔克 🎲 潜行 d%: [1] = 1 大成功&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-14 0:27&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【那没事了】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-14 0:28&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;马尔克表面应承着，趁他们一个不注意，偷偷把书揣进了怀里。而另外两个人对此没有丝毫察觉。&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-14 0:28&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【这感觉是成功啊，大成功没福利吗】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-14 0:29&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;【没吧，都快完结了。硬要说的话，就是你现在偷偷溜走他们也没意识到】&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-14 0:32&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;马尔克丢下两人偷偷离开了阅览室，找个地方把书处理了&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;让他想想，就烧了吧，找徐珑迪借个打火机&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-14 0:34&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;虽然徐珑迪不抽烟，但他还是在办公室的某个角落里找了个打火机。整本书就这样被化作了灰烬。&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-14 0:35&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;让我回去康康两个人&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-14 0:36&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;马尔克回到阅览室，那两人还在专心致志地看书，和他离开时一样。唯一不同的是随着时间流逝，外面的天色逐渐暗了下来。&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-14 0:38&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;“铃木先生，我们该走了。”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-14 0:39&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;被马尔克搭话，铃木翼如梦初醒地抬起头来“原来已经这么晚了吗，那我们走吧”&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-1002082435&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;马尔克&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-14 0:40&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;走了走了&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-651112786&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;铃木翼&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-14 0:41&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;叫一下小晴&lt;/div&gt;&lt;/div&gt;&lt;div class=&apos;chat-item chat-user-410155683&apos;&gt;&lt;div class=&apos;meta&apos;&gt;&lt;span class=&apos;chat-item-name&apos;&gt;KP&lt;/span&gt;&lt;span class=&apos;chat-item-time&apos;&gt;2021-02-14 0:41&lt;/span&gt;&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;外面的天色逐渐变暗，校园里响起了放学的铃声，学生们三三两两走出了校园。和小晴和其他人说再见后，你们混在人群中走出了校门。&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;探索了一天，还遇到了一些灵异事件，让你们感到身心疲惫，连带着记忆力也衰退了下去，甚至都忘了今天来到效实中学的目的是啥。拖着沉重的脚步，你们怅然若失地离开了校园。&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;离开校园以后马尔克便与铃木翼道别，直到飞回英国，也没有再听到铃木翼与小晴的消息了。&lt;/div&gt;&lt;div class=&apos;content&apos;&gt;5年以后，铃木翼与小晴在一家医院里醒来，迎接你们的是周围医生和朋友的笑容“太好了，看上去你的双重人格已经治好了。”从周围人的话语中你们得知，5年前你们因为出现了双重人格的症状，被送到医院就诊。这5年里你们一边接受着精神科医生的照顾，一边广泛涉猎着各个领域的知识。但你们对此一点印象都没有了。&lt;/div&gt;&lt;/div&gt;&lt;style&gt;.chat-item{padding:4px 4px 4px 8px;position:relative;}.chat-item::before{position:absolute;content:&apos;&apos;;width:4px;top:0;bottom:0;left:0;}.chat-item-name{font-weight:bold;}.chat-item-time{margin-left:5px;}.chat-user-bot{background-color:#ffffe0;}.chat-user-651112786{background-color:rgb(253,226,226);}.chat-user-651112786::before{background-color:#F56C6C;}.chat-user-1002082435{background-color:rgb(250,236,216);}.chat-user-1002082435::before{background-color:#E6A23C;}.chat-user-410155683{background-color:rgb(225,243,216);}.chat-user-410155683::before{background-color:#67C23A;}.chat-user-bot_2VUZCE7GL{background-color:rgb(233,233,235);}.chat-user-bot_2VUZCE7GL::before{background-color:#909399;}&lt;/style&gt;</content:encoded></item><item><title><![CDATA[立即执行函数，你或许没想到过的妙用]]></title><description><![CDATA[之前发了一个有关 JavaScript 中立即执行函数（IIFE）的想法，但还想多写一点东西。立即执行函数是 JavaScript 中很特殊的一种用法。由于以前 JavaScript…]]></description><link>https://maliut.space/p/iife-statement-to-expression/</link><guid isPermaLink="false">https://maliut.space/p/iife-statement-to-expression/</guid><pubDate>Sun, 31 Jan 2021 17:00:00 GMT</pubDate><content:encoded>&lt;p&gt;之前发了一个有关 JavaScript 中&lt;a href=&quot;https://developer.mozilla.org/zh-CN/docs/Glossary/IIFE&quot;&gt;立即执行函数（IIFE）&lt;/a&gt;的想法，但还想多写一点东西。立即执行函数是 JavaScript 中很特殊的一种用法。由于以前 JavaScript 原生没有成熟的模块化机制，立即执行函数曾被广泛地用于编写独立的模块和库，以防止全局变量的名称冲突。但随着 ES6 标准对于模块化和块级作用域支持的完善，这种用法也逐渐退出了历史舞台，顶多出现在被 Polyfill 转译的代码里。&lt;/p&gt;
&lt;p&gt;在网上的讨论中，提到立即执行函数的作用，基本上都是说用于隔离作用域，防止全局命名空间冲突等。但实践中我们往往忽视了它的另一个作用，即将任意 &lt;strong&gt;statement（语句）&lt;/strong&gt; 转化为 &lt;strong&gt;expression（表达式）&lt;/strong&gt; 的能力。&lt;/p&gt;
&lt;!--more--&gt;
&lt;h2&gt;statement 与 expression&lt;/h2&gt;
&lt;p&gt;在学习编程时，我们就学到过 statement 和 expression 这两个概念，但是当时我完全没有在意这些偏理论性的名词，因为觉得直接看代码就很直观了，不讨论这些名词也不妨碍我写代码。一直到代码经验比较多了，且接触了各种不同语言的语法和一些奇技淫巧，才逐渐意识到区分这两者的重要性。&lt;/p&gt;
&lt;p&gt;为了写这篇文章，我特意 Google 了一下 statement 和 expression 的准确定义，但发现网上也是众说纷纭，有把它们作为两个对等的概念的，也有说是包含关系的。不过抛开诸多定义上的细节不同，大家对两者的差别还是有共识的：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;expression 是一段执行以后会返回一个值的代码，而 statement 只是执行一段逻辑，并不产生一个返回值。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;在大多数语言中，expression 主要包括数字、字符串等字面量以及连接它们的运算符，而 statement 会包含一些赋值与控制流语句。例如：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// expressions:&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;expression&quot;&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; Math&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;sqrt&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; x &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; x 

&lt;span class=&quot;token comment&quot;&gt;// statements:&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; x &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;将 statement 转化为 expression&lt;/h2&gt;
&lt;p&gt;让我们关注一个常见的使用场景：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;switch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;some logic&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;break&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;some other logic&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;break&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; logic&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;break&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;这段代码根据 &lt;code class=&quot;language-text&quot;&gt;id&lt;/code&gt; 的值不同，执行不同的逻辑，并将计算后的值赋给 &lt;code class=&quot;language-text&quot;&gt;this.name&lt;/code&gt; 变量。&lt;code class=&quot;language-text&quot;&gt;switch&lt;/code&gt; 语句是典型的 statement ，它根据值的不同进入不同的分支。但很多时候每个分支的逻辑是类似的，例如上面的例子，我们计算的结果最终都是为了赋值，那这个赋值的操作就被重复了多次，引起了代码冗余，很不优雅。&lt;/p&gt;
&lt;p&gt;有些语言中支持一种名为 &lt;strong&gt;switch expression&lt;/strong&gt; 的语法，顾名思义，这种语法支持将 &lt;code class=&quot;language-text&quot;&gt;switch&lt;/code&gt; 语句变成一个 expression，执行完后返回一个值。用这种语法改写后的代码形如：（伪代码）&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; 
  &lt;span class=&quot;token keyword&quot;&gt;switch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;some logic&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;some other logic&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; logic&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;可以看到确实简洁了很多。&lt;/p&gt;
&lt;p&gt;JavaScript 目前并不支持这样的做法，但通过立即执行函数，我们可以变通地实现这一功能。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;switch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;some logic&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;some other logic&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; logic&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; 
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;得益于它是一个函数，不仅是 &lt;code class=&quot;language-text&quot;&gt;switch&lt;/code&gt; 语句，条件判断、循环等语句，甚至是更加复杂的逻辑，都可以使用这种方式转化为一个 expression 。&lt;/p&gt;
&lt;h2&gt;这样做有意义吗？&lt;/h2&gt;
&lt;p&gt;从功能的角度，确实原本的 &lt;code class=&quot;language-text&quot;&gt;switch&lt;/code&gt; 语句功能也完全够用了，要说代码冗余也不是很严重，这么做并没有特别明显的好处。但是从代码的优雅与可读性的角度，改写成 expression 的形式确实更好一些。&lt;/p&gt;
&lt;p&gt;一个佐证是 Java 在 JDK 12 中也增加了对 switch expression 的支持。作为一门被广泛使用的工业级语言，Java 并不一直追求最时髦的语言特性，甚至常常被人诟病语法繁琐臃肿。连 Java 中都如此高优先级地对这一语法做了支持，足以说明它在程序员中的呼声是很大的。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// Java 12 的 switch expression&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; today &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;switch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;day&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; SAT&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; SUN&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;break&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Weekend day&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; MON&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; TUS&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; WED&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; THU&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; FRI&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;break&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Working day&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;IllegalArgumentException&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Invalid day: &quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; day&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;在 JavaScript 中，除了与其他语言相同的应用场景之外，还有一个场合可能会用到立即执行函数封装后的 expression，那就是 React 的 JSX 语法。我们经常需要根据条件渲染 JSX 元素，但在 JSX 中混入逻辑代码时，代码的内容必须为 expression，这时我们就可以用上这个技巧。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-jsx line-numbers&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;switch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;A&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;CompA&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;B&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;CompB&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;C&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;CompC&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;CompA&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;/&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;div&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;从更宏观的角度来说，这实际上是需不需要将任何语句都设计为 expression 的问题。将代码分为 statement 和 expression 并不是理所当然的设计。例如，在&lt;a href=&quot;https://en.wikipedia.org/wiki/Functional_programming&quot;&gt;函数式编程&lt;/a&gt;中，就没有 statement，只有 expression，通过 expression 的串联使代码更为简洁流畅。&lt;/p&gt;
&lt;p&gt;有些面向对象的语言也借鉴了这一思路，例如 &lt;a href=&quot;https://stackoverflow.com/questions/9636503/whats-the-difference-of-statement-and-expression-in-ruby&quot;&gt;Ruby 中几乎一切都是 expression&lt;/a&gt;，连类定义和方法定义也不例外。即使在传统的 OO 设计中，也涌现出了 &lt;a href=&quot;https://zh.wikipedia.org/wiki/%E6%B5%81%E5%BC%8F%E6%8E%A5%E5%8F%A3&quot;&gt;Fluent interface&lt;/a&gt; 之类的方式，通过将 setter 改写为返回上下文的 expression 来实现优雅的流式接口调用。&lt;/p&gt;
&lt;p&gt;我们会在下文中简单介绍几种其他将 statement 转换为 expression 的方式。&lt;/p&gt;
&lt;h2&gt;为什么是匿名函数？&lt;/h2&gt;
&lt;p&gt;回到 JavaScript，也许有人会说，这没什么特别的，完全可以把逻辑抽取到一个独立的函数中来实现相同的效果。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getNameById&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;switch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;some logic&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;some other logic&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; logic&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; 
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getNameById&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;这样做当然可以。一般来说，如果是多次出现的可复用的逻辑，都是建议单独抽取成函数，以减少代码重复。但函数也并不是拆分得越细越好的。如果这段逻辑与上下文关联比较紧密，拆分的成本会比较高，而且在阅读代码时需要上下文来回切换，理解多个参数之间的对应关系，反而降低了代码的可读性。&lt;/p&gt;
&lt;p&gt;函数的命名也是一个经常困扰开发者的问题。&lt;/p&gt;
&lt;p&gt;总的来说，虽然使用匿名函数实现的原理和拆分函数是一样的，但是在这里我们不要过于纠结它的本质有多么高大上，而是充分利用 JavaScript 提供的简洁语法，将其作为一种语法糖来使用。（可以类比同样 JavaScript 中的 &lt;code class=&quot;language-text&quot;&gt;!!&lt;/code&gt; 语法，虽然从原理上来说并没有什么特别之处，但也经常出现在 x 个不为人知的 JavaScript 小技巧中。）&lt;/p&gt;
&lt;h2&gt;迁移到其他语言&lt;/h2&gt;
&lt;p&gt;其他语言中没有 JavaScript 的立即执行函数语法，那么它们能借鉴这一思路实现类似的功能吗？也并不一定不行。这里我们给出一个低版本的 Java 语言实现：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; id &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Callable&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token annotation punctuation&quot;&gt;@Override&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;call&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;switch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; 
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;some logic&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; 
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;some other logic&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; 
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; logic&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;call&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;我们使用 Java 中的匿名内部类来实现将 statement 转化为 expression 。&lt;code class=&quot;language-text&quot;&gt;Callable&lt;/code&gt; 老实说在 Java 中并不是很常用，可以理解为拥有了返回一个值的能力的 &lt;code class=&quot;language-text&quot;&gt;Runnable&lt;/code&gt; 。&lt;/p&gt;
&lt;p&gt;可以对比一下它与 JavaScript 版本的区别。在 Java 版本中，匿名内部类的语法相对比较繁冗，虽然可以利用 Java 8 的 lambda 进一步简化，但终究省不了一些方法名和关键字的出现，而这会对阅读代码产生一定的视觉干扰；而 JavaScript 的立即执行函数配合箭头函数，全是由符号组成的，我们在阅读代码时可以很轻松地将其省略，聚焦到核心的逻辑上。&lt;/p&gt;
&lt;p&gt;另外 Java 中匿名内部类引用外部变量时，由于 Java 执行机制的限制，我们必须要把使用到的外部变量声明为 &lt;code class=&quot;language-text&quot;&gt;final&lt;/code&gt; 即不可变的。这也势必导致使用这种方法修改代码的成本变高，更加麻烦。&lt;/p&gt;
&lt;p&gt;再次，Java 的匿名内部类在编译之后都会成为一个单独的类，在运行时也有类加载、内存等的成本，总的来说还是比较重的，因此一般也不会去大量使用。&lt;/p&gt;
&lt;p&gt;其他语言中有没有类似的做法，我就不太清楚了。也许比不上 JavaScript 中那么简洁，不过本身也不失为一种有趣的用法，有兴趣的同学可以在项目中尝试一下。&lt;/p&gt;
&lt;h2&gt;Bonus：再谈将 statement 转化为 expression&lt;/h2&gt;
&lt;p&gt;虽然本文主要讨论了立即执行函数的用途，但倘若抛开这一用法，“将 statement 转化为 expression”这一目的本身，也不失为一个让代码更加优雅的重构手段。而在 JavaScript 中，为了实现这一点，使用立即执行函数并不是唯一的方法。&lt;/p&gt;
&lt;p&gt;考虑一个常见的功能，将一个配置数组转化为 key-value 的对象：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; config &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; array&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;reduce&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;obj&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; item&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  obj&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;item&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;prop&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; item&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; obj
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;我们很容易想到，使用 &lt;code class=&quot;language-text&quot;&gt;reduce&lt;/code&gt; 函数可以简洁地实现这一功能，但 &lt;code class=&quot;language-text&quot;&gt;reduce&lt;/code&gt; 函数的内部却要手动 &lt;code class=&quot;language-text&quot;&gt;return obj&lt;/code&gt;，显得十分碍眼。其本质原因就是此处赋值表达式返回的是 &lt;code class=&quot;language-text&quot;&gt;obj[item.prop]&lt;/code&gt;，而不是 &lt;code class=&quot;language-text&quot;&gt;obj&lt;/code&gt; 本身。&lt;/p&gt;
&lt;p&gt;那么有进一步简化这段代码的方法吗？一种方法是借助现成的函数，例如 &lt;code class=&quot;language-text&quot;&gt;Object.assign&lt;/code&gt; 或解构赋值：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; config &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; array&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;reduce&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;obj&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; item&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; Object&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;assign&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;obj&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;item&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;prop&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; item&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; 
  &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;另一种方法是借助一个更冷门的语法——&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Comma_Operator&quot;&gt;逗号表达式&lt;/a&gt;。我们可以把一串表达式用逗号连接起来，它们会从左到右执行，并把最后一个表达式的返回值作为整体的返回值。在这个例子中，我们只需要：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; config &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; array&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;reduce&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;obj&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; item&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;obj&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;item&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;prop&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; item&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; obj&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; 
  &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;不过这个语法有点 tricky 了，也不太容易看明白它的意图。总而言之我们需要根据不同的场景去选取合适的写法。&lt;/p&gt;</content:encoded></item><item><title><![CDATA[【译】JavaScript 游戏循环详解]]></title><description><![CDATA[前言：游戏循环（Game Loop）是做游戏时绕不开的一个话题。网上已经有很多文章讲解了如何在网页中使用 JavaScript 实现游戏循环，但基本上都只提到  就完事了。这只能用来做个 demo…]]></description><link>https://maliut.space/p/javascript-game-loop/</link><guid isPermaLink="false">https://maliut.space/p/javascript-game-loop/</guid><pubDate>Wed, 23 Dec 2020 21:58:00 GMT</pubDate><content:encoded>&lt;blockquote&gt;
&lt;p&gt;前言：游戏循环（Game Loop）是做游戏时绕不开的一个话题。网上已经有很多文章讲解了如何在网页中使用 JavaScript 实现游戏循环，但基本上都只提到 &lt;code class=&quot;language-text&quot;&gt;requestAnimationFrame&lt;/code&gt; 就完事了。这只能用来做个 demo ，对一个完整的游戏来说是远远不够的。正好之前毕设时查阅了相关资料，对比之下这篇文章讲的最为全面。因此我翻译了这篇文章，希望能给大家带来帮助。&lt;/p&gt;
&lt;p&gt;原文链接：&lt;a href=&quot;http://isaacsukin.com/news/2015/01/detailed-explanation-javascript-game-loops-and-timing&quot;&gt;http://isaacsukin.com/news/2015/01/detailed-explanation-javascript-game-loops-and-timing&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;!--more--&gt;
&lt;p&gt;在任何状态随时间改变的应用中，主循环都是核心的部分。在游戏中，主循环一般被称为&lt;em&gt;游戏循环&lt;/em&gt;，既要负责计算物理与 AI，也要把计算出来的画面渲染在屏幕上。很不幸，在网上能找到的大多数主循环的实现 —— 尤其是以 JavaScript 来编写的 —— 都存在着一些计时上的问题。不瞒你说，我自己也写过不少错误的实现。这篇文章旨在告诉你为什么这么多主循环需要被修正，以及如何实现一个正确的主循环。&lt;/p&gt;
&lt;p&gt;如果你不想看讲解，而只是想直接拿正确的代码来用，可以使用我的开源库 &lt;a href=&quot;https://github.com/IceCreamYou/MainLoop.js&quot;&gt;MainLoop.js&lt;/a&gt; 。&lt;/p&gt;
&lt;h2&gt;初次尝试&lt;/h2&gt;
&lt;p&gt;我们即将来编写一个“游戏”。简单起见，只是来画一个会左右来回移动的方块。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;html&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-html line-numbers&quot;&gt;&lt;code class=&quot;language-html&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;box&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;div&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;让它展示出来：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;css&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-css line-numbers&quot;&gt;&lt;code class=&quot;language-css&quot;&gt;&lt;span class=&quot;token selector&quot;&gt;#box&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;background-color&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; red&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 50px&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;left&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 150px&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;position&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; absolute&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;top&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 10px&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 50px&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;看上去还不错。接下来我们来搭建 JavaScript 应用的脚手架。首先，我们的方块需要一些属性来控制它的位置和速度。我们用一个 &lt;code class=&quot;language-text&quot;&gt;draw()&lt;/code&gt; 函数来渲染它的位置。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; box &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getElementById&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;box&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 方块&lt;/span&gt;
    boxPos &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 方块的位置&lt;/span&gt;
    boxVelocity &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 方块的速度&lt;/span&gt;
    limit &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;300&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 方块跑多远以后调头&lt;/span&gt;
 
&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;draw&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    box&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;style&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;left &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; boxPos &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;px&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;然后是游戏的逻辑。我们希望方块来回移动，所以要给它加个速度。你很快就会发现，从这里就慢慢开始出错了。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;update&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    boxPos &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; boxVelocity&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// 如果跑过头了，就让方块调头&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;boxPos &lt;span class=&quot;token operator&quot;&gt;&gt;=&lt;/span&gt; limit &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; boxPos &lt;span class=&quot;token operator&quot;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; boxVelocity &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;boxVelocity&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;现在让我们把游戏跑起来。为了跑这个游戏，我们需要一个循环，不停地调用 &lt;code class=&quot;language-text&quot;&gt;update()&lt;/code&gt; 函数让方块移动，然后调用 &lt;code class=&quot;language-text&quot;&gt;draw()&lt;/code&gt; 函数把移动后的位置渲染在屏幕上。我们要怎么做到这一点呢？&lt;/p&gt;
&lt;p&gt;如果你用其他语言写过游戏，你或许会想到使用 &lt;code class=&quot;language-text&quot;&gt;while&lt;/code&gt; 循环：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;update&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;draw&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;然而，JavaScript 是单线程的，这意味着如果你这么写，那么浏览器在这个页面里就做不了其他任何事了。几秒钟后浏览器会卡住，然后告诉用户出错了，问是否要终止程序。你肯定不想你的游戏只能跑几秒钟，所以这么搞肯定不行。我们需要一种方法，让游戏循环把控制权移交给浏览器，直到浏览器准备好再次执行我们的工作。&lt;/p&gt;
&lt;p&gt;如果你熟悉 JavaScript，你也许会想到 &lt;code class=&quot;language-text&quot;&gt;setTimeout()&lt;/code&gt; 或是 &lt;code class=&quot;language-text&quot;&gt;setInterval()&lt;/code&gt;。这两个方法允许你在指定时间之后继续执行代码。这看上去行得通，不过在浏览器中我们有更好的做法：&lt;code class=&quot;language-text&quot;&gt;requestAnimationFrame()&lt;/code&gt;。这是个较新的函数但已经得到了良好的浏览器支持（在本文写作时的 2015 年，除 IE9 及以下的浏览器都支持它）。你向这个函数传递一个回调，它会在浏览器下次准备执行渲染时执行这个回调。在一台 60Hz 显示器上，一个优化良好的应用每秒可以更新画面（绘制帧）60 次。所以，为了达到最佳的 60 帧帧率，你的主循环有 1 / 60 = 16.667 毫秒的时间做完一次循环的工作。在后文中我们会对 node.js/io.js 和低版本浏览器做兼容。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;记住大多数显示器每秒不能展示大于 60 帧（FPS）。人类是否能够区分出高分辨率的区别要取决于应用类型，不过可以作为参考的是，电影一般是 24FPS，其他视频 30FPS，大多数游戏 30FPS 以上都可以接受，虚拟现实也许需要 75FPS 才能感觉自然。有些游戏显示器最高能到 144FPS。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;好了，让我们用 &lt;code class=&quot;language-text&quot;&gt;requestAnimationFrame()&lt;/code&gt; 来实现主循环！&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;mainLoop&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;update&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;draw&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;requestAnimationFrame&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;mainLoop&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
 
&lt;span class=&quot;token comment&quot;&gt;// 入口点&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;requestAnimationFrame&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;mainLoop&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;跑起来了！&lt;/p&gt;
&lt;iframe width=&quot;100%&quot; height=&quot;300&quot; src=&quot;//jsrun.net/NyLKp/embedded/all/light&quot; allowfullscreen=&quot;allowfullscreen&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;
&lt;p&gt;注意 &lt;code class=&quot;language-text&quot;&gt;draw()&lt;/code&gt; 方法是在 &lt;code class=&quot;language-text&quot;&gt;update()&lt;/code&gt; 方法之后调用的，这是因为我们希望能尽可能渲染出应用最新的状态。（注：有些基于 canvas 的应用需要在首帧，即任何更新都没有发生之前，渲染出应用的的初始状态。我们会在后文中探讨一种实现方式。）网上有些文章猜测在 &lt;code class=&quot;language-text&quot;&gt;requestAnimationFrame&lt;/code&gt; 的回调中先渲染再做逻辑会使屏幕绘制更快，但实际上并非如此。即使是，那也只是在绘制当前帧更快和下一帧更快之间做一个权衡。当 &lt;code class=&quot;language-text&quot;&gt;requestAnimationFrame&lt;/code&gt; 下一次调用时就无所谓了，毕竟一次只能更新一帧，但我觉得这样在逻辑上是更顺畅的。&lt;/p&gt;
&lt;h2&gt;计时问题&lt;/h2&gt;
&lt;p&gt;目前为止，我们的 &lt;code class=&quot;language-text&quot;&gt;update()&lt;/code&gt; 方法有个问题，便是它依赖于帧率。换句话说，如果你的游戏跑的慢（即每秒内能够执行的帧数较少），那么方块移动的也越慢；而如果你的游戏跑的快（每秒内能够执行的帧数较多），那么方块移动的也越快。我们不希望出现如此不可预测的行为，尤其是在多人游戏中。没人会希望他们的游戏角色行动迟缓，只因他们电脑的配置没那么好。即使是在单机游戏中，游戏速度也会显著影响难度。在考验反应的游戏里，游戏速度越低就会更简单，而速度越高就会难，甚至没法玩下去。&lt;/p&gt;
&lt;p&gt;针对这个问题，我们来加入一个控制 FPS 的能力。我们可以利用 &lt;code class=&quot;language-text&quot;&gt;requestAnimationFrame()&lt;/code&gt; 函数的能力，为回调提供一个时间戳。每次循环执行时，我们确认下是否达到了一段最小时间。如果是，我们就渲染这一帧，如果不是，我们就跳过这次循环，等待下一帧。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; lastFrameTimeMs &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 上一轮循环运行的时间&lt;/span&gt;
    maxFPS &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 我们想要限制的最大 FPS&lt;/span&gt;
 
&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;mainLoop&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;timestamp&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// 控制帧率   &lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;timestamp &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; lastFrameTimeMs &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt; maxFPS&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;requestAnimationFrame&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;mainLoop&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    lastFrameTimeMs &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; timestamp&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
 
    &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;你可以看到现在它的移动如此之慢：&lt;/p&gt;
&lt;iframe width=&quot;100%&quot; height=&quot;300&quot; src=&quot;//jsrun.net/3yLKp/embedded/all/light&quot; allowfullscreen=&quot;allowfullscreen&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;
&lt;p&gt;我们可以做的更好。这个问题在于我们的应用并不和现实时间挂钩，该怎么去修正呢？&lt;/p&gt;
&lt;p&gt;首先让我们尝试用速度乘以两帧之间的时间差（&lt;em&gt;delta&lt;/em&gt;）。我们把 &lt;code class=&quot;language-text&quot;&gt;boxPos += boxVelocity&lt;/code&gt; 替换成 &lt;code class=&quot;language-text&quot;&gt;boxPos += boxVelocity * delta&lt;/code&gt;。修改 &lt;code class=&quot;language-text&quot;&gt;update&lt;/code&gt; 方法，从主循环中接收 &lt;em&gt;delta&lt;/em&gt; 这个参数：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// 调整速度，使它不与 FPS 挂钩&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; boxVelocity &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0.08&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    delta &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
 
&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;update&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;delta&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 增加 delta 参数&lt;/span&gt;
    boxPos &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; boxVelocity &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; delta&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 速度现在与时间相关&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
 
&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;mainLoop&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;timestamp&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
 
    delta &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; timestamp &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; lastFrameTimeMs&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 获取当前时间与上一帧的时间差 delta&lt;/span&gt;
    lastFrameTimeMs &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; timestamp&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
 
    &lt;span class=&quot;token function&quot;&gt;update&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;delta&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 传入 delta 参数&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;结果相当不错！现在我们的方块看上去不受帧率影响，随时间移动恒定的距离。&lt;/p&gt;
&lt;iframe width=&quot;100%&quot; height=&quot;300&quot; src=&quot;//jsrun.net/VyLKp/embedded/all/light&quot; allowfullscreen=&quot;allowfullscreen&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;
&lt;p&gt;如果它的表现与你预期不符……好吧，接着看。&lt;/p&gt;
&lt;h2&gt;物理问题&lt;/h2&gt;
&lt;p&gt;尝试把速度值上调，例如 0.8 。你会注意到有几秒种这个方块运动得很不平稳，也许会从可视范围里跑出去。这是不应该出现的。是哪里有问题呢？&lt;/p&gt;
&lt;p&gt;问题在于，之前方块每帧运动相同的距离，而现在我们加入了 delta 以后，每帧运动的距离都有所不同，而这些距离有时会相当大。在游戏中，这一现象可能会让玩家穿墙，或是阻碍他们跳过障碍物。&lt;/p&gt;
&lt;p&gt;另一个问题是，因为方块每帧移动的距离不同，在计算过程中一些小的四舍五入的误差，会随着时间推移而累积，造成方块位置的漂移。没有两个人可以玩到相同的游戏，因为他们的帧率不同，造成的误差也不同。这听起来挺微不足道的，但是实践中，哪怕是在正常帧率下，也只要几秒钟就能让误差变得可被玩家感知。这不仅对玩家不好，也对测试不好，因为我们希望给定相同的输入时，程序也能给出相同的输出。换句话说，我们希望程序是具有&lt;em&gt;确定性&lt;/em&gt; 的。&lt;/p&gt;
&lt;h2&gt;一种解决方案&lt;/h2&gt;
&lt;p&gt;解决这一物理问题的关键点在于我们想要两全其美：既要在每次执行 &lt;code class=&quot;language-text&quot;&gt;update&lt;/code&gt; 方法时模拟相等的游戏时间，又要模拟两帧之间并不每次都相等的现实时间。事实证明我们可以做到，只需在两帧之间以固定大小的 delta 值多次运行 &lt;code class=&quot;language-text&quot;&gt;update&lt;/code&gt; 方法，直到我们模拟完整段现实时间。让我们稍稍调整下主循环：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// 每次调用 update 时只模拟 1000 ms / 60 FPS = 16.667 ms 的时间&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; timestep &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;60&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
 
&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;mainLoop&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;timestamp&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
 
    &lt;span class=&quot;token comment&quot;&gt;// 计算我们累积下来的还没有被模拟过的时间&lt;/span&gt;
    delta &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; timestamp &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; lastFrameTimeMs&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 注意这里是 += &lt;/span&gt;
    lastFrameTimeMs &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; timestamp&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
 
    &lt;span class=&quot;token comment&quot;&gt;// 以固定大小的步长模拟整段 delta 时间&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;delta &lt;span class=&quot;token operator&quot;&gt;&gt;=&lt;/span&gt; timestep&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;update&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;timestep&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        delta &lt;span class=&quot;token operator&quot;&gt;-=&lt;/span&gt; timestep&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;draw&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;requestAnimationFrame&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;mainLoop&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;我们把两帧之间的现实时间分隔成了小段，多次传递给 &lt;code class=&quot;language-text&quot;&gt;update()&lt;/code&gt; 方法。&lt;code class=&quot;language-text&quot;&gt;update()&lt;/code&gt; 方法本身无需修改，只要改变传递给它的参数，这样每次 &lt;code class=&quot;language-text&quot;&gt;update()&lt;/code&gt; 时都会模拟相等的游戏时间。&lt;code class=&quot;language-text&quot;&gt;update()&lt;/code&gt; 方法会在一帧之内调用多次以模拟完这一帧距离上一帧经过的真实时间。（如果这一帧距离上一帧经过的时间比单次 &lt;code class=&quot;language-text&quot;&gt;update&lt;/code&gt; 模拟的时间还要小，我们在这一帧就不调用 &lt;code class=&quot;language-text&quot;&gt;update()&lt;/code&gt; 方法了。如果有剩余未被模拟的时间，我们就把它累积起来放到下一帧去模拟。这就是我们需要通过 &lt;code class=&quot;language-text&quot;&gt;+=&lt;/code&gt; 计算 &lt;code class=&quot;language-text&quot;&gt;delta&lt;/code&gt;，而不是直接赋值给它的原因，因为我们需要记录上一帧剩余下来没被模拟的时间。）这种方式避免了四舍五入不一致导致的误差错误，也保证了两帧之间不会出现大到能穿墙的巨大跨越。&lt;/p&gt;
&lt;p&gt;让我们实际看一看：&lt;/p&gt;
&lt;iframe width=&quot;100%&quot; height=&quot;300&quot; src=&quot;//jsrun.net/NEIKp/embedded/all/light&quot; allowfullscreen=&quot;allowfullscreen&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;
&lt;p&gt;如果你调整 &lt;code class=&quot;language-text&quot;&gt;boxVelocity&lt;/code&gt; 的值，你会看到方块会正确地呆在它应该在的地方。不错！&lt;/p&gt;
&lt;p&gt;注意： timestep 值的选择并不是任意的。分母有效地限制了用户能够感知的每秒帧数（除非绘制是插值的，如后文所述）。当实际 FPS 低于最大值时，降低 timestep 会增加可感知到的最大 FPS，但代价是每一帧执行 &lt;code class=&quot;language-text&quot;&gt;update()&lt;/code&gt; 的次数会更多。由于执行 &lt;code class=&quot;language-text&quot;&gt;update()&lt;/code&gt; 越多，消耗的时间也越多，这就又会降低帧率。如果帧率降的太多，就可能会陷入一种死亡螺旋。&lt;/p&gt;
&lt;h2&gt;死亡螺旋&lt;/h2&gt;
&lt;p&gt;遗憾的是我们又引入了一个新问题。在我们的初次尝试中，如果一帧花费了比较长的时间执行更新和渲染，帧率就会自然地降低，直到每一帧花费的时间足够更新和渲染完成。然而，现在我们的更新依赖于时间。如果某一帧花费了较长时间来模拟，那么下一帧会需要模拟更长的时间。这意味着我们需要更多次执行 &lt;code class=&quot;language-text&quot;&gt;update()&lt;/code&gt; 方法，而这进一步意味着这新的一帧需要花费更多的时间来模拟，如此往复……直到整个应用无法响应然后挂掉。这就是死亡螺旋。&lt;/p&gt;
&lt;p&gt;一般来说，只要我们把 timestep 的值设的足够高，每次执行 &lt;code class=&quot;language-text&quot;&gt;update&lt;/code&gt; 的开销都比它模拟的时间要短，这样就不会有问题。但执行开销在不同的硬件和负载上都是不一样的。而且我们讨论的是 JavaScript 环境，意味着我们对执行环境只有很微小的控制权。如果用户切换到另一标签页，浏览器就会停止当前标签页的渲染，当用户再切回来时，我们就累积了很长一段时间要去做模拟。如果这消耗了太多时间，浏览器就会挂起。&lt;/p&gt;
&lt;h3&gt;合理性检查&lt;/h3&gt;
&lt;p&gt;我们需要一个逃生通道。让我们在 &lt;code class=&quot;language-text&quot;&gt;update&lt;/code&gt; 的循环中加入一个合理性检查：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; numUpdateSteps &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;delta &lt;span class=&quot;token operator&quot;&gt;&gt;=&lt;/span&gt; timestep&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;update&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;timestep&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        delta &lt;span class=&quot;token operator&quot;&gt;-=&lt;/span&gt; timestep&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;// Sanity check&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;numUpdateSteps &lt;span class=&quot;token operator&quot;&gt;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;240&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token function&quot;&gt;panic&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 出现了异常情况，需要做修复&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;   &lt;span class=&quot;token comment&quot;&gt;// 跳出循环&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;在我们的 &lt;code class=&quot;language-text&quot;&gt;panic&lt;/code&gt; 方法中要做些什么呢？这得看情况。&lt;/p&gt;
&lt;p&gt;回合制多人游戏用了一种叫“锁步（lockstep，亦称为帧同步）”的网络技术，它可以保证所有的玩家以相同步调进行游戏。这意味着所有玩家体验到的都是最慢的那个人的速度。如果一个玩家实在落后太多，他就会掉线，这样就不会拖慢其他玩家。因此，在锁步的游戏中，这个玩家就掉线了。&lt;/p&gt;
&lt;p&gt;在一个没有使用锁步的多人游戏，比如第一人称射击游戏中，一般都会有一个服务器维持着游戏的“权威状态”。也就是说，服务器会接收所有玩家的输入，并计算出游戏世界应有的样子，以避免玩家作弊。如果一个玩家的本地游戏距离权威状态太远，即 panic 的状态，那么这个玩家需要被拉回权威状态。（在实践中，如果直接把玩家拉回去会令人很迷惑，所以一般会有一个替代的 &lt;code class=&quot;language-text&quot;&gt;update&lt;/code&gt; 方法，让客户端能够更加平滑地回到服务端的权威状态。）一旦我们把用户拉回了最新的状态，我们就不需要再去本地模拟这一堆剩下的时间了，因为我们已经把这些时间高效快进掉了。因此我们可以把它们丢弃掉：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;panic&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    delta &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 丢弃未模拟的时间&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// ... 把玩家同步到权威状态&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;如果在服务端这么干，会引起不确定性的行为，不过只有服务端需要保证游戏运行的确定性，所以在多人游戏的客户端这么做是完全可以的。&lt;/p&gt;
&lt;p&gt;在单机游戏中，我们可以让游戏继续运行一会看看游戏运行速度能不能赶上来。但当游戏在中间状态过渡时，游戏会看上去在几帧之内运行得飞快。另一种可以接受的方法是，直接丢弃未模拟的时间，就像我们前面在非锁步的多人游戏中做的那样。这会引入不确定性的行为，不过你可能觉得这是个极端情况，可以另当别论。&lt;/p&gt;
&lt;p&gt;无论如何，如果游戏持续出现 panic 的情况，而且也不是因为标签页在后台引起的，这可能提示了游戏的主循环运行得实在太慢了。也许你需要增大 timestep 的值。&lt;/p&gt;
&lt;h3&gt;FPS 控制&lt;/h3&gt;
&lt;p&gt;另一种可以避免死亡螺旋（总的来说，避免低帧率）的方法是监控游戏的运行帧率，并在帧率过低时，调整主循环中的行为。往往在 panic 状态发生前，我们就能检测到掉帧的情况，可以由此来预防 panic 。&lt;/p&gt;
&lt;p&gt;有许多监测帧率的方式，其一是在一段时间内（比如最近 10 秒）持续监测每秒渲染的帧数，并取平均值。然而这稍微有点吃性能，而且我们希望最近几秒钟的帧数能获得更高的权重。一种简单做法是，使用&lt;em&gt;加权平均&lt;/em&gt;来计算权重：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; fps &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;60&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    framesThisSecond &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    lastFpsUpdate &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
 
&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;mainLoop&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;timestamp&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
 
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;timestamp &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; lastFpsUpdate &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 每秒更新一次&lt;/span&gt;
        fps &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0.25&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; framesThisSecond &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0.25&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; fps&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 计算新 FPS&lt;/span&gt;
 
        lastFpsUpdate &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; timestamp&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        framesThisSecond &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    framesThisSecond&lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
 
    &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;这里的 &lt;code class=&quot;language-text&quot;&gt;0.25&lt;/code&gt; 是衰减系数 - 这本质上体现了最近几秒钟的权重有多大。&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;fps&lt;/code&gt; 变量保存了我们估算出来的 FPS。我们该拿它做什么用呢？首先可以想到的是把它显示出来：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// 假设我们在 HTML 中增加了 &amp;lt;div id=&quot;fpsDisplay&quot;&gt;&amp;lt;/div&gt; 这个元素&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; fpsDisplay &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getElementById&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;fpsDisplay&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
 
&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;draw&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    box&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;style&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;left &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; boxPos &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;px&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    fpsDisplay&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;textContent &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Math&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;round&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;fps&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos; FPS&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 展示 FPS&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;成功了：&lt;/p&gt;
&lt;iframe width=&quot;100%&quot; height=&quot;300&quot; src=&quot;//jsrun.net/VEIKp/embedded/all/light&quot; allowfullscreen=&quot;allowfullscreen&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;
&lt;p&gt;我们可以把 FPS 派上更多的用场。如果 FPS 太低了，我们可以退出游戏，降低画质，停止或减少主循环之外的行为，例如事件处理器、音频播放；降低非关键更新的频率，或增加 timestep。（注意这是最不得已的情况，因为这会导致每次 &lt;code class=&quot;language-text&quot;&gt;update()&lt;/code&gt; 调用模拟更多的时间，进而使程序有更多的不确定性，因此应谨慎使用。）如果 FPS 回升了，就恢复这些行为。&lt;/p&gt;
&lt;h3&gt;开始与结束&lt;/h3&gt;
&lt;p&gt;在主循环开始和结束时分别调用一个回调方法（让我们叫它们 &lt;code class=&quot;language-text&quot;&gt;begin()&lt;/code&gt; 和 &lt;code class=&quot;language-text&quot;&gt;end()&lt;/code&gt; 方法）来做初始化和清理工作是很有用的。一般来说，&lt;code class=&quot;language-text&quot;&gt;begin()&lt;/code&gt; 可以用于在 &lt;code class=&quot;language-text&quot;&gt;update&lt;/code&gt; 执行前处理输入（例如当玩家按下开火键时刷出子弹）。如果需要对用户输入执行长时间运行的操作，那么在主循环中分块处理这些操作，而不是在事件处理程序中一次处理这些操作，可以避免帧的延迟。而 &lt;code class=&quot;language-text&quot;&gt;end()&lt;/code&gt; 方法则可以增量地执行不受时间影响的、需要较长运行时间的更新，以及根据 FPS 的变化作调整。&lt;/p&gt;
&lt;h3&gt;选择 timestep&lt;/h3&gt;
&lt;p&gt;一般来说，1000/60 在大多数情况是个好选择，因为大多数显示器以 60Hz 运行，如果你发现你的程序十分吃性能，也许你可以将其设为 1000/30。这有效地限制了你的可感知帧率为 30FPS（除非使用了插值，如后文所述）。注意帧率会根据你的显示器和显卡驱动进行调节，因此你设置的最大值可能与实际运行时测得的值不相同。如果你的游戏运行流畅，且你希望模拟得更加精确，你可以考虑使用高端游戏显示屏的 FPS，如 75、90、120 和 144。再高的话最终运行速度可能反而就会变慢了。&lt;/p&gt;
&lt;h2&gt;性能考量&lt;/h2&gt;
&lt;p&gt;如果程序的性能并不尽如人意，你可以使用插值绘制和 Web Worker 这两种重构方式来获得实实在在的性能提升。&lt;/p&gt;
&lt;h3&gt;插值绘制&lt;/h3&gt;
&lt;p&gt;在每次 &lt;code class=&quot;language-text&quot;&gt;update&lt;/code&gt; 结束之后，在 &lt;code class=&quot;language-text&quot;&gt;delta&lt;/code&gt; 中经常会有一段小于一整个 timestep 的剩余时间。将这段尚未被模拟的剩余时间所占 timestep 的百分比传入 &lt;code class=&quot;language-text&quot;&gt;draw()&lt;/code&gt; 方法就可以在两帧之间做一个插值。即使在高帧率下，这种视觉上的平滑效果也有助于降低画面的卡顿。&lt;/p&gt;
&lt;p&gt;卡顿之所以会出现，是因为 &lt;code class=&quot;language-text&quot;&gt;update()&lt;/code&gt; 方法模拟的时间与两个 &lt;code class=&quot;language-text&quot;&gt;draw()&lt;/code&gt; 方法经过的时间往往是不同的。进一步说，假如 &lt;code class=&quot;language-text&quot;&gt;update()&lt;/code&gt; 发生在下面第一行的每条竖线所代表的时间点，而 &lt;code class=&quot;language-text&quot;&gt;draw()&lt;/code&gt; 发生在下面第二行的每条竖线所代表的时间点，那么在 &lt;code class=&quot;language-text&quot;&gt;draw()&lt;/code&gt; 方法发生渲染的时间点，总会有一些剩余时间还没有被 &lt;code class=&quot;language-text&quot;&gt;update()&lt;/code&gt; 方法所模拟：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-text line-numbers&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;update() timesteps:  |  |  |  |  |  |  |  |  |
draw() calls:        |   |   |   |   |   |   |&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;为了使 &lt;code class=&quot;language-text&quot;&gt;draw()&lt;/code&gt; 对方块移动做插值以进行渲染，必须保留上次 &lt;code class=&quot;language-text&quot;&gt;update()&lt;/code&gt; 之后对象的状态，并将其用于计算中间状态。注意这意味着渲染最多落后一次 &lt;code class=&quot;language-text&quot;&gt;update()&lt;/code&gt; 。这仍然比外推（推测对象在下一次 &lt;code class=&quot;language-text&quot;&gt;update()&lt;/code&gt; 之后的状态）要好，因为后者可能会产生奇怪的结果。要注意存储多个状态实现起来比较困难，而且这个过程也是耗时操作，可能会导致帧率下降。因此除非你观察到了卡顿现象，否则这么做很可能是不值得的。&lt;/p&gt;
&lt;p&gt;我们可以这样对我们的方块进行插值：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; boxLastPos &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
 
&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;update&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;delta&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    boxLastPos &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; boxPos&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 保存上一次 update 时方块的位置&lt;/span&gt;
    boxPos &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; boxVelocity &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; delta&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
 
&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;draw&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;interp&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    box&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;style&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;left &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;boxLastPos &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;boxPos &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; boxLastPos&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; interp&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;px&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 进行插值&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
 
&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;mainLoop&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;timestamp&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;draw&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;delta &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt; timestep&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 传入插值的百分比&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;把所有的代码放在一起：&lt;/p&gt;
&lt;iframe width=&quot;100%&quot; height=&quot;300&quot; src=&quot;//jsrun.net/UEIKp/embedded/all/light&quot; allowfullscreen=&quot;allowfullscreen&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;
&lt;h3&gt;使用 Web Worker 来更新&lt;/h3&gt;
&lt;p&gt;与主循环中的任何事物一样，&lt;code class=&quot;language-text&quot;&gt;update()&lt;/code&gt; 方法的执行时间直接影响了帧率。如果 &lt;code class=&quot;language-text&quot;&gt;update()&lt;/code&gt; 方法花费的时间足够长，以至于帧率低于预期，那么我们可以将 &lt;code class=&quot;language-text&quot;&gt;update()&lt;/code&gt; 方法中无需在每帧之间执行的部分放入 Web Worker 中。（网上的很多地方有时会建议使用 &lt;code class=&quot;language-text&quot;&gt;setTimeout()&lt;/code&gt; 或 &lt;code class=&quot;language-text&quot;&gt;setInterval()&lt;/code&gt; 来进行调度。这些方法只需对现有的代码进行较小的改动，但由于 JavaScript 是单线程的，这些改动仍然会阻止渲染并降低帧率。使用 Web Worker 需要做更大的改动，但它们在单独的线程中执行，故可以为主循环释放出更多时间。）&lt;/p&gt;
&lt;p&gt;这里列举了部分在使用 Web Worker 时需考虑的内容：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;在迁移到 Web Worker 前分析你的代码。也许渲染过程才是瓶颈，此时你首先应当考虑的是降低场景的视觉复杂度。&lt;/li&gt;
&lt;li&gt;将 &lt;code class=&quot;language-text&quot;&gt;update()&lt;/code&gt; 中的所有内容都迁移到 Web Worker 中是不可取的，除非你的 &lt;code class=&quot;language-text&quot;&gt;draw()&lt;/code&gt; 方法能够像我们之前讨论的那样进行插值。最容易移出 &lt;code class=&quot;language-text&quot;&gt;update()&lt;/code&gt; 的是后台更新（比如在城镇建造游戏中计算市民的幸福指数）、不影响场景的物理效果（比如风中飘动的旗帜）和任何被遮挡或是离场景很远的事物。&lt;/li&gt;
&lt;li&gt;如果 &lt;code class=&quot;language-text&quot;&gt;draw()&lt;/code&gt; 方法需要基于 Web Worker 中的行为对物理做插值，那么 Web Worker 需要把插值结果传回主线程，使其在 &lt;code class=&quot;language-text&quot;&gt;draw()&lt;/code&gt; 方法中可用。&lt;/li&gt;
&lt;li&gt;Web Worker 不能访问主线程中的状态，因此它们不能直接修改你场景中的物体。与 Web Worker 之间传递数据是一个痛点。最简单的办法是使用 Transferable Objects：你可以传递一个 ArrayBuffer 给 Web Worker，并销毁原始引用。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;你可以在 &lt;a href=&quot;https://www.html5rocks.com/en/tutorials/workers/basics/&quot;&gt;HTML5 Rocks&lt;/a&gt; 中了解更多有关于 Web Worker 和 Transferable Objects 的信息。&lt;/p&gt;
&lt;h2&gt;启动与停止&lt;/h2&gt;
&lt;p&gt;目前，一旦我们的游戏启动了主循环，我们是没有任何方法停止的。让我们引入 &lt;code class=&quot;language-text&quot;&gt;start()&lt;/code&gt; 和 &lt;code class=&quot;language-text&quot;&gt;stop()&lt;/code&gt; 函数来管理游戏的运行。首先我们要找到停止 &lt;code class=&quot;language-text&quot;&gt;requestAnimationFrame&lt;/code&gt; 的方法。一种方式是维持一个 &lt;code class=&quot;language-text&quot;&gt;running&lt;/code&gt; 的布尔变量来控制主循环下一次是否要继续调用 &lt;code class=&quot;language-text&quot;&gt;requestAnimationFrame&lt;/code&gt;。一般来说没啥问题，不过如果游戏开始后立马停止，那么无论如何都有一帧会被运行，无法取消。因此我们需要一个能够真正取消渲染循环的方法。幸运的是我们有 &lt;code class=&quot;language-text&quot;&gt;cancelAnimationFrame()&lt;/code&gt; 方法。当调用 &lt;code class=&quot;language-text&quot;&gt;requestAnimationFrame&lt;/code&gt; 时会返回一个 frame ID，可以传递给&lt;code class=&quot;language-text&quot;&gt;cancelAnimationFrame()&lt;/code&gt; 方法。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;frameID &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;requestAnimationFrame&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;mainLoop&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;切记如果你做了 FPS 控制，别忘了在 FPS 控制的节流条件中也做下改动，记录 frame ID。&lt;/p&gt;
&lt;p&gt;现在我们来实现 &lt;code class=&quot;language-text&quot;&gt;stop()&lt;/code&gt; 方法：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; running &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    started &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
 
&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;stop&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    running &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    started &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;cancelAnimationFrame&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;frameID&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;此外，当主循环暂停时，也要暂停事件处理和其他的后台任务（比如通过 &lt;code class=&quot;language-text&quot;&gt;setInterval()&lt;/code&gt; 执行的任务或是 Web Worker 中的任务）。这通常不难，因为它们只要检查下 &lt;code class=&quot;language-text&quot;&gt;running&lt;/code&gt; 变量就可以决定自身是否要执行了。另一个需要注意的点是，在多人游戏中暂停会导致该玩家的客户端失去同步，因此一般要让他们退出游戏，或是在主循环再次启动时把玩家拉到最新的位置（在确认玩家是否真的想要暂停之后）。&lt;/p&gt;
&lt;p&gt;开始游戏循环会更为棘手一些。我们需要关注以下四点。首先，如果主循环已经在运行，我们不能允许它再次运行，否则会导致同时请求多帧渲染，降低运行速度。其次，我们需要确保快速地切换游戏的开始和停止不会造成错误。再次，我们需要在游戏尚未发生任何更新时渲染出游戏的初始状态，因为我们主循环的 &lt;code class=&quot;language-text&quot;&gt;draw&lt;/code&gt; 是在 &lt;code class=&quot;language-text&quot;&gt;update&lt;/code&gt; 之后调用的。最后，当游戏暂停时，我们需要重置一些变量的值，以防暂停时我们记录的需要模拟的时间仍然在流逝。另外，在游戏重新启动后，事件处理和后台任务也要恢复运行。这是我们的代码：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;start&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;started&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 防止多次启动&lt;/span&gt;
        started &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;// 第一帧来获取时间戳，并绘制初始画面.&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;// 记录 frame ID 用于停止&lt;/span&gt;
        frameID &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;requestAnimationFrame&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;timestamp&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token function&quot;&gt;draw&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 首次渲染&lt;/span&gt;
            running &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token comment&quot;&gt;// 重置一些记录时间相关的变量&lt;/span&gt;
            lastFrameTimeMs &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; timestamp&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            lastFpsUpdate &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; timestamp&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            framesThisSecond &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token comment&quot;&gt;// 真正启动主循环&lt;/span&gt;
            frameID &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;requestAnimationFrame&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;mainLoop&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;效果：&lt;/p&gt;
&lt;iframe width=&quot;100%&quot; height=&quot;300&quot; src=&quot;//jsrun.net/JEIKp/embedded/all/light&quot; allowfullscreen=&quot;allowfullscreen&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;
&lt;h2&gt;Node.js/IO.js 与 IE9 支持&lt;/h2&gt;
&lt;p&gt;现在我们代码的主要问题，是 &lt;code class=&quot;language-text&quot;&gt;requestAnimationFrame()&lt;/code&gt; 和 &lt;code class=&quot;language-text&quot;&gt;cancelAnimationFrame()&lt;/code&gt; 缺乏对 node.js/IO.js 环境，和 IE9 以及更早的浏览器的兼容（如果你还关心那些浏览器的话）。我们可以利用 timer 做一个 polyfill：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// 代码来自于 MIT 协议的 https://github.com/underscorediscovery/realtime-multiplayer-in-html5&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; requestAnimationFrame &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;typeof&lt;/span&gt; requestAnimationFrame &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;function&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; requestAnimationFrame &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; lastTimestamp &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Date&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;now&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            now&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            timeout&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;callback&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            now &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Date&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;now&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            timeout &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Math&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;max&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; timestep &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;now &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; lastTimestamp&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            lastTimestamp &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; now &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; timeout&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;setTimeout&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;token function&quot;&gt;callback&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;now &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; timeout&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; timeout&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
 
    cancelAnimationFrame &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;typeof&lt;/span&gt; cancelAnimationFrame &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;function&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; cancelAnimationFrame &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; clearTimeout&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;我们使用了 &lt;code class=&quot;language-text&quot;&gt;Date.now()&lt;/code&gt; 以减少兼容性问题，但这在 IE8 中是不支持的。如果你真的需要支持 IE8，可以使用 &lt;code class=&quot;language-text&quot;&gt;+new Date()&lt;/code&gt; 代替，但这会产生一堆临时对象，增加垃圾回收的负载，进而导致你的游戏卡顿。此外 IE8 本身也很慢，很难支持有较多 JavaScript 逻辑的应用运行。&lt;/p&gt;
&lt;h2&gt;总结&lt;/h2&gt;
&lt;p&gt;我们需要考虑的东西很多。如果你想简单地实现游戏循环，只要用我的 &lt;a href=&quot;https://github.com/IceCreamYou/MainLoop.js&quot;&gt;MainLoop.js&lt;/a&gt; 开源库就可以了。这样你就不用担心上面这么多的问题。&lt;/p&gt;
&lt;p&gt;如果你自己动手，那么还可以做一些通用性的代码优化。例如，可以把小方块封装在自己单独的类中。整个脚本应该被包裹在一个 &lt;a href=&quot;https://en.wikipedia.org/wiki/Immediately_invoked_function_expression&quot;&gt;IIFE（立即执行函数）&lt;/a&gt; 中，仅暴露接口给外部，以防止污染浏览器的全局命名空间，或是把代码打包成 CommonJS 或 AMD 的模块。MainLoop.js 已经把这些都做好了（甚至做得更好），不过总而言之我们已经做得相当不错了。&lt;/p&gt;
&lt;p&gt;最后，我要感谢 Glenn Fiedler 编写了经典的 &lt;a href=&quot;http://gafferongames.com/game-physics/fix-your-timestep/&quot;&gt;Fix your timestep!&lt;/a&gt; 一文，它是本文中如此多工作的起点。也感谢 &lt;a href=&quot;https://github.com/statico&quot;&gt;Ian Langworth&lt;/a&gt; 为我审阅了我在&lt;a href=&quot;https://www.packtpub.com/game-development-with-three-js/book&quot;&gt;关于制作 3D 页游的书&lt;/a&gt;中包含的本文的简略版本，并提出了 Web Worker 相关的一些建议。最后的最后，如果你仍然想寻找关于这个话题的更多资源，也许可以考虑看下 &lt;a href=&quot;http://gameprogrammingpatterns.com/game-loop.html&quot;&gt;Game Programming Patterns&lt;/a&gt; 这本书，或者 &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Games/Anatomy&quot;&gt;MDN&lt;/a&gt; 上一篇相对简略的文章。&lt;/p&gt;</content:encoded></item><item><title><![CDATA[CoC 7th 模组 - 天使百分百]]></title><description><![CDATA[模组简介 CoC 7th ，现代，推荐 2~…]]></description><link>https://maliut.space/p/100-percent-angel/</link><guid isPermaLink="false">https://maliut.space/p/100-percent-angel/</guid><pubDate>Sun, 16 Feb 2020 22:57:00 GMT</pubDate><content:encoded>&lt;h2&gt;模组简介&lt;/h2&gt;
&lt;p&gt;CoC 7th ，现代，推荐 2~3 人。调查员身份可以是学生、校友等，能与学校扯上关系即可。无战斗。推荐图书馆、机械维修等技能。也许智力、教育也高一点会比较好？&lt;/p&gt;
&lt;p&gt;因为本身是一个偏玩梗的团，所以适合的玩家比较局限，以效实中学学生为佳，如果经历过百年校庆，尤其是看过那部微电影，就再好不过了。别的人玩可能会比较懵逼吧。&lt;/p&gt;
&lt;h2&gt;模组导入&lt;/h2&gt;
&lt;p&gt;2012年，效实中学即将迎来百年校庆。在校庆之际，效实园里却流传起了一个神秘的言论 ——「只要考到100分，你就能见到天使」。为了揭开这个传言背后的真相，调查员们决定来到效实中学开始调查……  &lt;/p&gt;
&lt;h2&gt;模组下载&lt;/h2&gt;
&lt;p&gt;可以联系作者本人索取。已有一次跑团记录，&lt;a href=&quot;/p/log-100-percent-angel/&quot;&gt;点击这里查看&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[明日方舟作业帮]]></title><description><![CDATA[顾名思义，即方便明日方舟玩家抄作业的工具，点此进入。不过很遗憾，目前已经停止维护。 开这个坑的背景是：随着游戏干员数量变多以及能力的差异化， 未来抄作业将越来越难，因此希望提供一个工具，能根据自己现有的 Box…]]></description><link>https://maliut.space/p/arknights/</link><guid isPermaLink="false">https://maliut.space/p/arknights/</guid><pubDate>Sun, 16 Feb 2020 22:35:00 GMT</pubDate><content:encoded>&lt;p&gt;顾名思义，即方便明日方舟玩家抄作业的工具，&lt;a href=&quot;https://maliut.space/arknights/&quot;&gt;点此进入&lt;/a&gt;。不过很遗憾，目前已经停止维护。&lt;/p&gt;
&lt;p&gt;开这个坑的背景是：随着游戏干员数量变多以及能力的差异化， 未来抄作业将越来越难，因此希望提供一个工具，能根据自己现有的 Box 快速筛选适合自己的作业。&lt;/p&gt;
&lt;p&gt;这个工具分为两个部分，对于用户端，工具提供了一个可以选择关卡和干员的界面。只要玩家选择自己想上的干员和自己没有的干员，便可以一键筛选出符合要求的作业。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://s2.ax1x.com/2020/02/16/39NaJs.jpg&quot; alt=&quot;用户端&quot;&gt;&lt;/p&gt;
&lt;p&gt;而这些作业是怎么录入进去的呢？由于本人并没有这么强的水平从 B 站直接爬所有的作业，然后提取出里面的干员，因此不得不采用人工录入的方式。在此也感谢 &lt;a href=&quot;https://github.com/FinZhang&quot;&gt;@Fin&lt;/a&gt; &lt;a href=&quot;https://github.com/Xraigor&quot;&gt;@Xraigor&lt;/a&gt; 两位帮我录入。同时 &lt;a href=&quot;https://github.com/FinZhang&quot;&gt;@Fin&lt;/a&gt; 同学也是这个项目本身创意的提出者，且为后续优化提供了不少宝贵建议。为了简化录入，我开发了一个 Chrome 插件，可以自动提取当前作业的一些基本信息，且方便录入者在同一个页面完成输入和提交工作，无需频繁切换页面。&lt;/p&gt;
&lt;p&gt;对于干员的录入，一开始我并没有什么好办法，如果要截取视频画面并完成图片分类，我没有这些技能不说，即使有，那也是十分费时费力的工作。不过后来灵光一闪，干员选取的界面里，有每个干员的名字，而 OCR 已经是一项成熟的能力了，最关键的是，QQ 截图里就有现成的功能。这样只需一次截图框选，就可以把干员的名字都提取出来了。然后再对一些常见的识别错误稍加处理，OCR 的准确程度几乎能有 99%。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://s2.ax1x.com/2020/02/16/39NUij.jpg&quot; alt=&quot;录入端&quot;&gt;&lt;/p&gt;
&lt;p&gt;在技术上面，由于这个工具也是纯前端网页，因此保存作业数据、查询的功能就放在了 LeanCloud 上面（结果发现复杂查询的时候有 bug，不过影响不大，暂时不提）。另外值得一提的是，以前因为不会设计，也懒得为小项目去引入一些大规模的框架，因此做出来的工具都是毫无样式的纯 HTML 页面。而这次则尝试使用了从现在的眼光来看已经完全过时了的 Bootstrap 。虽然大一在学校做项目时接触过一次，但那时并没有懂它怎么玩的，而现在用起来才发现真香。虽然已经是个过时东西，但是对我这种小规模追求快速开发的小工具再合适不过了，只需引入几个 CSS JS 完事。最终的效果不仅美观，也天然拥有了适应移动端的能力。&lt;/p&gt;
&lt;p&gt;话说回来，最后这个项目还是弃坑了，原因是虽然我已经最大程度简化了作业录入的流程，但需要人工录入作业终究是一个绕不过去的坎。另一方面，明日方舟目前的难度和多样性，也远没有达到需要为每个人个性化定制作业的程度。这种情况下，花费大量时间去做作业录入终究还是显得吃力不讨好。&lt;/p&gt;
&lt;p&gt;不过也许是因为我在 Github 上写了明日方舟被人搜索到了吧，我的站长统计显示这个站还是有过自然流量的，这不禁令我感到一丝欣慰。&lt;/p&gt;</content:encoded></item><item><title><![CDATA[SimPow - 简洁强大的 Hexo 博客主题]]></title><description><![CDATA[没错，就是你现在正在浏览的这个网站的主题。 在经历了从各种 XX 空间到自建 WordPress 再到静态博客，尝试了各种主题之后，终于也不可避免地走到了看各种主题皆丑陋，不得不自己写一个独一无二的主题的程度了。 这个主题具体什么时候开始使用的已不可考，虽说有 Git…]]></description><link>https://maliut.space/p/hexo-theme-simpow/</link><guid isPermaLink="false">https://maliut.space/p/hexo-theme-simpow/</guid><pubDate>Sun, 16 Feb 2020 21:41:00 GMT</pubDate><content:encoded>&lt;p&gt;没错，就是你现在正在浏览的这个网站的主题。&lt;/p&gt;
&lt;!--more--&gt;
&lt;p&gt;在经历了从各种 XX 空间到自建 WordPress 再到静态博客，尝试了各种主题之后，终于也不可避免地走到了看各种主题皆丑陋，不得不自己写一个独一无二的主题的程度了。&lt;/p&gt;
&lt;p&gt;这个主题具体什么时候开始使用的已不可考，虽说有 Git 的提交记录，但也不完全准确。当然，目前的功能也还在完善当中。&lt;/p&gt;
&lt;p&gt;让我直接说重点，即这个主题的最主要的设计诉求。首先我对主题的偏好是简洁，拒绝了所有多栏的布局，力图保留最纯粹的阅读体验。而由于自己在浏览博客时，主要的场景是在 PC 端，主流屏幕分辨率 16：9 较宽，但博客的文本一般则是竖向细长型的，此为一个不和谐因素。而很多主题（包括我之前使用的）会使用一个框把文本的内容左右框起来，这看上去就更凸显了这一不和谐因素，而显得博客小家子气。因此我的主题希望打破文章与容器的边界，体现一种浑然一体的感觉。&lt;/p&gt;
&lt;p&gt;当然，我是一个设计白痴，只能直觉地判断最终效果顺不顺眼。因此也必然借鉴了不少他人的优秀主题。在此需要感谢这些我的灵感来源们：从网上看到的大神 &lt;a href=&quot;https://orzfly.com/&quot;&gt;orzFly 的博客&lt;/a&gt;借鉴了页面布局，从以前的主题 &lt;a href=&quot;https://otakism.com/hexo-theme-typescript/&quot;&gt;Typescript&lt;/a&gt; 借鉴了字体和配色，对于朋友的朋友的博客  &lt;a href=&quot;https://doubilee.com/&quot;&gt;BUWAI LEE&lt;/a&gt; 亦有借鉴。&lt;/p&gt;
&lt;p&gt;说到这个主题的名字 SimPow ，即 Simple &amp;#x26; Powerful ，简洁且强大。简洁相信不用多说大家都能看得出来，而强大则体现在，虽然它是一个静态网页，但动态网页能干的事情它也能干。得益于现在 SaaS 的兴起，并不需要自己购买或搭建服务器，我就可以实现一些动态化的功能。这里必须提一嘴博客的评论功能，起初我是想利用 SaaS 服务自己写一个的，后来发现了一个好用的插件 &lt;a href=&quot;https://valine.js.org/&quot;&gt;Valine&lt;/a&gt; ，它的实现思路和我的一模一样，而功能已经很完善了，因此我就拿过来稍加魔改便使用了。另外就是我想做的一个想法功能，初衷是无需繁琐的发布过程，能随时随地把自己的一些有趣的小点子小句子记录下来，这也需要动态化的能力。当然，要想实现重型的比如注册登录功能也是可以的，只是我目前没这个需求罢了。&lt;/p&gt;
&lt;p&gt;总的来说现在用起来还挺满意的。最后记录几个 TODO 项吧，虽然短时间应该懒得去做：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;主界面 Logo - 没有做 Logo 的能力，比起丑的 Logo ，还是纯文字顺眼一点&lt;/li&gt;
&lt;li&gt;有人评论时，使用 Submail 等服务提示作者或被 @ 的人 - 纯粹懒得搞，毕竟并没有人来评论&lt;/li&gt;
&lt;li&gt;文章内图片下方支持小字备注&lt;/li&gt;
&lt;li&gt;“项目”分类下的文章使用图片瀑布流展示 - 之前搞过一下不过效果总归不太理想&lt;/li&gt;
&lt;li&gt;“想法”分类，即上文提到的功能&lt;/li&gt;
&lt;li&gt;支持手机版 - 有生之年&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[工科生的音乐浪漫 - Sonic Pi]]></title><description><![CDATA[说起音乐创作，大多数人立刻就会将其划入艺术的范畴。而除非有专门学过相关的才艺，对于大多数像我们这样的工科生来说，中间仿佛横亘着一条巨大的鸿沟。但今天，我想向大家介绍一款神奇的软件，它在两者之间架起了一座桥梁。 这款软件叫做 Sonic Pi…]]></description><link>https://maliut.space/p/sonic-pi/</link><guid isPermaLink="false">https://maliut.space/p/sonic-pi/</guid><pubDate>Sun, 22 Dec 2019 23:07:00 GMT</pubDate><content:encoded>&lt;p&gt;说起音乐创作，大多数人立刻就会将其划入艺术的范畴。而除非有专门学过相关的才艺，对于大多数像我们这样的工科生来说，中间仿佛横亘着一条巨大的鸿沟。但今天，我想向大家介绍一款神奇的软件，它在两者之间架起了一座桥梁。&lt;/p&gt;
&lt;p&gt;这款软件叫做 Sonic Pi ，来自剑桥大学计算机实验室，目前支持 Windows、Mac、树莓派三个平台。它也是一款开源软件，在 Github 上获得了 5k+ stars 。&lt;/p&gt;
&lt;!--more--&gt;
&lt;p&gt;从功能上来说，它可以被视为一个简单的 DAW（Digital Audio Workstation ，数字音频工作站），类似 Cubase 和 FL Studio 等的下位替代。但它的特点在于，使用编写代码而不是输入音符的方式来完成乐曲的制作（←但用到的代码很简单）。它的设计旨在于简单、强大和富有乐趣间取得平衡，而它也的确做到了。一方面，它被用于校园之中， 在创造乐曲的过程中教授学生以编程思维；另一方面，它强大的实时编码作曲能力，也被不少专业的艺术家和 DJ 作现场表演和音乐可视化等用途。&lt;/p&gt;
&lt;p&gt;我花了点时间用 Sonic Pi 简单复刻了一首我非常喜欢的 BGM —— 来自《塞尔达传说 旷野之息》的 Kass&apos; Theme，但加入了些电音的风格。不如让我们在音乐声中，探索一下 Sonic Pi 的独特之处吧。&lt;/p&gt;
&lt;audio src=&quot;/54f35cf360f66012e580707d99ff9d4d/kasstheme.mp3&quot; controls=&quot;controls&quot;&gt;
你的浏览器不支持播放音乐
&lt;/audio&gt;
&lt;h2&gt;简单易上手的程序设计&lt;/h2&gt;
&lt;p&gt;阻碍大众进入音乐世界的第一道坎就是识谱了，各种五花八门的符号往往令人望而却步。不少人或许会觉得自己与音乐缘尽于此，但其实不然，作为艺术的音乐却与理工科有着不可分割的联系。让我们回想起曾经学过的知识。声音的本质是机械波。音乐的三要素中，响度对应波的振幅，音调对应波的频率，音色虽复杂些，但也逃不过是波形和频率的组合。而一首乐曲，无非是一系列声音在时间维度上的排列罢了。而五线谱，就是描述这一种排列的 DSL(Domain Specific Language, 领域特定语言)。能被沿用至今，它形象直观、信息密度大，一定程度上代表了业界的最佳实践。&lt;/p&gt;
&lt;p&gt;但这东西毕竟还有不小的学习成本，而且在如今的信息时代，五线谱的图形化特征却也带来数字化表示与传播上的不便。那该怎么办呢？改用代码实现便再自然不过了。我们早已熟悉使用代码对全世界建模，区区一个音乐当然更是不在话下。随时间流淌的音符，是顺序结构；有时会有整段的重复，那就加个循环；重复中又会带点变化，一个 if-else 了事。Sonic Pi 使用 Ruby 作为它的宿主语言，利用它灵活、可读性强的优势，封装了一整套用于音乐制作的 API，即使对代码知之甚少的用户也能很快理解它的含义。而对熟悉代码的用户而言，能够编写代码，就意味着强大的可扩展性、无限的可能性。&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 710px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/2f252303dda4385b8166d542724a069a/7131f/sonic1.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 49.26108374384237%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABDElEQVQoz6WQyU7DMBRFs6JpnDgJTRSo62dnIiiUQSpDF0hs+AU+H1RVDX9hX9wKViyg7eLIlvx8dGyPstZeU4uqq2xYNwi5RpiU+2JZvLtnvcW0x9vdlX1+bcCWHRhzB2mJ74F/8SPbrp4fKzvmCqOxtmmqkeT7yX4VnmcKL9UUl8UM8+UFutsGPjvo2Tu8yanCjZhhSVOoM0IuKzB+hLCYKDySQFvIXR21NcbREcLcCZ+UwIMUUKRRUIWAHyc09yTMYiZM35eGutq4QhMm2riP3ovtHS9zhXMhITMCdQ1EWSOIDqtjsSsMYv1xEqmVz2k9CuTGZ3JgMQ0Bp88/2M4MjNPGsXb7VZTo9y+YGfmgRmK0hwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;example&quot;
        title=&quot;example&quot;
        src=&quot;/static/2f252303dda4385b8166d542724a069a/7131f/sonic1.png&quot;
        srcset=&quot;/static/2f252303dda4385b8166d542724a069a/2efce/sonic1.png 203w,
/static/2f252303dda4385b8166d542724a069a/1d180/sonic1.png 405w,
/static/2f252303dda4385b8166d542724a069a/7131f/sonic1.png 710w&quot;
        sizes=&quot;(max-width: 710px) 100vw, 710px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p class=&quot;metadata&quot;&gt;一段演奏旋律的代码，即使不懂含义，也能猜个八九不离十吧&lt;/p&gt;
&lt;br&gt;
&lt;h2&gt;以随机性激发灵感&lt;/h2&gt;
&lt;p&gt;Sonic Pi 并不只是一个冷冰冰的代码编辑器而已，相反，它为了让初学者顺利进入音乐的世界，准备了齐全的教程，事无巨细地讲解了各类音乐和代码的基础知识，以及软件使用的技巧。作者鼓励大家多做尝试，他的口头禅是 &lt;em&gt;there are no mistakes, only opportunities&lt;/em&gt; 。&lt;/p&gt;
&lt;p&gt;在教程中，我印象最深刻的是作者花了不小的篇幅讲解在音乐制作过程中随机数的应用。在学会软件的基础操作后，我们除了临摹现成的曲子，如果想要自己创作些新的旋律出来，往往会容易陷入无从下手，没有灵感的局面。这时候随机性就可以派上用场了，我们可以让计算机随机演奏，毫不费力地就可以让计算机帮我们擦出灵感的火花。Sonic Pi 也很贴心地为我们封装了好几种随机函数，免去了我们从零开始自己处理随机数的麻烦。&lt;/p&gt;
&lt;p&gt;可能有人会问，我自己随便乱弹琴，不也能达到类似的效果么？且不说你的个人习惯是不是真的能让你的弹奏那么随机（想想自己乱按键盘的时候，是不是翻来覆去也就那么几个类似的 pattern），就算是有灵感产生了，过段时间以后你还确保自己能记得当时的旋律吗？但计算机的随机数就不一样了，它是一种伪随机数，只要设定相同的随机种子，得到的随机数序列永远是一样的，再也不用担心相同的旋律无法复现的问题。你甚至可以把它分享给朋友，让他们也能听到你的灵光一闪。&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/316d9d4086b1642efda7db536dd8354c/5a190/sonic2.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 73.39901477832512%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABJNAAASTQHzl8SnAAACgklEQVQ4y51UWW/TQBD2f+XXwQNPUGirxknjNEBFq1ZqoXGSxk5tx2d8H+vjY2edmCLBCyN9mvHO7Jw7lvb7PUzTFIjjGG3bous6FEWBIAhgGIbgWZaJ8zzPxTfdI7ieJ3RRFCFNU0gk5Pyy73uwLAse52VZgihJEgGyCcMQO9uG47hCH0cxWMVQ5AVC7piCmDy4NBmNcaXMIJ/K+Dad48tkNjiSZRmKomDGMZ/PIY9GuJyM8XV+hfFYxkSZQJ5NIU+nuFTmOD27gOT7PhZPC6wNHw2rwcoKTd0IVFwmUCY9r4SeMYbcjZEtHWSqi8QMeLsSnnUCiTKh2gvWYKAO/6aDztmY+P5Jwc2JguDFHtQSNflo1LWdkLumRc2zJVCmdH5Ey3VE25WGi/cnuJtcw33UURsJOtb2Dsmoa387JCdRGAlQ8+lbBCKndR+dnW+QvzlD824JGAUaPeQOm95h0zRD9E6g+yOro06g7ltjLjRM357iZnYNO3RRo31V8n/QRtfw4fNHjOQR7N1ODJSqkOhROrYDfaNB03XsVlvkNyaMZx2apmGr6dCP4DZbneuzHAmfauD5sK0dl+ND2zpIdEldqHj68RNLVcX6YQHvVsNGXWO9WuF5xflyheWTKjh9uzyBKAiRp5nose96iKnfYQyJNoDeYsm3RTSbUv8bpfw8Ynx9+OTjEizIhyEeiYYn0aq5jiP2kg6oHBrMMNUDwAeVxikil9vFldjr4V0eRCpbMs8fcHt3j/vbHuvlWry/qqiGTem3pEbK+733AlRpIbalKnsw4tyeypdCy8fOsmG+8D+OYSHwAxGpZs2wgg2X27pFkRV8oraogmyaVzaUBK3oL30NdEuCL60ZAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;interface&quot;
        title=&quot;interface&quot;
        src=&quot;/static/316d9d4086b1642efda7db536dd8354c/5a190/sonic2.png&quot;
        srcset=&quot;/static/316d9d4086b1642efda7db536dd8354c/2efce/sonic2.png 203w,
/static/316d9d4086b1642efda7db536dd8354c/1d180/sonic2.png 405w,
/static/316d9d4086b1642efda7db536dd8354c/5a190/sonic2.png 800w&quot;
        sizes=&quot;(max-width: 800px) 100vw, 800px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p class=&quot;metadata&quot;&gt;Sonic Pi 的界面，有黑白两种模式可选&lt;/p&gt;
&lt;br&gt;
&lt;h2&gt;互操作性与工作流&lt;/h2&gt;
&lt;p&gt;Sonic Pi 毕竟不是十全十美的软件，我在使用过程中也遇到一些问题，例如音源种类太少且难以加入新的音源、软件本身也不太稳定等。而且它毕竟是个小众软件，如果想要拿它认真做点东西，也要考虑到和主流软件的互操作性。换句话说，如果我们能把 Sonic Pi 的作品放入功能更加强大的软件中进行二次加工，那像音源或是功能缺失的问题都将不再是问题。&lt;/p&gt;
&lt;p&gt;那么如何做到这一点呢？容易想到利用 MIDI 这一通用的计算机音乐格式。Sonic Pi 本身支持作为 MIDI 的输入或输出设备，但一般连接的都是实体的设备。理论上来说，我们也可以将另一个软件作为 Sonic Pi 的虚拟 MIDI 输出端，但本人对这方面实在是知之甚少，做了些尝试但都不算成功，不同系统下的区别也比较大。但换个思路想， MIDI 本来就是记录音乐的一种格式而已，只要我们知道它的格式定义，就可以把文件写出来，而写 MIDI 文件的方法，想必有现成的轮子可用。果然我找到了 MidiWriterJS 这个开源库，亲测可用。至于具体的用法我就不详细介绍了，有需要的朋友可以留言私下交流。&lt;/p&gt;
&lt;br&gt;
&lt;h2&gt;替代品&lt;/h2&gt;
&lt;p&gt;使用代码编写音乐的工具并非只有 Sonic Pi 一个。正如有句名言所说：“任何可以使用 JavaScript 来编写的应用，最终都会由 JavaScript 编写。” 有一个开源库 Tone.js 也可以实现同样的目标。但相比于 Sonic Pi，它就简陋了很多。它更像是 Three.js 之于 WebGL，是对 Web Audio API 的一层简单封装。如果你事先没有对 Web Audio API 的概念有一定了解的话，将会很难上手使用，更不用说没有 GUI 与各种音源、效果了。至于优点嘛，就是无需下载客户端，以及可以更方便地与我上文提到的 MidiWriterJS 互相调用。有进阶编程经验的同学可以尝试一下。&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;附本文介绍的各种工具地址：&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://sonic-pi.net&quot;&gt;Sonic Pi&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/grimmdude/MidiWriterJS&quot;&gt;MidiWriterJS&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/Tonejs/Tone.js&quot;&gt;Tone.js&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[BotIM - 跑团辅助平台]]></title><description><![CDATA[BotIM 是一个为网络跑团设计的平台，也适用于其他需要在即时聊天应用中使用机器人的场景。 项目使用了腾讯云 IMSDK…]]></description><link>https://maliut.space/p/botim/</link><guid isPermaLink="false">https://maliut.space/p/botim/</guid><pubDate>Sun, 08 Dec 2019 18:48:00 GMT</pubDate><content:encoded>&lt;blockquote class=&quot;warning&quot;&gt;此项目已被废弃，强烈建议大家使用我后续开发的完全上位替代 [paotuan.github.io] ，详细信息可参考 &lt;a href=&apos;/p/paotuan/&apos;&gt;这篇文章&lt;/a&gt;。&lt;/blockquote&gt;
&lt;p&gt;BotIM 是一个为网络跑团设计的平台，也适用于其他需要在即时聊天应用中使用机器人的场景。&lt;/p&gt;
&lt;p&gt;项目使用了腾讯云 IMSDK 的免费额度，客户端模拟机器人逻辑，优点是完全合法，配置简单，且完全免费，无维护成本。缺点是只适合小规模的使用。关于具体的项目背景与搭建方法，后续会在单独的文章中详细介绍。届时大家都可以搭建自己的跑团平台。&lt;/p&gt;
&lt;p&gt;跑团中的核心功能就是骰子。目前本项目的骰子集成了如下功能：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;基础的 CoC 骰子规则，并支持骰子指令的四则运算。&lt;del&gt;甚至可以拿它当计算器使用&lt;/del&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;跑团记录自动录制功能。这是因为大家都有记录跑团 log 的需求，复制聊天记录再人工处理太麻烦，而这正好是适合交给程序的事情。&lt;/p&gt;
&lt;p&gt;在录制这个功能上能玩的花样很多。由于我们是程序记录，能够记录到原始的结构化数据，而不是单纯的文本数据，因此我们可以自由选择导出的格式，可以是普通文本，也可以是 HTML + CSS 直接导入 markdown ，还可以是 JSON 格式，以便后续进一步处理。&lt;/p&gt;
&lt;p&gt;也可以对记录的内容进行预处理，例如合并连续消息，选择消息要展示的字段，还可以事先对消息进行重排序，这尤其适用于网团中大家发言顺序混乱的场合。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;感谢 &lt;a href=&quot;https://finzhang.space/&quot;&gt;@Fin&lt;/a&gt; 同学在使用中提出的大量宝贵建议，大家若有建议，也欢迎留言提出。&lt;/p&gt;
&lt;p&gt;未来的优化点：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;考虑把控制面板的 UI 优化一下，使用现代的 UI 框架&lt;/li&gt;
&lt;li&gt;聊天界面本身完善，跑团中一些图片素材的快速查阅等&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[树]]></title><description><![CDATA[…]]></description><link>https://maliut.space/p/nice-tree/</link><guid isPermaLink="false">https://maliut.space/p/nice-tree/</guid><pubDate>Sun, 20 Oct 2019 00:05:00 GMT</pubDate><content:encoded>&lt;p&gt;又到了一年秋季，上班的路上，总能闻到桂花的独特芬芳。&lt;/p&gt;
&lt;p&gt;我不是一个善于分辨植物的人，看着路边形态各异的树木和鲜花，也叫不出它们的名字。即使这次强行记住了，没过多久也会忘记。也无法通过鸟叫声来区分鸟的品种，虽然它们并不是植物。而偏偏很容易就能分辨出桂花，也仅仅是因为它的香味太过独特了。而闻到桂花香，也为我带来了秋天终于到来了的实感。&lt;/p&gt;
&lt;p&gt;总而言之，桂花就是这么一种独特的存在。但桂花之于我的意义，除了提醒秋天已经到来以外，还有便是唤起了我对一篇快要鸽了四年的文章的回忆。没错，就是现在的这一篇，即使这四年里我未曾落下一笔，但对它的思路和内容却从未模糊半分。&lt;/p&gt;
&lt;p&gt;那还要追溯到四年前的秋天，我来到复旦大学张江校区。从食堂到二教，沿着斜穿草坪的小径，每一天都能闻到一股熟悉的香味——路边那仅此一棵的孤零零的桂花树散发的香味。无需多想便能记起这熟悉感的来源。在效实时，从教室到食堂的路上也同样立着这样一棵桂花树，每个秋天都能闻到这浓郁的花香。虽然当时每天都是匆匆忙忙地经过，从未驻足欣赏过一次，也从未与同学朋友谈论起它，但经由这香味，它早已潜移默化地进入我的记忆深处，成为我回忆里效实不可分割的一部分。&lt;/p&gt;
&lt;p&gt;桂花树毕竟是足够独特，以至于大家都能凭借嗅觉把它们分辨出来。可是大多数的树都默默无闻了许多，无论是在路边站岗还是在公园里错落，它们都几乎无法赢得路人游客的一丝注意力，仿佛只是理所当然地杵在那里罢了。当然这些也有可能是我的错觉，大家都很喜欢看树也说不定。至少对我来说，我对树的审美的觉醒，其实是有一个清晰的节点的。那应该也是在初入效实的某年初夏。从公交车站走到学校，路边是两排整齐的行道树。路早已熟悉到闭着眼睛都不会走错，路边的行道树自然也是熟视无睹。然而就在某一瞬间，也不知道为什么，这些树就突然变得可爱了起来。褐色的躯干，透着稳重的气息，但颜色又不至于深到令人乏味。错落有致的叶子，透过清晨的阳光，仿佛可以看到叶脉中流动着的水分子，翠绿色只能让人想到健康。树叶的绿色与树干的褐色又交织在一起，是顶级艺术家恰到好处的配色，挑不出半点瑕疵。一时间，我的目光完全无法从这些树中移开，腿也无法移动半分。当然后半句是编的，毕竟上学还是要上的。&lt;/p&gt;
&lt;p&gt;自此以后每次走在上学路上，我都会用目光对这些行道树完成一次检阅。随着四季变迁，这些树木的形态和颜色逐渐褪去了我一见钟情时的那么可爱，但仍然有着那一份独属于树的独特美感。它们再也不是我以前从来不会为之投去注意力的平凡生物了。再后来，我将这些树写进了我的周记，虽然我贫乏的文字天赋并不能表现出它们的美感。虽然再优美的文字也不能表现出你亲眼见到它们时所能带来的美感。&lt;/p&gt;
&lt;p&gt;自此以后，我对身边的树们也多多关注了起来。无论是上文说到的桂花树还是行道树，我与它们的结缘都与效实脱不了干系。可说到效实，就不能不说最能代表效实的树，效实的校树，银杏。&lt;/p&gt;
&lt;p&gt;银杏，又称为树中活化石，植物中的大熊猫，是十分濒危的物种。这些都是我小时候在百科全书上看到的。所以当我后来在各地都看到了许多银杏，甚至拿它们当行道树时，我不禁十分疑惑——说好的濒危物种呢？不过好像也没什么不好的，就释然了。至于银杏为什么能成为效实的代表，好像是因为效实的老校区里就种着两棵标志性的银杏。当然这我是无从得见了。我所能拥有的印象，就是现在的校园里那一片郁郁葱葱的银杏林。&lt;/p&gt;
&lt;p&gt;效实的银杏林的格局，是和别处不同的。都是依靠着学生必经之路旁的大草坪，树林之间见缝插针地立着童第周的雕像，当然最近也多了不少别人的。每每大考的时候，雕像前就会多出一些柚子、零食之类的东西，寄托着虔诚的学生希望取得佳绩的质朴心愿，虽然最终都被教务处笑纳。倘肯多花一些钱，就可以在毕业了以后认领其中一棵，在树底下插一块“ xx 届 xx 校友认栽”的小蓝牌子。不仅如此，每当学生毕业，大家都会三三两两自发聚在一起，以这些银杏树为背景留下高中最后的合影。&lt;del&gt;每当校庆时分，又会有一个女主角躺在银杏树的脚下，透过指缝散落的阳光让自己睡着从而穿越到过去。&lt;/del&gt;&lt;/p&gt;
&lt;p&gt;后来我去了清华和复旦，在那里我也见到了许多银杏。这两个校园里的银杏是何其相似：在一个巨大的、无比气派的、正对着学校大门的广场上，两排，或是不止两排的银杏树，整整齐齐地，就像接受检阅的士兵一样，一字排开，乖乖地呆在水泥瓷砖地面中特意为它们挖好的坑洞里面。那一瞬间我有点可怜它们。如果它们长在效实园里，它们不必如此刻板、拘谨。效实的银杏林的草坪足够大，足够让它们自由生长，自由发挥。虽然这些完全都是我的主观印象，但我想这确实是效实为我的思想带来的一些烙印。&lt;/p&gt;
&lt;br&gt;
&lt;p&gt;银杏是效实园里当之无愧的主角，但&lt;del&gt;就像在一个有很多妹子的氪金手游里面很多人都会找一个不那么热门的角色来主推一样，&lt;/del&gt;我偏爱的还是另一棵树。那棵树，就是一棵普通的平平无奇的树，我相信每个人都无数次地见过它的同类，但我从来叫不出它究竟叫什么名字。可这又有什么关系呢？我喜欢的只是那一株。我为它起好了特别的名字。我称它为「好树」。&lt;/p&gt;
&lt;p&gt;「好树」并不是我脑子一热，随便取的名字。顾名思义，它是一棵很好的树，但也只是普通的好，并没有某一部分好的特别突出，能让我用更有针对性的名字来命名它。确切来说，它就是一棵树最标准的样子，因此它不是那么起眼，但如果你注意到了它，它的颜色，它的体型，它树冠的大小，都是恰到好处，让你感到非常舒服。&lt;/p&gt;
&lt;p&gt;可作为一个理性人，舒服与否只是我的主观感受。有时候我就问自己，世界上的树这么多，凭什么我就认定它是一棵树的标准样式呢？后来我想了想，或许这和 Minecraft 有关。有段时间我疯狂迷恋这款游戏，直到现在我也只是因为开始晕 3D 才冷落了它。而作为一个 Minecraft 玩家，谁会不喜欢一棵树呢？当你两手空空地来到这个世界，没有树你就寸步难行，而哪怕只有一棵树，你就可以用它打造出整个世界。整个世界，用着默认材质包，开着最低特效，被某些人嘲笑玩的什么游戏。但我喜欢看着方形的太阳缓缓升起，金色的阳光撕裂浅蓝色的天空，越过锯齿状的河流，洒落在一片程序生成的橡树林里，在某一棵树下 Steve 举起右手，一个新世界在这里诞生。那些橡树，刨去一切随机要素的影响，本应该是一个模子刻出来的完全一致，但在&lt;del&gt;也许并不那么&lt;/del&gt;精巧的算法安排下，此刻它们错落有致，共同组成了这一片有机、真实的丛林。它们都是好树。&lt;/p&gt;
&lt;p&gt;大抵是每个人年少时，都觉得身边的世界充满了未曾见过的新鲜事物，声色犬马，它们无时不刻地拉扯着你有限的注意力。而只有在长大以后，面对周围一成不变、早已失去了新鲜感的现实，才能慢慢感受到平凡中蕴藏的美好。&lt;/p&gt;
&lt;p&gt;大抵是每个人年轻时，都觉得自己会是花园里那独一无二的一株鲜花，是人们心中毋庸置疑的焦点。而只有在长大以后，才能将自己代入角落里那不太起眼的一棵树，接受自己只是树林里平庸的一份子的现实，但仍有着自己的坚持。&lt;/p&gt;
&lt;br&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/660181cc9104807b9b3fe4f04965c5e1/7bf67/tree.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 133.4975369458128%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAbABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAMEBQb/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAABtkVKk1IsXKrnKFk8j//EABsQAAICAwEAAAAAAAAAAAAAAAECAAMQERIT/9oACAEBAAEFAvZYrHqXvopaUKv0tj9QagL6etYBj//EABcRAAMBAAAAAAAAAAAAAAAAAAAQERL/2gAIAQMBAT8Bqhk//8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPwEf/8QAGxAAAgIDAQAAAAAAAAAAAAAAAAERMRASQVH/2gAIAQEABj8CLnGskoT9NmWdKz//xAAeEAACAgICAwAAAAAAAAAAAAABEQAhEDFBUWGBwf/aAAgBAQABPyE+U+ops1XgiBLkQFLrjuC06NGEsW6A6jD9Q0FXFjFCAlT/2gAMAwEAAgADAAAAEGMoc//EABkRAAIDAQAAAAAAAAAAAAAAAAABEBExcf/aAAgBAwEBPxB0caOj/8QAFxEAAwEAAAAAAAAAAAAAAAAAAAEREP/aAAgBAgEBPxDKyn//xAAcEAEBAQEAAgMAAAAAAAAAAAABEQAhMZFBUXH/2gAIAQEAAT8QFwWbJjlkSqtwc1ayBbzd5mDvw/Wp2TKRLiCFcI5jtZEXj1o0Y8cWYYse3NQQ+q4g7v/Z&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;好树&quot;
        title=&quot;好树&quot;
        src=&quot;/static/660181cc9104807b9b3fe4f04965c5e1/7bf67/tree.jpg&quot;
        srcset=&quot;/static/660181cc9104807b9b3fe4f04965c5e1/efcb5/tree.jpg 203w,
/static/660181cc9104807b9b3fe4f04965c5e1/02e66/tree.jpg 405w,
/static/660181cc9104807b9b3fe4f04965c5e1/7bf67/tree.jpg 680w&quot;
        sizes=&quot;(max-width: 680px) 100vw, 680px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p class=&quot;metadata&quot;&gt;知道你们好奇是哪棵树，但请不要对我充满强烈个人主观的审美体验抱有过高的期望&lt;/p&gt;
&lt;br&gt;
&lt;p&gt;那棵「好树」，大学毕业时我又回去看了它一次，今已亭亭如盖矣。我见证了它这几年的成长，正如同它见证了我的成长一样。褪去了初见时的青涩和稀疏，如今的它更加茂密且翠绿了，它依然是那棵「好树」。&lt;/p&gt;
&lt;p&gt;它依然是一棵好树。&lt;/p&gt;</content:encoded></item><item><title><![CDATA[4.22.23.06]]></title><link>https://maliut.space/p/4-22-23-06/</link><guid isPermaLink="false">https://maliut.space/p/4-22-23-06/</guid><pubDate>Mon, 22 Apr 2019 23:06:00 GMT</pubDate><content:encoded>U2FsdGVkX18YJYU10RPveK/QpzY2bBFidHo+o4D8+4bI+jNjd6T3TVGRYMMGsz/QHrr2v1RDgN90FYKBSQ/nVTK2EUJ78R+qSC1MDBN4ORWhElTMgK0IDBps4RBJB5OY7Iut4vtzrtMdIIIvVFGjujl6jlHSCe2YS+csqUsHI+iaegccewwtiT0Fa3emFBJY+bc1V7KCVsHzafN2x+RmyY6zlCSJZ+87ek0O8CxfF1v+1k+0+w3mEClBzD85f4lgo3Rx1pGoqW1ZrpF3Dpjoo2LR9Ymx6QVSQNDgIUDRWpl2kmQZMWYq43ApljtYO0UM8aRWIALjuu8OCDYCKzf7HFoXwA+rtpCil4aQazKz4KSl+iXMvtuYjruFT2hlrd3vyU5pexwck10X3YXVLr5PBn0flym8uncxln+YjYDRCcWFvgWysG5l+NONwanErVg0dnpVY0SXs3BZkN9Lbu1OzQTX4Wiqx08GkwFdVSvks3aKzDYIwGibfzVInHFLE70LRva2IXmdv9nGYZRaEHHJqjPrCljIsDmS74CMn6HXz41Dd41yjqki7ScE+hui5p+yF2mqwGkfRjO/LWKRl0vsYrNCJi7mmRbQQIkwHEmLcdOp2J65ygySUuA5Xi4035d2yuxBrdoXq0GaQLuqzVPjMTTur7LpYJ9tIl6drVPLxbEbPB5d/LTj5CeB1Kt58j//ZRRcVZ487akd5awb/Fz/S/sIUNfIe07kf6V+Bz9xyOLiX1o7nFs8skFnEJwNVJhAW39kDcujB1f6ZkvXvCD8cGXXlZ1x1un9H4jFpszf/wzNxdG+AjAoTkTIJoMygxybfkrTc6AWugxQ6RQF268/zEfptd0FuMcKFNrI8yT7xssSRk2W2jPQrKT3RZyIs+dJB0UZHJ8Bfy2eumyuvdR+5eqRrO4nU5zvjj4LHqUF9QKNtn2djOESTR99GhzIg48PmAgYlSeko/Un63JW6+oiOxbDsUfFC6G45a9FQEuTRMLkGObjYiTjuOxrlUp/vN/hmpQhxJlelwxtgAOZMDJwgXZkb93bderbolYlfY/O2fSJFC2qWr9vVtcWu7TRAURTS9XgokM7ZPC3eLO80Jzihz6/V2BwjMd7MtY4oLFsSuYRCkblVYH2qv72KGrq9t11itAnsBv1U2uzvlujXSZQW1rU3PcFh6XL9QXQPbsKshzPNYq05oV/XBzX0k1WdQb4nQfxZ3zGoio7vClAAoW1/AttQQ8b8gHBNHyQwfhljUrx8AV/2jiZIMNze/uSnN0M5qp0YPxuXHFcqaaRbYd5BWDqHPTI99HZ4RWtKH/MuKEFdE/s7Zzkec4WC9WXJgCUxw0e3Ta0zACumLO0P+ij6k7UomTUYQEVFl+KOS4zQvFfuCgfDpH2bY8qkOvSKAC2ozGtnsydpQoiBKLGSVSmkpEjVEbLu3JoZne/htFLIKTTvfZgoURUFKsHxyaYl9oXoRX2ulhpEJU5JVJ7g77VBkQ13AMyWyNHYoqkr0Y4yW0N7r2YOdZ+4rQ/aYvs6qY0Nj40ntZEp/jSBs+s0z1FN/N8ZV1q3Xi5DJpCe2UkYPK8yb7UvMoQIs7vDqXdLqsif4V6JKE2hYQuTveuP+WWQOsEeXq9FBPrd5w7+c1dDINveQrsjWnkXfq+JtBo201HkBsJve4AIUp7KgFAqnSL5VxroJJ/n44XOxUMcRqQSRGdHaPoNxLWZioidwhwreXlVTTzpSr3eXOOqAVPvwhHwbMvqRqa+7R3giKy+Peaq6dG7nk/v4xvBVnIEwhns2BlW/jpPIjmTme3Mlk8Ymu0ALkTAYTHvCIp5VjqbIMDBfyZYikfjLUISgoPw2DRKqfmQMCi5VIUHh+neVCPSxkOx5CS4vufdKyo1ig0Du8WF8G/Ip3C32i5Zsk8+Y57T6/R+gw7wIZvRIoDCHz+PprsNvf2ITt407fWpN9+03n/ltnd+XfTgkpLoGgDoE9XCkGB2LSBjJBhdLkbzeBN9JTvAGVDHvagX0mP6HBU5tC4x84G/pwHRAW9Esf/jXGOlKkzxYvGyNKndTDlhovWA/IJ9V+997AuxWDGzwW3567sRDHanaJJAtKj5v7Aqre4dMo8Ogy63tk4ZZh/Okvh3CkoCKrOAD9mV+q0XnDFe1Oc+NJ+Bt/tWUKeM2I7i8dZ3hULt+p2g4ATikMqVm4mLgR7ImIYZqA3h2yOybty+C9GMTIKWrMWS2sArVfM7Smcr15uXMF8ia6/F2+/hgE+USZ4zbOe1R/hLKqqcXHNyHXEkf/vJw2qUqI9MDAEWuYsbS8Z+swjVSWzxwjHeXvqPyZLPKCeELXgwkMhwZJjT+xhpFDzdCCdS4Ww6OVsBA4zGd6Ap3ltPsNh8ANtxXqbSQU2IVPdfj1QkdS+sLnTPMl2HdbTtaF4uEcCB32ZluWb2AoIVbJMf0pGutEEo9qMVuhlUEkGjL7wvljAp2jSqFi+HayfUbxoa7qY5gFgQyHcuV/PsRsiFpwcU7XUbEhwLmTuLfwgdFzDks+z/PU6q7bX9mDyfeyV4j06YRo8K8zL3dSwsTG6VVviBVsbmsHnmkze2hGIqv3NznHiul9d8AwRzw/sDQZbG1kNIPx/vXl2rvy1YDCYWwjy417Lj8ueD5dmFQzDfxf+WIahWBMuqB27gTgv8aEmOzMadVAhbzT5r0KXJJSQf7TUzwUyVyObv8kfEquX2kr1pebxlrDEN94Jzk8AoS6P5DGMRtWlAs8cv1fn3K8WBtndjHNji0weQ/l3ZQUBKZKKU8FUurUkKYakh4dAqlL7HqVs416hpphk5dxNM7PJQRJaNLAj/kzqUcsqOeJirU3YpPYIHAieML4U+5a+PxUbXDoiI6/3tQGfSu/9llSHuSWUrtWwn+5aRwwRPpxbKSngcIFXq2CbJ1NBkd9N1qOaZ4SJf4rwyQbZaMu+ooOh/NzntS+I9e+pN0CTchCdFa4AbVgNWbq1yCIkxnngElXdQVUeq9sRpD4qjao376REm1ysyvZxVD66mtWL5JXcXLmLOGysw7my52R/mRMj2YdCNrb3ZkEt+h9VusGG4REgmTAY/PPNsWTYVkERZhdv1D7/XpD9hNb8826COuRseSJQsyd8+jfQagjqDMK0rc1LxfXvnzXWMnBKHT7mSkt5dHeteXRQ6YxP12+f2Zh3miOupWUVfe6LtNNcv9W7+W+dWunekyISXnCCI8abLDSqPKVb6mN83zVkZK6bV4rSizSViT7g7icaUXkHPpM8e1/n2OBWyqS1EOupCn/xGjsKN3jL0Z55H1Z1vI11w7g8FoaZtf/TwOw/+diV2HEoNLQ7iyjvmc/AsAsno/1N7rZdgYVMH4JfFYr7AAC8AWaNjTzfElNl32BYlxEy9CYpWMO80sstjgj6hQdGw0U1ORRmhbMNItUDfe/o0pDr9XfTcylhhgjr9o9ICJEo39enR3iJ06YG+5SBW4ewReD1LgZLca8XBx2Gd1YWti3Gyk7KOQdNPIOneVekX90HsO0Y0BczKqoeXSLl4o6lN8KldD4ooKICFfF/VRPk9sNavoovfoc684ugIsXn/lyUNRu4irsYsqGGYcFKMkfQRzxjgKkhv6MuKc3lBKP8jW8cMaR7739h8ezB1ktO7q/JTJ78lF8fh9YdKOpoaRftL5HW6HmiIWt7kzi63A9IyvZjb5QjMgzGgm32GFn78thuRGd4sjwHkIvSxhJ81XXa+YhJ89lEIiKokDmXCPv9RMiiqT3b5x+YxKIFXasN6Fe9q33EDaFvqcY1AxDI35I3y9wiT5l4iKGJKovZeo9J2IDkhrl4hisiwCZ6wz54c3r+za9nQ1PFfJ2tbEYvYWH/2jBU7LM9KhQ98frA4Ln+toqqnGTycrb7VzecTv3fRmqLC4mHNZdXXYYPWwV5pBzbYKK5mF25gv9hGmOYo0I0vhWClpWxx2Zxpb6EHel710Kx1NhIQr54Iw1w+GDYkjDTFsdImeDzw0brQPaortfvpRmDDYL1ogq2SopCCqg2JHsh6X4YxhXgHe7ie3qbqmYILDVCGHiSVr9iV9fEy/0Oyon3J8PsmA3oLxnGxJCb9xFZlf2pbC25c5Z6rFEaQnN/zoao0dDoOe8wopitYyU8FaSHrjK6EvkJOMY3YsKs1UMIfLkrZwoHTO0OjFEIe79QJmeluBSQ+f+I6QLU78sMqWXrTTlSgIeVxbTj0KQ/sVvsuhz8n0wtLXMeAaBZffT6W9MCR11i7aDVpn6GKx19V7LmcpFAOtxeVphq2luggH4UtHCmaO/M1LJeCCAwSaF3fXxMaWglOFp5o+2Yon1ARFYktxK0sqZBmEErezU6s6oBi0v1+xePqbCvqBTkd+iC5EViHHu8F54LEy83AYwYyJIItFN6KDuP5fFZb2H1znciC8Msj79UEvMLZGKFpstFW6PmY3V9ydyQJ5fmHWPUBuoVFH4ccnBn+LyNf+X7GG6ztkrgIwhdjV/xMu6pZQLFSk9mgnM0OD0s20hU7MMCfIRqVkR2iM7EoXWmD2Qm/56q7zgRfKs98MMy8PMKPqcLOXS49RrvbPf3RNr7iXvq1izsHv5wRhoDGobw57f5c6XIzDx5lSzQ3oGQuCTFgy8eRb7bo6nnOV2HdIavK0UiRqE86VJbqtnxYL8C67OuFu4j/jj6GTuiHG3yXiT+vUPLdL8KDl02xe6kv1j+YeHnrW1tBfbfRLy/Rit5z+QF5n+BafRucmBiRDUtFn7HAcO0VOj8HMCF2L0CBeT7uxDg87HTj1QjTdeeDU1bytLOOFCSApjOUbMhKKN6in4yrrkg1ysM7HsaAPkVIDUiTx76+KYHU6ZahDjpJe6XV6X5xbqOngUFfx/OUx7L+Fjt9LpV+ZDcR3K+csK86cVyq36+5tiLWwYUvumkB5yoDyoL66m3NCPjK1Dy2cUQqUZclq9k+Pxp4i00xu1XM8k2sczHY9SRfHpSUGMbMMHxD9ImTTrZamvq4oxDRfd/mPieu6QNnBMhxDBKCeiL0Wa3G018bn1q7INKOCglHMORMnbE6j7rTxcgWI3xewGwoZ1h/CS5j6MKYAM0Nc0ZhihJtUuicn2gxNSeeGTfFcGOQg08hukETqot36o2KCkzvidZnnRuipa/gtJWK9ubgbKhC63j3wz13ThuJx/4QCf+wM06i2mYm0dS1RvU0ViAYmuVxpYRhSJJg6SefDLzdASLcEsL9o98UZ8Qbgjev9Vk6svpAX3CWFKW7pvDKSKeUGaSYu+S6m8WhXhVlyMxOLHTQLAEYMHbb5UixYumPeNdttlE3fQaaJif1UJBTYqhcqpj5X2LWq+It/iLBeHMDX+kM3DDa9YNrbPX/uXDBfc7o+6qzhQkRJbiTBujD58OUNU/IwiL5I/Nhv0HgzfE16V7CqnYFDexygwiTTGArs/sLEp4/w4PNFCXSdw/ojnseBWrALoFiElgc5CfSNeLCZ2/pFkjmZlgCp7qwt5jyxw2iwbDFXk/J07NR7J+yMuSYEfB7Oa9X1wji0PuSb+Es63HYGJu8sWedO5ZC+gQT9H8KEXbGbzWavDcLIkbPNYHEDTEwlKOb0/RpJGfU/9ivtTSr+53Z96FQrByjo0Wuf8BzUo566B9vN8gnBXKlfa1PUdKBrboAlOqBrzcB0S5av/96PCmgrBp7fmrof4uh6m90V/JFRLpMIowFKyAAQJuNYdfkeY+/EhOUwFM7Z6n3f9BG0rO6hGGtt1nmj53oLnAxTNcKtfILtLue1Dcm1Lc2r77OqBU9HVbGc0kUrtchIJVncKrKv23bC4BOYFNJHyGmbW7dpUbIcIZ2Ww9Dtf4DkODWd/U+CapItsZFwyXcyZvc55TKSr4eKlFW65vLDRe+cdleCSKmeldP97IU2P7XzOk9yjBRx7APLX2231zsXlQvy9hyZI2gLgqvNTcZKxTTdNtY+4NIjAl2yZXblNSh17SX07r4ppiOA8rAzWkDzYWpCK+Te7ZypUmOtIZj66tS/5ecmddDW4MkWEnvaaSZ2aCAZgJvZc/ZEOC/rjoT6WliEloBG4QcyAPQHkqwWMSI6161ghqTsWnOgbHoZsKf1dNH54eE6wk94YuNH9kFWkK28MCE4FvoVTmJfYWizszVO2g4ML5DjJtASNW5EzUVOMdhi7SCQmLypU9Wbts2PgcgRyzdKSsgB/Z15R4A8w2xsLeXMxqabRmkgFlB1Cv14rYFN7GWUZ0IxHqsxP+W9BZGeSBCXdYA6FZn1ybDJSLYzkn5n3jw+JIKIuv8Ktau04ovz8H8FaEKnc9FXERfXp/Yw6VMV+y2Yo5+cnpn2x1PbToc/LeeSfOXYKekLnKiR97OH5AICGmlbaN+IfCYXAOrpHisXmaPPW+O0mTjWNhTYGJMLDJHY3xYwEgJmX8octRwYtLYmVWxTqgqEa98dWampgJpw9XbQn1xrwN7qepevPZq05SCow9sHOFL320ohRDRPyPekh941wy/+U+sDEVYAN2PmIi66R5yu0Wj4XvHF3FBlnDQnzynrcHn9eFFbB6Ui9WUqGSAFUpn8nWpES6Gj8XjwY7KjJ9cDaWukWahxIz6lc9MCSuaafaMU5chMwJ3BIlJweAa4hXHGEHEelnmImrI5ia5KHXcQppn3uKl+sbF/s2rfmZqqIVsK7GVbv3MpScqJNV2JFI7HF5hRgWPRz+cNqu7J8A8C2U1Z8A7Mkqhbt43wxlF0YTWEZdAJUFwXAbzhwwsvkx46xJ1FnxyMwgO6hVp0Etv67gfIm1jXyp5NtQ49CLHo0tGBm8YgSXyaZrruwKTCf6nQndO3BmRCB7BfYtkg3SxeLUdzLgab4LnowYr+NOeNG6vBcKoFsOXTZO8Tuv1PIf+ASU2dnOkkWBhuSUlIYhFIYTdRtNiONa6IScimwbRVnWPsVoldduW6UdJevFYb9rfF5eENIxbmMNCw9kXyAZM/GGz4GBJJjVU35QxIQrxi3TejcD/XLd6UCVQaipv+Et6JkRZlNI3Cetel/ZFI+M4BjkGrDOMz6NYTmdKgNQepAljQ6KIKEzmS6szxNEOz164ExQqCsb/F4BexsHZZz6hdrho4TGQ6NNZL7bfXe4rJK3gqwgFQL12t1t13emCXjW9zSwwgeVIyxG5dmNBmTd8ksJY/E8tNMnm54HdfcvTlXCXwk8dXFx2IhHrPQKNpOxO0uKT4NRS3DtSN2J8K98XAVR1WNLl554FBHeMkdK3Dm06L9guk95dEj2t376KS0rCel9iDkRlvWK9kPGiwrZppsV1zOrnKtTEBijGSyrmt8JCHXVRIl1IsXAlN4tvlNTz8hWx1ft6YKz36TE0rZ54hTPCMqEWwnJb5/3J2IWz1eV8lxDXWqszr8UsdsAQDjkexcbJfqFg5WzlxJ5ZWnGfzrEwBxtMVQgQBcXIy6BtmDXJ5YUyX4n1UuyL12DqjDABTWvwQ5y2iSKa/oilU7kbj+Nxw9y2ZI1rdI3ri3N4MOrkfgaL3eAdnbWuK6HVS2qmorA7hqkEO78HT4+R0lvzSEMxxcQqSeg/51FactCpaJMXKQELAyuIa4+dAIr171b0cP7IxGGEUaXkx52hV0lCGTFjvCB62XFH1uxHlhtmqvzxD/yL7TuV1lhZOTDi9q/ckYRSXOa1crDBRXN+/R2orQjDQVnt5TchttY5UyGdciAASyVOh/Vd0IsvwFNXxTm9oZWdgcVJgLKIfq53g/E4W35jZWYEBF2CJv7WdH4ShHPPFQ21I851JEBBizwnc2CudO8dFO0GhG1mo7ygKcCDIIul4QUaAoUN7nrLlcR42ZQy1GMtUp3bTDJ6BwJ4gDUKJHiNWPzSkBPUzABWuBSChvoWxUbDYb3NRQQqoYEvcp78Xdcb8LxJSaEkTzjRWp2Y2DOlrQRlsYM8AhoUVy+0Uyb3ZaHlzoZqyaE/OxdmgNi8bJlJ6fPIafAvax7WUQj4fQOmTtvndh0EjijwtsEKIQmOWMj8KfCifG++eZmF9VvK3pSjYjNMEKLhDFgYLK8m6qU9eg9WqrRGjTnIHT0Y5G01p4cKoLTLhH1gr38mY4yqk9Y3DlVHxOyGeleJkIMRAIQaLSC/HPP5P6uDsM/zwrWYHjWPRESBHnFeeMNytXa8XZiEcgeW9ANLnCdwyLpWf3OBSoyvD8TeYI+fwVAQpIO1ZsID98AIvaB0me4H+GZTBKDf3Lm/DIDBT9zolBznD+QZ85amtKbd6GXLGwdIfm1FYFmcMXkYFG8UNbDoUlTY5t2vNQqeN2aD7/jgZ1exfWfrJgq7dYkwEc+sEm14Mpx6M32slGhWfM//P+up0oTVqEdZUChW3V1JN4mJkk3jBqVZT09Y8E6d5uifL6CSZ/EFEI4l6yqeaF8+Al4uVBUiy4zSzKfNsszZHACuC3qsbC2Zkt3oIRtgNnoe4SP9u/BbAqic04mSEaZ/LFFCtchEyE11RJcJ1gOjAeuVEk7nYDM3x5wt088SXdKGzcy+tl6+UirAOIRxff8Xp5RtZ3H7+nxwSWNYdKkX6HFwmRRh1k3FR5AozWxq0lS2YhzEfBTZYdDFPdsPKkzc7uqI5nexJG26Hi1wi4EVCBqqRlryqCRRyL+EoakrAKZbSYwFAcntf8aQCmoEL1Q6e91UJ/hjjrkkrHkUtGVaIfarcwIvYB1OcvpNiIAo0kkv1DIC/DMFLFXLZfbXdpFh/igCIBkaK/9uTZSCzWjIO9Qtkwr7VhfaS45jhIBRMiaQ22tJDP+W8sulJvR5aT//TyzMnL7HwX+OeGlLOxkbB9ELmt7NI30weP4cWJmBeDWpWg/fAY82Saw3hqVlGki93tep/YuY8y8F4FB0y2/HlC5ULR/2n/8Fvuuci7G8Op1C30/lzPfjSsgin8eIJtus0vVMGfQlmeEpvG3XvPyi8GrT2GgttLP+WU77IoMKCWL/A30I1YU2GdwgOWVnIMM0pe3pB/SxfYPDUupPYlmkpoYetldO6wSuMhLAAHd27f6+CKjTLVq3tDLzPrE64cfojzU7vV3VtVFpDClSRkpxdnRwKm0wv1W01KDq9E9Pt1OlapcaI6JtyUGPytLdK6bb4obFq96RXPdhlUZgbB/i61sewErlOuKcyeiJds12D+V9JSlFY9tZD9lh5b6F3wjFbTcg2wbY1ncK8BjFWz8NYXrHZTEUpaopnJg7i4wxbHfQX4KXfHEvDQ9CM4EVM7EB15R3R69ZGJ22tugBMTFru0JsK/xRS+hrhsIDWzaXQqqxyKfubXcEw1oPQzBLavSatCoUZSJrstyq68EQraNbUulLUV/+Ek6NisjD6E+ST9lgck8GLE8Ncx2VlzttpU9oGbS2gymKGP2lyWmaUujVhWtWTu95peTDmiZSJPeeTnh1/nRadE381qVOGu3xKQhbR7UomwBEdGP1TUAzkGXsAwH9mjJQd2umBIp3sYeELvzLVIs8SAtInx//qJChNKTCRvf5YgAJ20tQTJD3hL1Hoj70GkY/6qgS+tQAldFr8EJh14P/uF9tKTJukwKk1iJ+a1CjA1RenYfzGoFCl5Vkqc4tgQb+bm/tVbkIcoFTQLJLz7gXiwQynj56WiYLKrBU3GUNa3P8SbbXtzd2wgtJpBvf1e7LMWJJKH6z9EWJYkpR9yvefbKgmt2x9D2/HlS+qU1pbUwry2fLSAi7B37kA9g+7DC9rFL0VCC/TwVlo6gBDcs4j5418v4THC8HxXnR5JQEM8p79JKhW2GtY4nQHZ1u0baqJNVBXJNLe1wJ4RTG7edKaqLw+j9h1O2oBElCxbLrjktv8Tnma9HG8pCfY/RJJnHPmxyfHeS7dY6cIa6WGaetcc2sh7GMPeABQxaupXX95ERGBCj93elgKUMTKkZ9FFPpPWqJ/StBUEZ5L5YBTzVzumTIf+nEGOhy6DoSQ3wX5lrv09laTkXIlj/doT5x/0IWiRYmza8wCHZC+Qw4RHMCAA8y/IBCbSMM96Mt7CS423g/Gs9jI/yQY5GpFyGdWN54mR9KGSI8vLjdq267dcTL40HOUlL2/YDgXeqKsW9DywSuolTw2A9KlyG+pr+8APxLD6johdASglrjGYOXEIlM2u5mtF0HrPHEww5q5NLbjYmQJ6IVQxF0HFjupfEpdeLjcbEhi1J/E3o31WBwsjFK1022n5+5/li0OVaG1i92AlImoMUx9/+nM+NR7YqvBOgx4bW5YTo+0kDPpPArZa8U92vvjMk7z4V1LmTUfcBhEMxu4m+OvZnZPH57FObKo1DN4v8uFhmqBuIQ8Y7vxvLMmzznjIFlWj1Y5P7LlJwGYAQiFsZl42JftidICLldGoE1Tm29Xgc4FzkO/8XTzQwqEgYo+wEhQSNANix7MJJcwprPRT5OgyfLhCZgvlD6u0YaoBJpR/eDIKNW+W9TDT31JUxAOC8SnubKTXfG3JzzXtQpluYgI+HW3oFdjhNI2OapLBW5nDuMLf5MB17pNRW4FtJYGiXafTVBsVvnbSn3TiK8Bri60xhGuT4Z3cC9uy27B5lizwEGs+RlxAgEqAVC3KHym31yGUa+W/7DfRA/UY67fImNLCabkpDV9LXhWiYw7IGX8tzqZZgcTz4SsH3HdZvQi3p8jOsTps6qQIy4VX3hxk77k3zAsnHa212iVyxqNIxu/aUeEql8faT6IiALWpKMHLhGxX76hw4wW8njav//gRATn5i9/FKaJdDSwuhAYoVDbl1po5AXiPWYZzhwNTWY8Nie9nefLGUOhZoqfjvfjLDNfQML7cDyTofioC6mbwasu8o1OQbqwUEhbthSnPXcTsAVAhL6q1+AfOuhRHptQ6U5OLthiNg2gez4MiLg90aTJGcHT2kNSE5UJi6EGXnZYXb69MUZQPGN9+8SVxGhz+lkmtayu0oie95Wml89su8FsIgEmgnfHHSOh2JpB68yYICEIrscZSPiBwSWcFU5r7MWOx/C5nje4bTzEoXEOwFYLETDyKb934sCc/SIxdbniZEh4fzGdsgtA30lErj69/ZskCQUYYB74Wl6WaKR4xiaNcM86wBkmoqfM655J9t4AAxvz+I7vBSZHjvLHpZ3iGUruYODsT1/C2Q9qi0TXztqFHwyr7zPx5FW8cfp7MzBKbINx0CBiJkntk0g7b3LysGwWlSiO2E2M7bWIhRGO92Mz24rtXRuxmiTSeRvR2amaTjQ7g1qzAbz+jYje8h4+CObUNpiW7AYjVfflVA63Q/W+abdd0Zuk7oeRZ5jgv6KJaJxADAX6SLDTdrfSRCfRLw0hKUm+znt1bMnoI3sQRgytiQE4JBKXnowlDhHOlmQUGqvhrgC3rII2TaBx0yNO17jXQtv6oI2LeTnISDUZEB6WW0evlT28vvFl+YQqhEk9RHLpZnQKBFHpCWpwPRsFEKWB6PuUfrlQeiVybsdjWt+Kwcc4rULSJ8UFinmBsYYy11kAtO7CWDrLEwBV1gnibqYEFHssEjrRwAKpr0Hvc/3dWogFvOvlZaj6axVjE9LIqtfaAGRJ31RosUrCxsdRHe4AxeaoGyad/BgrMNmFX1EAqRecwfa+LxAlWRcN+zOJN8DbocicDTBoq5VGQNrBZSTtbMbU10/8fqBxEuAHThFIgFHbUshnEuUlV0jLsKc9xCfqK8mfkzwAlnALx4dlYTAmwmKC3vUXYuCuiIv6R3KFJ8xwwzfm27E66ctBPBKnn910Tgc0kD3cnRzwwAL9sOA4hD4Fs/nkYbf32P4Gf18ALdX0JVSel37DPuqxfuN8z85prwAIxgE26ggS4GMeFb2vn7ZitHPDMN56CXNezRWBI9R1VMojL4K1wICeDViMxP0DjmfKWjFeIs/37hpd1AfXle/DFexPENL9VauZPTUmW9/31YLMN3S1/djp0WkXqVtFcnPCuiOXMrrQjXpFc34V8ThP/EJnqAB5hiJJDCnG2AyKUWZ15oiiarjjg4BLKQ/OOvC8pOTpEFgZRvvYc5NvHc18WbA62g8WUg7Vy2A0A9HdtjOlWnKJnfzPHecGUTvgwT93IvLH4EDKEnxs1Pc0Te2y+EMmkI2W8U7kzISb2MqDhfCElWJBXqWSqSkBUKbj0uAleG8xck4PRj6mzjHiCwqP77CB+e2G7cNVUUJqHcvFYRsf46wJClRQTHFocCxIHMRPbGgOA6LAhUJSvddQf0mlIZe/4komYViKVpiBZF9PDMePk+uPwe1U2z6ApagqHLhG9MS6f4uBpepwG5GuOKdGh2X2L5zL3CIj+t0sBfA+oxGoM5Sg9KbP4+OgE+ag6YCCD61LGHnny1P7vf7Ym12pQ+oSHTTqAeFgoVgRdhkk0fDis69urM63AdFlbUpU9HUwHnj21etnS2N1k3zB84BMFRANmIcTKgGQe3F057cKTsAMKPFw0o5YKNQcb84EBppBkDBvGIT2j94RQk2zUYfwCEnPomIDSg3zCl92tXWWK8xrGoU8tvKCOEDJ3vrmEBabMcGruYMLlc8p2F5ITBnk6jX2MhhBCL9xMB3Y27D7DxVBumj9tdMz3VkBc5N8ROzm7vLd7aRlaI480Mh8sYGVEHoHu1qnEusecSU8QJE3yQfpT4GgH18CyFbogD/uf38Of3rN33313gak+KhJBf4imPFM2pw3x8F35zefdHq7o+6AGOUHgv+R4bAMcGNrcCDweSMzKEweHSvri9NR7SBWuniJPqfohDt7/L8iXO1cxO9Tepxq/XA7aJA3dY3nQF0i0Tat6ESgNtISDo80JsYNeWbYRP4X2N5/RR8yq1SRg8kthbXH3ZoMJX9SA9XQ8iqhotppjvPqwZw+ZESDpmt8tifkZcvPJZ3kjFIYkD65UNz1T/r3z4Hv+Q6qRyIlogJFppvA2PlJaKdo8QiQCqqNwgHufbf6Qv/8QVudb71CDtMHAchLn1R9kimIx6Glp/8P2bt1wzZ4Ts1d1C7XGrXM3b83d3ZsAfrA0UW8aZ9HfZbNVAczRmoUj1u0mUJrglw8IZzGJyU3O3HMGVaWvAQcm8aBKLh+2crfprDYb2q7VAxP1s4nRSVubHrmRZ5tJ+wKggaezu/nhObyz3F7aPaXch1BWakEvXxxfExaDMifkDs6bPXfYD1HdRYJ9yjMcEw2p23ubCAMGdhgQzctwY8L7FzrHSKPiSxOs2O1mXNtFBEQT6b9o/qlci2iXQqey9Gi4HOHbwEsMcrwzAZ0BvHa0ah89Edg==</content:encoded></item><item><title><![CDATA[第三方收发微信消息主流技术小结]]></title><description><![CDATA[一篇水文。最近因为需要去了解了一下如何通过第三方技术收发微信的消息，以至于实现一些更复杂的功能。由于微信实际上并没有开放这方面的 API…]]></description><link>https://maliut.space/p/wechat-crack/</link><guid isPermaLink="false">https://maliut.space/p/wechat-crack/</guid><pubDate>Sun, 03 Mar 2019 21:33:36 GMT</pubDate><content:encoded>&lt;p&gt;一篇水文。最近因为需要去了解了一下如何通过第三方技术收发微信的消息，以至于实现一些更复杂的功能。由于微信实际上并没有开放这方面的 API ，所以通俗来讲，就是研究了下如何破解微信的体系。&lt;/p&gt;
&lt;!--more--&gt;
&lt;p&gt;大体的思路也比较好理解，就是通过微信的各个端入手来模拟。主流的做法大概有以下几种：&lt;/p&gt;
&lt;h2&gt;Android 端 Hook&lt;/h2&gt;
&lt;p&gt;原理： Android 中有著名的 Xposed 框架，可以 Hook 任何 App 的方法，在调用前后插入自己的逻辑。&lt;/p&gt;
&lt;p&gt;对于收发微信消息来说，收消息相对比较简单，因为可以通过 Hook 数据库插入的方法来实现。而微信的数据库使用 wcdb ，表结构为了稳定也不会轻易变化。也就是说，只要能找到数据库插入的操作，稳定的 Hook 方式便可以一直存在。但是 Hook 发消息就没那么容易了。发消息是一组复杂的方法调用，当涉及到消息类型为图片、语音等复杂类型时还会更为复杂。找到发消息的方法已经是难事了，更何况混淆过后的代码还和天书一样，没有十足的耐心根本找不到线索。更甚，混淆后的方法名每个版本都不一样，可能你辛辛苦苦破解了一个版本，到了下一个版本，哪怕源码做了一丁点改动，你也要花费很大的工作量去适配。&lt;/p&gt;
&lt;p&gt;从市面上来看，使用 Xposed 破解微信的主要用途还是在于消息防撤回和一些 UI 上的定制化，对于发消息的需求并不算多。另一方面，针对发消息的 Hook 开源代码也比较少，且不太成熟，有些人在兜售成熟的解决方案，尚不知道是否有用。尝试了一些开源代码以后，我找到个 &lt;a href=&quot;https://github.com/Blankeer/WechatBotXposed&quot;&gt;WechatBotXposed&lt;/a&gt;（基于微信 6.6.6 版本） 还是比较靠谱的。&lt;/p&gt;
&lt;p&gt;由于使用 Xposed 需要 Root 手机比较麻烦，这里也提供了一个尝试代价小的方案可供试玩：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;手机安装 &lt;a href=&quot;https://vxposed.com/&quot;&gt;VirtualXposed&lt;/a&gt; 。&lt;/li&gt;
&lt;li&gt;VirtualXposed 安装微信 6.6.6 版本（旧版本的微信可以通过豌豆荚安装，这不是广告）&lt;/li&gt;
&lt;li&gt;VirtualXposed 安装上述插件&lt;/li&gt;
&lt;li&gt;启用插件并重启 VirtualXposed &lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&quot;/379b5adaa0b81c21c7de80b245fe2520/wechat1.gif&quot; alt=&quot;Demo&quot;&gt;&lt;/p&gt;
&lt;p&gt;如果想进一步开发，也可以看&lt;a href=&quot;https://blankeer.github.io/2018/05/09/%E5%88%A9%E7%94%A8-Xposed-%E5%BF%AB%E9%80%9F%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E7%AE%80%E6%98%93%E5%BE%AE%E4%BF%A1%E6%9C%BA%E5%99%A8%E4%BA%BA/&quot;&gt;这篇讲 WechatBotXposed 的思路的文章&lt;/a&gt;，学习如何反编译分析微信的方法。&lt;/p&gt;
&lt;p&gt;不过，对于这种破解方式，微信的打击还是比较厉害的。去年年中微信封禁了一波使用 Xposed 的帐号，据称是为了打击世界杯赌球。根据网上能看到的传闻，微信可能会读取手机中已安装应用的列表，判断手机是否被 Root 、是否安装了 Xposed 应用。也有一种方式是判断方法的调用栈中是否存在 Xposed 相关。当然，微信也存在一套行为分析的系统，会通过你登录频次、消息发送频次、设备信息等因素，判断帐号是否存在异常行为。&lt;/p&gt;
&lt;p&gt;个人认为，对于这种方式，微信还是比较容易判断出来的。收消息暂且不论，对于发消息，本来是需要用户手动点击发送按钮，而现在一定会有某个函数触发了发消息的逻辑，一定能通过调用栈判断出来。事实上，我用这种方式玩了两天以后，微信就限制了我的帐号在低版本上的登录，必须让我在新版本上才能登录了。&lt;/p&gt;
&lt;h2&gt;使用 Android 上的辅助功能&lt;/h2&gt;
&lt;p&gt;原理： Android 上的辅助功能，原本是给残障人士所使用，帮助他们更好地使用手机上的功能。但我们也可以利用这些功能来做到辅助读屏、模拟点击的功能。&lt;/p&gt;
&lt;p&gt;获取屏幕上的控件或点击对应的按钮，需要我们知道界面元素的资源 ID ，所幸这并不需要什么高超的破解技巧，只要使用旧版的 DDMS 对手机界面进行 Dump 就可以了。虽然每次微信升级后，由于混淆的原因，资源 ID 会发生变化，但重新适配的成本也比 Xposed 方案低的多。再退一步讲，即使不知道界面元素的资源 ID ，也可以通过按钮的文字等来区分，这样就完全不需要破解或 Dump 之类的工作了。&lt;/p&gt;
&lt;p&gt;辅助功能的适用场景正好和 Xposed 方案相反。对于发消息，它的实现非常容易，只要你能找到正确的发送对象，接下来输入框和发送按钮都是固定的，直接模拟点击即可。在 Github 上也可以找到&lt;a href=&quot;https://github.com/Clearlee/AutoSendWeChatMsg&quot;&gt;现成的实现&lt;/a&gt;。但如何判断收消息就困难了不少，因为你很难去监测收到消息这一不是我们主动触发的行为。在网上找到了两种不同的思路，其一是&lt;a href=&quot;https://blog.csdn.net/u014651216/article/details/52525009&quot;&gt;通过监测通知栏的变动&lt;/a&gt;，其二是&lt;a href=&quot;https://www.cnblogs.com/cxk1995/p/6366273.html&quot;&gt;通过监测聊天界面的改变&lt;/a&gt;。但两种方式的缺陷也很明显，前者通知栏的推送并不稳定，同时多条通知处理起来也比较麻烦；后者则必须停留在某人的聊天界面中才能监测到。&lt;/p&gt;
&lt;p&gt;也正是因为这样的特点，使用辅助功能的玩法一般用于实现各类微信群发助手。群发助手天然符合它的长处：一方面只管发消息，不管收消息；另一方面，对于所有人发送消息，也避免了判断发送对象是否正确的烦恼。&lt;/p&gt;
&lt;p&gt;这种玩法最大的优势在于完全合法，无需考虑被微信打击的因素。但缺点也很明显，模拟点击的原理使得你不得不为操作加上一些延迟，一些从代码层面来看很简单的操作（比如获取微信号 etc）也需要绕很大的圈子才能做到。同时它受外界影响极大，一旦手机出现些不可预知的卡顿，或其他界面弹出，或同时交流的人数过多，界面变化频繁时，自动执行的操作就会被打断，甚至产生消息发错对象的尴尬。这使它注定只能作为玩具，而无法成为大规模商业化的应用。&lt;/p&gt;
&lt;h2&gt;使用微信网页版 API&lt;/h2&gt;
&lt;p&gt;原理： Web 即意味着不设防，相比于其他客户端， Web 永远是防御力最薄弱的那个。另外 Web 并不是微信的主打方向，因此迭代速度较慢，版本适配难度也较低。只要破解了 Web API ，就可以模拟登录网页版微信收发消息了。&lt;/p&gt;
&lt;p&gt;这个方法实在没有什么好说的，原理简单粗暴，以前的 Web QQ 也遭遇过这样的毒手。现在基于 Web 微信的机器人程序已经形成了一个庞大而成熟的开源社区，有着完善而优雅的 RESTful API 、命令行工具等。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/chatie/wechaty&quot;&gt;&lt;img src=&quot;/128ea3b4800b6e243af1dc52a3d99567/wechat2.svg&quot; alt=&quot;Wechaty&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;相比前面两种方法，我认为这种做法是目前最成熟且具有可行性的。虽然这也属于破解的范畴，但是由于 Web 端的特定使然，微信并不能做出什么很有针对性的防御。不过微信并非没有采取措施。正如 Web QQ 现在已经被废弃一样，微信也一刀切地禁止了所有新注册帐号的 Web 端登录权限，坊间也一直有微信会取消 Web 版的传言。但即使微信不会取消 Web 版，光是新注册帐号无法登录这一举措，就使得这一方法未来的潜力大打折扣，沦为部分爱折腾的存量用户的玩具。另外，微信的风控体系，也会对那些明显超出频次调用接口的帐号进行临时的封禁，以阻止用户的为所欲为。&lt;/p&gt;
&lt;p&gt;除了以上提到的几点， Web 版本身的功能也是有限的。除了简单的收发消息，进阶的功能比如收发红包、朋友圈等并没有相关的 API ，对于野心更大的开发者来说是个局限。另外，由于 Web 端走 HTTP 协议，对于收发消息的稳定性会比 Native 端略低。&lt;/p&gt;
&lt;h2&gt;其他途径&lt;/h2&gt;
&lt;p&gt;上述提到的三种是目前的主流技术，但可以看到都有比较大的局限性，因此也有不少人在探索新的解决方案，例如基于 iPad 版和 PC 版的破解。当然，也曾见到技术实力较高的团队，通过自行定制 Android ROM 的方式，提供软硬件一体的解决方案，对微信做大规模的 Hack 。不过以上方案在网上都鲜有公开的资料流出，一方面是为了低调防打击，另一方面也是将其作为商业化的手段。&lt;/p&gt;
&lt;h2&gt;结语&lt;/h2&gt;
&lt;p&gt;作为普通用户的我们难以想象基于微信这一看似封闭的 App 衍生出了多大的产业链。朋友圈的微商、公众号，还有现在的小程序和小游戏，已经完全可以支撑起一个像样的创业团队。也因此，对微信的破解成了一件十分有利可图的事，吸引了不少人前仆后继。对于时长脑洞大开的开发者如我，自然希望微信可以像 Telegram 那样开放出更多的 API ，以便把更多创意落到实处，但也理解关系链之于微信的重要性，明白这几乎就是天方夜谭。只是，对于那些把身家性命放在微信破解上的公司和开发者，就好像空中楼阁，被微信反手就能玩死，也未免太可悲了。&lt;/p&gt;</content:encoded></item><item><title><![CDATA[如何寻找 YaHaHa ？]]></title><description><![CDATA[我第一次发现 YaHaHa…]]></description><link>https://maliut.space/p/how-to-find-yahaha/</link><guid isPermaLink="false">https://maliut.space/p/how-to-find-yahaha/</guid><pubDate>Tue, 05 Jun 2018 20:45:16 GMT</pubDate><content:encoded>&lt;p&gt;我第一次发现 YaHaHa ，是在初始高地的沼泽。半截中空的木桩通过铁链连接着沉入沼泽底部的大铁球。“铁球的大小，似乎刚好可以立在木桩之上”。刚学会磁铁能力的我对周围可以操作的事物充满了新鲜感，恨不得将它们通通把玩一番，于是怀着这样近乎恶作剧般的心态，我吸起铁球，放到了木桩之上。&lt;/p&gt;
&lt;p&gt;&quot;Ya-ha-ha! You found me!&quot; 突如其来的场景吓了我一跳。&lt;/p&gt;
&lt;!-- more --&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 810px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/04d82386be02916f68007c8602b8ae0f/a2510/yahaha1.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 56.15763546798029%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAgAB/8QAFwEAAwEAAAAAAAAAAAAAAAAAAAECA//aAAwDAQACEAMQAAAB06MEp1H/xAAaEAABBQEAAAAAAAAAAAAAAAABAAIQESIy/9oACAEBAAEFAql3IGV//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFREBAQAAAAAAAAAAAAAAAAAAABH/2gAIAQIBAT8Bqv/EABYQAAMAAAAAAAAAAAAAAAAAAAEQIP/aAAgBAQAGPwKAv//EABoQAAMBAAMAAAAAAAAAAAAAAAABESEQMUH/2gAIAQEAAT8hTCrudOGiVxdfeP/aAAwDAQACAAMAAAAQ7w//xAAWEQEBAQAAAAAAAAAAAAAAAAARACH/2gAIAQMBAT8QMZv/xAAXEQEBAQEAAAAAAAAAAAAAAAABABEx/9oACAECAQE/EB9jV//EABsQAAMAAgMAAAAAAAAAAAAAAAABESFBUWFx/9oACAEBAAE/EGNzpmdcU9E5CKbhpqOCsL2tZpH/2Q==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Yahaha！&quot;
        title=&quot;Yahaha！&quot;
        src=&quot;/static/04d82386be02916f68007c8602b8ae0f/627f4/yahaha1.jpg&quot;
        srcset=&quot;/static/04d82386be02916f68007c8602b8ae0f/efcb5/yahaha1.jpg 203w,
/static/04d82386be02916f68007c8602b8ae0f/02e66/yahaha1.jpg 405w,
/static/04d82386be02916f68007c8602b8ae0f/627f4/yahaha1.jpg 810w,
/static/04d82386be02916f68007c8602b8ae0f/a2510/yahaha1.jpg 1000w&quot;
        sizes=&quot;(max-width: 810px) 100vw, 810px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;br&gt;
&lt;p&gt;我第二次发现 YaHaHa ，是在路边的峭壁上。峭壁上的三个小立方体组成了一个缺了个角的大正方形，而另一个小立方体则落在地上。“它们正好能拼成一个完整的正方形诶”，我把小立方体放到缺了的角上——又一个 YaHaHa 。&lt;/p&gt;
&lt;p&gt;YaHaHa 的学名其实是克洛格，是《塞尔达传说 - 旷野之息》中的一种收集要素，它遍及整个大陆，有 900 个之多，但却都极为隐蔽，若是匆匆赶路，你完全不会意识到它们的存在，但如果你感到地图某处有说不出来的不对劲，往往就藏着它们的身影。&lt;/p&gt;
&lt;p&gt;随着游戏的进行，我寻找 YaHaHa 越来越熟练：见到三棵树就会去摘苹果，见到荷叶就去跳水，爬到山顶看到石头就会去搬一搬。《旷野之息》很好玩，寻找 YaHaHa 也令人乐此不疲，只是，这过程中再没有多少思考。&lt;/p&gt;
&lt;br&gt;
&lt;p&gt;再一次受到 YaHaHa 的惊喜，已经是游戏的后期。主线早已通关，而神庙也都找全。DLC 中有件“克洛格的面具”道具，能提示你周围还未找到的 YaHaHa 。有个同学告诉我卡卡利科村的村口响起了提示，但无论如何也找不到。我在周围上蹿下跳了半天也未果。&lt;/p&gt;
&lt;p&gt;周围的一草一木，已经是再清楚不过了，它到底藏在哪里呢？我不得不放弃了徒劳无功的搜索，转而停下来思考。突然我灵光一闪——村口大门的横梁上有村子的标志，而四周歪歪扭扭地射了好几根箭。我第一次来到这个村庄的时候，箭还是稀有物品，我甚至还试图爬到上面去把这些箭都拔下来。现在想想，一个与世无争的村子，大门上被射了好多箭，这难道不奇怪吗？&lt;/p&gt;
&lt;p&gt;正对着中间的标志射了一箭。&quot;Ya-ha-ha! You found me!&quot; 熟悉的场景应声而出。&lt;/p&gt;
&lt;p&gt;又一次，同学告诉我海利亚大桥上有个 YaHaHa 找不到。同样地来回绕桥探索但一无所获。我注意到桥洞下放着个小树枝。这个小树枝，其实我早已发现，但一直没放在心上，毕竟，满地图捡武器的塞尔达里，地上有个小树枝也是再正常不过的事情。然而再仔细一想，在茫茫大湖之上，全是石头做成的大桥，却出现了一个小树枝，也未免太突兀了吧。&lt;/p&gt;
&lt;p&gt;捡起树枝，果然又是熟悉的场景。&lt;/p&gt;
&lt;p&gt;尽管那个时候的我早已对游戏的各种机制都烂熟于心，见怪不怪，但当 YaHaha 蹦出来的那一瞬间，我的心还是不由自主地震颤了一下。&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 810px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/5bca02f30809210a9e733bd052a0e60f/eea4a/yahaha2.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 56.15763546798029%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIDBP/EABcBAAMBAAAAAAAAAAAAAAAAAAABAgP/2gAMAwEAAhADEAAAAZI6ZTI0A//EABcQAAMBAAAAAAAAAAAAAAAAAAABIRD/2gAIAQEAAQUCINUef//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABYRAQEBAAAAAAAAAAAAAAAAAAAREv/aAAgBAgEBPwHSv//EABYQAAMAAAAAAAAAAAAAAAAAABAgIf/aAAgBAQAGPwIRP//EABoQAAIDAQEAAAAAAAAAAAAAAAERABBBITH/2gAIAQEAAT8hQ2ciO9FQ7tf/2gAMAwEAAgADAAAAEOA//8QAFxEAAwEAAAAAAAAAAAAAAAAAAAERIf/aAAgBAwEBPxBayH//xAAVEQEBAAAAAAAAAAAAAAAAAAAQEf/aAAgBAgEBPxCj/8QAGhABAAIDAQAAAAAAAAAAAAAAAQARITFBYf/aAAgBAQABPxBQoD7GxVHL3AdC4rMocOoAgxYLhqf/2Q==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;海利亚大桥&quot;
        title=&quot;海利亚大桥&quot;
        src=&quot;/static/5bca02f30809210a9e733bd052a0e60f/627f4/yahaha2.jpg&quot;
        srcset=&quot;/static/5bca02f30809210a9e733bd052a0e60f/efcb5/yahaha2.jpg 203w,
/static/5bca02f30809210a9e733bd052a0e60f/02e66/yahaha2.jpg 405w,
/static/5bca02f30809210a9e733bd052a0e60f/627f4/yahaha2.jpg 810w,
/static/5bca02f30809210a9e733bd052a0e60f/78959/yahaha2.jpg 1215w,
/static/5bca02f30809210a9e733bd052a0e60f/eea4a/yahaha2.jpg 1280w&quot;
        sizes=&quot;(max-width: 810px) 100vw, 810px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p class=&quot;metadata&quot;&gt;海利亚大桥，游戏中 Yahaha 密度最高的区域之一&lt;/p&gt;
&lt;br&gt;
&lt;p&gt;作为在同伴中，收集个数最多的那一个，我也时常被问到该如何寻找 YaHaHa 。可是，在最开始时，我甚至不知道 YaHaHa 的存在，我去做那些事情纯粹是因为觉得有趣，觉得“它们应该是这样的”。而 YaHaHa 的出现，就像是玩家与游戏设计师的会心一笑，是设计师告诉玩家“你想的没错，恭喜你发现了这个小彩蛋”，是玩家与设计师之间跨越时空的心照不宣。但后来，收集 YaHaHa 成了目的，而我们也似乎逐渐陷入思维定势，觉得似乎 YaHaHa 就只有这么固定的几种，而忽略了 YaHaHa 设计的初心。&lt;/p&gt;
&lt;p&gt;海拉鲁大陆 900 个 YaHaHa ，我踏遍世界，收集到的不过三分之一。想必，还有不少就隐藏在了那些被忽视了的非类型化的去处。&lt;/p&gt;
&lt;br&gt;
&lt;p&gt;我觉得 YaHaHa 的设计其实就像是整个《旷野之息》的一个缩影：没有强制性的任务要求，也没有地图上明晃晃的提示点，它需要的是你像孩子一样敏锐的观察力和旺盛的好奇心，凭着本能发现这细节中隐藏的奥秘。而在网上无数玩家对《旷野之息》的溢美之词中，也都像个孩子一样倾诉着自己神奇的小发现、独一无二的探索旅程，仿佛三天三夜也说不完；也都不约而同地提到了这作是现在市面上无数套路式的、 checklist 式的所谓开放世界游戏中的一股清流，甚至于，重新定义了“开放世界”。&lt;/p&gt;
&lt;p&gt;当然，天下苦 checklist 游戏久矣。无论是开放世界游戏中的任务点、收集点，还是平日里氪金手游中的日常周常等等，都是通过激发玩家的强迫症，而异化了最初玩游戏时那种纯粹追求快乐或是放松的心情。但想要让玩家以纯粹的兴趣和好奇心来驱动游戏却并非易事。而《旷野之息》的方方面面就是这样有机地结合在了一起，为这个问题交上了一份满分的答卷。在游戏伊始，当我操纵着林克从昏暗、窄小的复苏神庙走廊中奔跑出来，我和大多数人一样，被面前整片广阔的大陆所震撼。而更为震撼的是，我在游玩过程中慢慢发现，这映入眼帘的整片大陆的整个角落，完全没有空气墙之类的障碍，只要你愿意便都可以涉足&lt;del&gt;（严格来说迷雾森林部分地方还是不行。另外想特别吐槽下 GTA5 ，虽然建筑这么多，但基本上都进不去）&lt;/del&gt;。而经过了精心设计的塔、神庙以及地形的布局，让玩家时刻都能发现视野中新的兴趣点，根本停不下来。再加上早已饱受赞誉的物理、化学系统带来的涌现式的玩法，以及简单且非强迫的主线等等，一切的一切都很好地服务了游戏的核心乐趣。&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 810px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/00c04c9a5e7d1eb19e951ce8169e5e1f/29007/yahaha3.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 56.15763546798029%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACdUlEQVQozw3O207TYAAA4D6cl8ZEEyOC2UbX/mvXfz2vO3Rt19ParS3deTA22BgDXeSMERMUwkDURGNCSCQmXhj00njrnbzAlw9RunvK4rbc2sq3duTObra9n2/vy4uH6vJrffXYWjt1N6bei4vm9ofeweVw7/zw5NPHL19vvl3//vkd0RuDTGXVX9kIBpvBcLKwtlUd79Q39zqTg97Wq8HB29Gbs/HxdHd6MTk6cesvzy6mtz8+//119e/PDYLDLOC9jN3JOd1ye2DV+lJ5qIVDszHSG+u13ri9NjGaz5XquFhbF/Vh0Jq8f3d0e31+dXmKPJzBZ2MkoEWMylNpG5N8LFuPZ+qg0JwVaxGpCQpLgjuE9irr92VvIFdGRjCq1MZebQN5jBIzODVHQIzlAS9C1QSmT7shHzTIUpW0q5RbE8J2ttnNNLqFdq/Q6Oeqy1q9Z7VXkEiaj2TScTkPDS1l6oJv0UGJcG3ac2DZhmWTXnCh5zDVChv6XOilwyAbhm6vay91EMxIJRwBM0TSEQknEy0xhMMRJZGqpAlXRFUhrvOYweEmDywR1wVo5Ugjy7p5rWEhhJPETRgvQmAzcYONm3cWg9ksXuJwhaaLDOXyuM3GiilUY9CiCAwJGCLQBFxnENym5zVuXuNRg4tpMFGGmJ0ibSplEqkcyFmpnAeVQFJaWdLhE4aYsATMpEmHTRgccpdBDSGiQsInCJ+OyklSBlwxLqrJtJGUTEiqc3HxKZ+H/qKuN9WkJUQUEjUI3CEQ0hWJShKzCeCSURVEmTlORVMSEPM0p8cEa55UZp4kHty7/0i3pVZfDrpaQueeZSi0CP4D+MRUVcFqKgIAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;BoTW&quot;
        title=&quot;BoTW&quot;
        src=&quot;/static/00c04c9a5e7d1eb19e951ce8169e5e1f/d7542/yahaha3.png&quot;
        srcset=&quot;/static/00c04c9a5e7d1eb19e951ce8169e5e1f/2efce/yahaha3.png 203w,
/static/00c04c9a5e7d1eb19e951ce8169e5e1f/1d180/yahaha3.png 405w,
/static/00c04c9a5e7d1eb19e951ce8169e5e1f/d7542/yahaha3.png 810w,
/static/00c04c9a5e7d1eb19e951ce8169e5e1f/d56b5/yahaha3.png 1215w,
/static/00c04c9a5e7d1eb19e951ce8169e5e1f/29007/yahaha3.png 1600w&quot;
        sizes=&quot;(max-width: 810px) 100vw, 810px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p class=&quot;metadata&quot;&gt;是的，目之所及之处，你都可以去探索、去涉足&lt;/p&gt;
&lt;br&gt;
&lt;p&gt;关于《旷野之息》的设计经验和哲学，网上早已经有一大把分析文了。我也不是专业的游戏评论者和开发人员，无意再深入地探讨下去。我只想谈谈我自己的游玩感受。《旷野之息》，它真的是那种，那种很少见的那种，可以让人完全沉浸的游戏。我相信大家但凡是游戏玩的多了以后都有这样的感受：每遇到一个新游戏，便将它归为某一类，然后用之前在其他相同类型游戏中学到的经验套上去，边玩边开始分析哪里设计好、哪里不好。基本体验完一遍核心流程，做出个“剧情 x/10，画面 x/10，音乐 x/10，总评 x/10”的套路评价，就将其盖棺定论了。这其实是人类进化过程中发展出的一个能力，能让我们以更快的方式上手、了解一件新鲜事物。但是，总觉得与游戏间多了一层距离。而《旷野之息》则不然，它就像有魔力一般，它让我忘掉了各种条条框框的设计原理，忘掉了吃饭，忘掉了睡觉，无视了周围的一切，仿佛我真的穿越到了这片世界之中，或策马或御风遨游在大陆的各个角落。而又在事后与他人讨论起游戏来，才猛然意识到游戏中许许多多的理所当然，其实是有意为之，大巧不工，不禁慨叹设计的精巧与细节的充沛。&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 810px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/f8eb2e42119a0bf15ab78f6f71a058ea/c7398/yahaha4.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 55.66502463054187%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAQBAwX/xAAWAQEBAQAAAAAAAAAAAAAAAAACAAH/2gAMAwEAAhADEAAAAZZzrNDwsG//xAAbEAABBAMAAAAAAAAAAAAAAAACAAEDERASIf/aAAgBAQABBQIJKTE1b4tDwf/EABURAQEAAAAAAAAAAAAAAAAAAAAR/9oACAEDAQE/AYj/xAAWEQADAAAAAAAAAAAAAAAAAAAAARL/2gAIAQIBAT8Btls//8QAGBAAAwEBAAAAAAAAAAAAAAAAARAxACH/2gAIAQEABj8C7FAxv//EABsQAQADAAMBAAAAAAAAAAAAAAEAESExQWGR/9oACAEBAAE/IUwBHkVYCU6+kcJYy8qcBP/aAAwDAQACAAMAAAAQRw//xAAVEQEBAAAAAAAAAAAAAAAAAAAAEf/aAAgBAwEBPxCUv//EABURAQEAAAAAAAAAAAAAAAAAABBh/9oACAECAQE/EKH/AP/EABsQAQADAQADAAAAAAAAAAAAAAEAESFRMWGB/9oACAEBAAE/EDgeUGE+zGeeVvJ2B0UThkKRQtBCCAWW57Z//9k=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;沃托里村&quot;
        title=&quot;沃托里村&quot;
        src=&quot;/static/f8eb2e42119a0bf15ab78f6f71a058ea/627f4/yahaha4.jpg&quot;
        srcset=&quot;/static/f8eb2e42119a0bf15ab78f6f71a058ea/efcb5/yahaha4.jpg 203w,
/static/f8eb2e42119a0bf15ab78f6f71a058ea/02e66/yahaha4.jpg 405w,
/static/f8eb2e42119a0bf15ab78f6f71a058ea/627f4/yahaha4.jpg 810w,
/static/f8eb2e42119a0bf15ab78f6f71a058ea/c7398/yahaha4.jpg 1154w&quot;
        sizes=&quot;(max-width: 810px) 100vw, 810px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p class=&quot;metadata&quot;&gt;沃托里村，依山面海，地图角落的世外桃源，唯一没有主线的自然村庄，也是我最喜欢的地方&lt;/p&gt;
&lt;br&gt;
&lt;p&gt;我很想用寻找 Yahaha 就是寻找玩游戏的初心，重塑看世界的方式这样既点题又漂亮的话来结束这篇文章。但在无脑吹完这个游戏以后，总还有一些话令人不吐不快。回想起在初始之塔上我举目四望，心情是难掩的激动。光小小一个初始台地，就让我产生了数不清的惊喜，那地图上初始台地以外的那么大那么大无边无际的黑暗之中，还有多么无尽的值得探索的去处在等着我呢？而当我完成大地图的最后一块拼图，完整的界面出现在我眼前，开心之余也多了一份遗憾。这个世界再大也有边界，终有一天我会踏遍海拉鲁的每一寸土地，世界在我面前将没有秘密可言。《旷野之息》我玩了上百个小时，游戏时间能在此之上的，也只有可以重复游玩的过程生成式游戏，和与人斗其乐无穷的竞技类游戏了。近年来这样的游戏充斥着业界，毕竟它们制作成本相对较低，又能换来玩家大量的游戏时间，在这个时间就是金钱的现代社会，谁都知道这意味着什么。而《旷野之息》这样的游戏就是消耗品了，纵然你对游戏世界怀有再多的爱与不舍，在几百个小时的游戏时间过后，也将不得不陷入“拔剑四顾心茫然”的境地。&lt;/p&gt;
&lt;p&gt;曾经沧海难为水，除却巫山不是云。感谢任天堂，感谢世界，让我在最适合打游戏的时光里遇到了这样一款伟大的游戏。可是在经历完这南柯一梦以后，下一个能再唤醒我的热情，让我废寝忘食的游戏又需要等多久才会出现呢？而即使出现了又一个如此伟大的游戏，那个时候的我，过着日复一日机械生活的我，还能做到像现在这样抛开世俗的一切繁冗，忘情地享受这一切吗……&lt;/p&gt;
&lt;br&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 298px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/7a8988915e05c2e4d4cba33c2f49a331/300b8/yahaha5.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 90.14778325123154%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAASABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAQCA//EABcBAQEBAQAAAAAAAAAAAAAAAAABAgP/2gAMAwEAAhADEAAAAY8nOVOJJtm72B//xAAZEAEAAwEBAAAAAAAAAAAAAAABAAIRMjH/2gAIAQEAAQUCmynK4XriBj0ez//EABkRAAEFAAAAAAAAAAAAAAAAAAEAAhAREv/aAAgBAwEBPwFxsrU//8QAGBEAAgMAAAAAAAAAAAAAAAAAABEBEBP/2gAIAQIBAT8BSgzv/8QAGxAAAgEFAAAAAAAAAAAAAAAAAAEhEBEgMUH/2gAIAQEABj8CjVOEMumiXh//xAAcEAEBAAICAwAAAAAAAAAAAAABABEhMUFRcYH/2gAIAQEAAT8hO4dMDzIQuEmgRuAD3O0PrNicZDwX/9oADAMBAAIAAwAAABBYL4L/xAAYEQEAAwEAAAAAAAAAAAAAAAABABAhEf/aAAgBAwEBPxAcYkzl/wD/xAAYEQEAAwEAAAAAAAAAAAAAAAABABARIf/aAAgBAgEBPxDeMA9W/wD/xAAdEAACAgIDAQAAAAAAAAAAAAABEQAhQWExUcHw/9oACAEBAAE/EGLAT2NS9eFPUttRQP3biRyUQvhF5GpAGaUHUDgAO/YoLLZzoTkRs3cb8Nz/2Q==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Meme&quot;
        title=&quot;Meme&quot;
        src=&quot;/static/7a8988915e05c2e4d4cba33c2f49a331/300b8/yahaha5.jpg&quot;
        srcset=&quot;/static/7a8988915e05c2e4d4cba33c2f49a331/efcb5/yahaha5.jpg 203w,
/static/7a8988915e05c2e4d4cba33c2f49a331/300b8/yahaha5.jpg 298w&quot;
        sizes=&quot;(max-width: 298px) 100vw, 298px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[meta.js - JavaScript 元编程工具库]]></title><description><![CDATA[meta.js 为 Javascript 语言扩充了一些元编程功能，在使用 ES6 的 class 语法定义类时，你能够以更加直观自然的方式，像一门原生就是基于类的语言那样，使用这些元编程功能。 可以在这里获取它的使用文档与源代码。 开发这个库的灵感来源于之前阅读的《Ruby…]]></description><link>https://maliut.space/p/metajs/</link><guid isPermaLink="false">https://maliut.space/p/metajs/</guid><pubDate>Fri, 24 Nov 2017 23:44:00 GMT</pubDate><content:encoded>&lt;p&gt;meta.js 为 Javascript 语言扩充了一些元编程功能，在使用 ES6 的 class 语法定义类时，你能够以更加直观自然的方式，像一门原生就是基于类的语言那样，使用这些元编程功能。&lt;/p&gt;
&lt;!--more--&gt;
&lt;p&gt;可以&lt;a href=&quot;https://github.com/maliut/meta.js&quot;&gt;在这里&lt;/a&gt;获取它的使用文档与源代码。&lt;/p&gt;
&lt;br&gt;
&lt;p&gt;开发这个库的灵感来源于之前阅读的《Ruby 元编程》一书。考虑到 JavaScript 语言与 Ruby 同为动态语言，灵活度相似（具体的读后感与对比可以参考&lt;a href=&quot;/p/javascript-metaprogramming&quot;&gt;这篇文章&lt;/a&gt;），且在 JavaScript 开发中也会经常遇到一些需要语言动态性的场景以简化代码。而在 JavaScript 中操作这些动态性，就免不了与 prototype 打交道，而在最新的 ES6 语言规范中，class 等语法糖的引入，也表明了这门语言希望尽量淡化 prototype 之类的概念，降低新手的学习门槛与熟悉了其他语言的开发者们的知识迁移成本。故在这基础之上，我的元编程库也把这些细节封装起来，以便大家能用更自然的方式使用这些元编程功能。&lt;/p&gt;
&lt;p&gt;开发这个库的另一个动机则是对于 &lt;code class=&quot;language-text&quot;&gt;method_missing&lt;/code&gt; 在 JavaScript 中的实现。&lt;code class=&quot;language-text&quot;&gt;method_missing&lt;/code&gt; 是讲解 Ruby 语言动态性的一个典型例子，在实际开发中也不乏实用性。JavaScript 在 ES6 中引入了 Proxy，使得实现 &lt;code class=&quot;language-text&quot;&gt;method_missing&lt;/code&gt; 功能也成为了可能。但遗憾的是，网上所有讲解“如何在 JavaScript 中实现 &lt;code class=&quot;language-text&quot;&gt;method_missing&lt;/code&gt;” 的文章全是有问题的。它们只是简单演示了一下对 Proxy 的使用，却丝毫没有真正去使用过它。所以我在这个库中尽量严谨地实现了这个功能，以供大家参考。&lt;/p&gt;
&lt;p&gt;代码本身不长，也很简单，欢迎大家多多使用反馈。&lt;/p&gt;</content:encoded></item><item><title><![CDATA[五分钟看懂 Smalltalk 语言]]></title><description><![CDATA[旧笔记补档，原来是为 2017-10-06 线下 MAP 活动做的笔记 2018-08-02 第一版
2020-08-06 第二版
2021-10-19 部分修改 前言 为什么是 Smalltalk？ Smalltalk…]]></description><link>https://maliut.space/p/smalltalk/</link><guid isPermaLink="false">https://maliut.space/p/smalltalk/</guid><pubDate>Thu, 05 Oct 2017 20:00:00 GMT</pubDate><content:encoded>&lt;blockquote&gt;
&lt;p&gt;旧笔记补档，原来是为 2017-10-06 线下 MAP 活动做的笔记&lt;/p&gt;
&lt;p&gt;2018-08-02 第一版&lt;br /&gt;
2020-08-06 第二版&lt;br /&gt;
2021-10-19 部分修改&lt;/p&gt;
&lt;/blockquote&gt;
&lt;!--more--&gt;
&lt;h2&gt;前言&lt;/h2&gt;
&lt;p&gt;为什么是 Smalltalk？&lt;/p&gt;
&lt;p&gt;Smalltalk 是一门历史悠久的语言。虽然如今我们几乎没有机会再去使用它，但它的不少开创性理念，仍影响了许多现代的编程语言和思想。尤其如今主流的面向对象语言 C++ 和 Java，它们本身并不是纯粹的、适合教学的「面向对象」语言，往往使得初学者陷入一些细枝末节之中，导致理解上的困难。&lt;/p&gt;
&lt;p&gt;而学习 Smalltalk，我们能从编程语言的演进中更深刻地理解一些重要概念的沿革，也可以打破固化思维，在不同语言的比较中得到新的编程灵感。&lt;/p&gt;
&lt;p&gt;如今中文互联网上关于 Smalltalk 的资料相对较少，且多以讲述理念/机翻为主，缺少实际的教程。前些年我出于个人爱好了解了一些 Smalltalk 入门知识，并和小伙伴们做了线下分享。这回把当时的一些笔记整理后发到网上，也算是添砖加瓦吧。&lt;/p&gt;
&lt;p&gt;本文脉络主要参考了 &lt;a href=&quot;http://www.eli.sdsu.edu/courses/spring01/cs635/readingSmalltalk.pdf&quot;&gt;I Can Read C++ and Java But I Can&apos;t Read Smalltalk&lt;/a&gt; 以及 &lt;a href=&quot;http://www.vaikan.com/why-i-love-smalltalk/&quot;&gt;Why I love smalltalk&lt;/a&gt; 。不过并不是照搬，而是加入了一些个人的理解&lt;del&gt;夹带私货&lt;/del&gt;。希望我的引申能够使读者更容易地理解这一有趣的语言。&lt;/p&gt;
&lt;h2&gt;基础语法&lt;/h2&gt;
&lt;p&gt;现代编程语言的语法往往大同小异，但 Smalltalk 和如今的语言语法差距不小，这也是大多数人第一眼看到代码觉得难以理解的原因之一（可以在&lt;a href=&quot;https://github.com/gnu-smalltalk/smalltalk/tree/master/examples&quot;&gt;这里&lt;/a&gt;看到真实的代码例子）。&lt;/p&gt;
&lt;p&gt;不过，虽然写法不同，编程语言的常规要素还是大差不差的，我们先浮光掠影地看一下这些基础语法，便能够读懂大部分的代码内容。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;注释：用双引号包围。&lt;code class=&quot;language-text&quot;&gt;&amp;quot;这是注释&amp;quot;&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;字符串：用单引号包围。&lt;code class=&quot;language-text&quot;&gt;&amp;#39;这是一个字符串&amp;#39;&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;单个字符：&lt;code class=&quot;language-text&quot;&gt;$c&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;符号（Symbol）：&lt;code class=&quot;language-text&quot;&gt;#thisIsASymbol&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;大家也许对符号这个概念比较陌生。简单来说，只要两个符号的值一样，那么它们在内存中也是相同的对象。后面 Ruby 等语言也继承了这一设计。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;变量声明：&lt;code class=&quot;language-text&quot;&gt;| a |&lt;/code&gt; ，也可以一次声明多个：&lt;code class=&quot;language-text&quot;&gt;| a b c |&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;赋值语句：&lt;code class=&quot;language-text&quot;&gt;a := 5&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;相等性与同一性：相等性使用 &lt;code class=&quot;language-text&quot;&gt;=&lt;/code&gt; ，相当于 Java 中的 &lt;code class=&quot;language-text&quot;&gt;equals()&lt;/code&gt; 。同一性使用 &lt;code class=&quot;language-text&quot;&gt;==&lt;/code&gt; ，即判断内存地址相同。&lt;/li&gt;
&lt;li&gt;返回语句：&lt;code class=&quot;language-text&quot;&gt;^ a&lt;/code&gt; 即其他语言中的 &lt;code class=&quot;language-text&quot;&gt;return a&lt;/code&gt; 。&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;级联：不同于大多数语言，Smalltalk 使用 &lt;code class=&quot;language-text&quot;&gt;.&lt;/code&gt; 表示语句的末尾，而 &lt;code class=&quot;language-text&quot;&gt;;&lt;/code&gt; 用于实现级联的功能。所谓级联，是指可以连续在同一个对象上调用方法，而不必每次都重复写出这个对象。举个例子：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;smalltalk&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-smalltalk line-numbers&quot;&gt;&lt;code class=&quot;language-smalltalk&quot;&gt;&lt;span class=&quot;token temporary-variables&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token variable&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;|&lt;/span&gt;&lt;/span&gt; 
p &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; Client &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt;    
name&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Jack&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;     
age&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;     
address&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Earth&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;现代语言中 Dart 就延续了类似的设定。对于其他语言，用 Builder 模式也可以实现类似的功能。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;方法与类&lt;/h2&gt;
&lt;p&gt;来看一个 Smalltalk 中方法定义和调用的例子：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;smalltalk&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-smalltalk line-numbers&quot;&gt;&lt;code class=&quot;language-smalltalk&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;&quot;定义一个方法：使物体围绕某个轴旋转一定角度&quot;&lt;/span&gt;
rotateBy&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; angle around&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; vector
  &lt;span class=&quot;token temporary-variables&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token variable&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;|&lt;/span&gt;&lt;/span&gt;
  result &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;省略具体内容&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
  &lt;span class=&quot;token operator&quot;&gt;^&lt;/span&gt;result

&lt;span class=&quot;token comment&quot;&gt;&quot;调用这个方法&quot;&lt;/span&gt;
t rotateBy&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; a around&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; v&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;相信除了 Objective-C 程序员，大家初看到都会觉得这样的方法签名有点奇怪。不过我们可以基于主流语言的语法，来看看一个方法是以何种逻辑演化成 Smalltalk 的样子的。&lt;/p&gt;
&lt;p&gt;先从我们熟悉的形式开始：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-text line-numbers&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;t-&amp;gt;rotate(a, v);  // In C++
t.rotate(a, v);   // In Java&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;省略掉一些不影响语义的符号：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-text line-numbers&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;t rotate(a, v);    // 省略掉 .
t rotate a, v;     // 省略括号&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;然后我们发现参数的含义不太清晰，可以给每个参数前面加一个前缀来使含义更加明确：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-text line-numbers&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;t rotate by a around v;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;但是这样的话，哪个词语是前缀，哪个是参数就不太能分得清。因此我们给前缀加个冒号来区分：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-text line-numbers&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;t rotate by: a around: v;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;最后，都这样了，方法名字本身也没必要单列出来，可以直接和第一个参数前缀合并起来，就成了 Smalltalk 现在的样子：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-text line-numbers&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;t rotateBy: a around: v; &lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;br&gt;
让我们再来看一个复杂点的例子：
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;smalltalk&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-smalltalk line-numbers&quot;&gt;&lt;code class=&quot;language-smalltalk&quot;&gt;a negative &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;b between&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; c and&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; d&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  ifTrue&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;a &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; c negated&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;它相当于其他语言中的：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;a &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;c &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; b &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; b &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; d&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    a &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;c&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;细品这个例子，我们可以看到很多有意思的地方。&lt;/p&gt;
&lt;p&gt;首先来看这个 &lt;code class=&quot;language-text&quot;&gt;c negated&lt;/code&gt; 。有人会说，直接写个 &lt;code class=&quot;language-text&quot;&gt;-c&lt;/code&gt; 不就完了，为什么要搞这么臃肿。表面看上去，只是写法的不同，但其实它代表着理念的不同。&lt;code class=&quot;language-text&quot;&gt;-c&lt;/code&gt; 代表对 &lt;code class=&quot;language-text&quot;&gt;c&lt;/code&gt; 这个数字做了一次数学运算，而 &lt;code class=&quot;language-text&quot;&gt;c negated&lt;/code&gt; 代表的是在 &lt;code class=&quot;language-text&quot;&gt;c&lt;/code&gt; 这个对象上调用 &lt;code class=&quot;language-text&quot;&gt;negated&lt;/code&gt; 方法，然后用这个方法的返回值去做下一步的操作。&lt;/p&gt;
&lt;p&gt;这里体现了 Smalltalk 的核心概念之一：&lt;strong&gt;一切皆是对象&lt;/strong&gt;。对比于另一门同样号称「一切皆是对象」的语言 Java，你是不能写出 &lt;code class=&quot;language-text&quot;&gt;5.negated()&lt;/code&gt; 这种代码的。而所谓的「基本类型」、「包装类型」让多少初学者陷入困惑，又让多少面试官洋洋得意。但在 Smalltalk 里，对象的概念真正贯穿始终，保持同一性，也避免了这种困惑。&lt;/p&gt;
&lt;p&gt;其次我们来讨论 Smalltalk 中另一个重要概念：&lt;strong&gt;消息&lt;/strong&gt;。在前文中我们称这种写法为「调用方法」。但实际上 Smalltalk 中并没有调用方法的概念，而是叫做&lt;strong&gt;给对象发送消息&lt;/strong&gt;。例如 &lt;code class=&quot;language-text&quot;&gt;c negated&lt;/code&gt; 用 Smalltalk 的话说，就是给对象 &lt;code class=&quot;language-text&quot;&gt;c&lt;/code&gt; 发送了一个名为 &lt;code class=&quot;language-text&quot;&gt;negated&lt;/code&gt; 的消息。&lt;/p&gt;
&lt;p&gt;在 Smalltalk 中有三种消息，它们在上面的例子中都能体现：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;一元（unary）消息：可以理解为一个无参方法，例如上面的 &lt;code class=&quot;language-text&quot;&gt;negated&lt;/code&gt; 消息。&lt;/li&gt;
&lt;li&gt;二元（binary）消息：就是常用的一组计算符号，比如四则运算符还有上面的 &lt;code class=&quot;language-text&quot;&gt;|&lt;/code&gt; 等逻辑运算符。不过需要注意的是，它的本质还是发送消息而不是直接运算，因此没有运算符优先级的概念。&lt;code class=&quot;language-text&quot;&gt;+&lt;/code&gt; 和 &lt;code class=&quot;language-text&quot;&gt;*&lt;/code&gt; 在 Smalltalk 中的优先级是相等的。&lt;/li&gt;
&lt;li&gt;Keyword 消息：可认为是普通的有参方法，在 Smalltalk 中就是每个参数以冒号连接来表示，比如上面的 &lt;code class=&quot;language-text&quot;&gt;rotateBy:around:&lt;/code&gt; 还有 &lt;code class=&quot;language-text&quot;&gt;between:and:&lt;/code&gt; 。这样的消息在 Smalltalk 中被称为 &lt;strong&gt;keyword&lt;/strong&gt; 。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;有人可能会说，把方法调用说成是发送消息，但运行的效果是一样的，这不是换汤不换药吗？话是这么说，但描述词汇的不同也会带来思维方式的不同。相比于「方法调用」，「发送消息」这个说法会显得更加泛用一些，也可以带来一些更接近本质的思考。&lt;/p&gt;
&lt;p&gt;举个例子，如果我们调用一个不存在的方法，那自然会报错。但如果给一个对象发送一个它不认识的消息，那非得报错吗？我大不了不处理不就行了。甚至，能不能在遇到这种情况时，有个兜底的逻辑统一处理下？—— Ruby 的 &lt;code class=&quot;language-text&quot;&gt;method_missing&lt;/code&gt; 了解一下。&lt;/p&gt;
&lt;p&gt;再比如说当我们学习面向对象时提到的所谓「三大特征」：继承、封装、多态。它们真的能定义什么是「面向对象」吗？&lt;/p&gt;
&lt;p&gt;继承实质是面向对象语言中实现代码重用的一种手段，但现在大部分情况下「组合优于继承」早已成为共识。&lt;/p&gt;
&lt;p&gt;封装是为了隐藏底层或内部的实现细节，也并不是面向对象独有的概念。&lt;/p&gt;
&lt;p&gt;多态在传统面向对象教学中的解释颇为复杂。我们定义一个父类，并让两个不同的子类 override 父类的同一个方法，并编写不同的实现，来说明多态性。但是如果用发送消息的思路来解释就很简单了。给两个不同的对象发送同一个消息，这两个对象会做出不同的反应，不是理所当然的事情吗？压根不需要牵扯到类、继承之类的概念。&lt;/p&gt;
&lt;p&gt;对面向对象这一概念的误读影响了很多人。记得几年前见过一个问题，问的是「JavaScript 是一门面向对象的语言吗？」，下面的回答也是众说纷纭。而之所以大家会有争议，是因为 JavaScript 中并没有类的概念，取而代之的是原型的概念，搞的很多人一下子就混乱了。后来 ES6 的标准里增加了 class 语法糖，我就再也没见过有人提这个问题了。&lt;/p&gt;
&lt;p&gt;希望读者通过学习 Smalltalk 这门面向对象的鼻祖级语言，理解一切皆是对象以及对象间通过消息来通信这两个核心理念，减少一些对面向对象概念的误读。&lt;/p&gt;
&lt;p&gt;在理解了 Smalltalk 的核心概念之后，我们再来看一下怎么声明一个类：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;smalltalk&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-smalltalk line-numbers&quot;&gt;&lt;code class=&quot;language-smalltalk&quot;&gt;Object subclass&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token symbol&quot;&gt;#MyClass&lt;/span&gt;      
  instanceVariableNames&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;      
  classVariableNames&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;      
  poolDictionaries&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;      
  category&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Pupeno&apos;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;大部分编程语言都会使用 &lt;code class=&quot;language-text&quot;&gt;class&lt;/code&gt; 关键字声明一个类，并用 &lt;code class=&quot;language-text&quot;&gt;extends&lt;/code&gt; 或类似的关键字来声明继承关系。而 Smalltalk 则另辟蹊径。让我们来看看它的逻辑：首先，由于一切皆是对象，因此 &lt;code class=&quot;language-text&quot;&gt;Object&lt;/code&gt; 类也是一个对象；其次，&lt;code class=&quot;language-text&quot;&gt;Object&lt;/code&gt; 类可以接收名为 &lt;code class=&quot;language-text&quot;&gt;subclass:&lt;/code&gt; 的消息，创建一个新的对象作为它的子类。无需再引入任何特殊的语法，仅用语言本身的两个核心理念，就十分自洽地把类的概念创建了出来。&lt;/p&gt;
&lt;p&gt;不仅仅是定义类，还有我们常用的分支、循环语句等，在 Smalltalk 中都可以通过发送消息的形式来实现，而无需定义额外的诸如 &lt;code class=&quot;language-text&quot;&gt;if&lt;/code&gt;、&lt;code class=&quot;language-text&quot;&gt;while&lt;/code&gt; 等关键字。这或许就是 Smalltalk 把类似 &lt;code class=&quot;language-text&quot;&gt;subclass:&lt;/code&gt; 之类的带参消息都称作 keyword 的原因。它们完全可以替代其他语言中各种关键字的职能。&lt;/p&gt;
&lt;h2&gt;代码块&lt;/h2&gt;
&lt;p&gt;继续回到上一节的例子：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;smalltalk&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-smalltalk line-numbers&quot;&gt;&lt;code class=&quot;language-smalltalk&quot;&gt;a negative &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;b between&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; c and&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; d&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  ifTrue&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;a &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; c negated&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;关注这个 &lt;code class=&quot;language-text&quot;&gt;[a := c negated]&lt;/code&gt; 。这里由中括号包围的部分，大家或许会以为就像是 C++/Java 里跟在 &lt;code class=&quot;language-text&quot;&gt;if&lt;/code&gt; 语句后面的大括号——对，但不全对。在 Smalltalk 中它被称为代码块，是语言中的一等公民，可以放在一个变量里面，自由地控制它的调用时机，也可以把它像参数一样传递。如果你熟悉 JavaScript 就一定不会感到陌生。做个简单对比：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;smalltalk&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-smalltalk line-numbers&quot;&gt;&lt;code class=&quot;language-smalltalk&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;&quot;in Smalltalk&quot;&lt;/span&gt;
a &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token block-arguments&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;:x&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;|&lt;/span&gt;&lt;/span&gt; x &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;       &lt;span class=&quot;token comment&quot;&gt;&quot;将一个代码块赋值给 a&quot;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;a value&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;           &lt;span class=&quot;token comment&quot;&gt;&quot;运行这个代码块并传入参数 10&quot;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// in Javascript&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; x &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;其实这就是匿名函数的概念。函数式编程的理念近年来也重回大众视野，即使是 Java 也在 1.8 中加入了相关的特性。可以看到虽说 Smalltalk 是面向对象语言的代表，但论函数式编程的能力也完全不输现代的主流语言们。&lt;/p&gt;
&lt;h2&gt;控制流&lt;/h2&gt;
&lt;p&gt;结合 Smalltalk 对象间发送消息的思想和代码块的能力，我们将变得无所不能。上文中提到 Smalltalk 无需额外的关键字就能实现 &lt;code class=&quot;language-text&quot;&gt;if&lt;/code&gt; 和 &lt;code class=&quot;language-text&quot;&gt;while&lt;/code&gt; 等的功能。在最后一节中就让我们具体地看一下如何利用这些能力来实现 &lt;code class=&quot;language-text&quot;&gt;if&lt;/code&gt; 的功能吧。这也是我当初学习 Smalltalk 时最喜欢的一个例子。&lt;/p&gt;
&lt;p&gt;首先，我们需要定义出 &lt;code class=&quot;language-text&quot;&gt;true&lt;/code&gt; 和 &lt;code class=&quot;language-text&quot;&gt;false&lt;/code&gt; 这两个常量：&lt;/p&gt;
&lt;p&gt;先定义出 &lt;code class=&quot;language-text&quot;&gt;PBoolean&lt;/code&gt; 类，然后将 &lt;code class=&quot;language-text&quot;&gt;PTrue&lt;/code&gt; 和 &lt;code class=&quot;language-text&quot;&gt;PFalse&lt;/code&gt; 作为它的子类。&lt;code class=&quot;language-text&quot;&gt;PTrue&lt;/code&gt; 类的实例就可以认为是 &lt;code class=&quot;language-text&quot;&gt;true&lt;/code&gt;，&lt;code class=&quot;language-text&quot;&gt;false&lt;/code&gt; 也是同理。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;smalltalk&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-smalltalk line-numbers&quot;&gt;&lt;code class=&quot;language-smalltalk&quot;&gt;Object subclass&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token symbol&quot;&gt;#PBoolean&lt;/span&gt;      
  instanceVariableNames&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;      
  classVariableNames&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;      
  poolDictionaries&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;      
  category&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Pupeno&apos;&lt;/span&gt;
PBoolean subclass&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token symbol&quot;&gt;#PTrue&lt;/span&gt;      
  instanceVariableNames&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;      
  classVariableNames&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;      
  poolDictionaries&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;      
  category&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Pupeno&apos;&lt;/span&gt;
PBoolean subclass&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token symbol&quot;&gt;#PFalse&lt;/span&gt;      
  instanceVariableNames&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;      
  classVariableNames&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;      
  poolDictionaries&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;      
  category&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Pupeno&apos;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;其次，我们定义 &lt;code class=&quot;language-text&quot;&gt;ifTrue:else:&lt;/code&gt; 消息。它接受两个代码块作为参数。当 &lt;code class=&quot;language-text&quot;&gt;PTrue&lt;/code&gt; 类的实例接收到消息时，它执行 &lt;code class=&quot;language-text&quot;&gt;ifTrue:&lt;/code&gt; 携带的代码块，忽略 &lt;code class=&quot;language-text&quot;&gt;else:&lt;/code&gt; 携带的代码块。反之亦然。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;smalltalk&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-smalltalk line-numbers&quot;&gt;&lt;code class=&quot;language-smalltalk&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;&quot;PTrue 中定义&quot;&lt;/span&gt;
ifTrue&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; do else&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; notdo  
  &lt;span class=&quot;token operator&quot;&gt;^&lt;/span&gt; do value
  
&lt;span class=&quot;token comment&quot;&gt;&quot;PFalse 中定义&quot;&lt;/span&gt;
ifTrue&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; notdo else&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; do  
  &lt;span class=&quot;token operator&quot;&gt;^&lt;/span&gt; do value&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;再次，我们定义一个 &lt;code class=&quot;language-text&quot;&gt;MyClass&lt;/code&gt; 类用作测试，它可以接受 &lt;code class=&quot;language-text&quot;&gt;equals:&lt;/code&gt; 消息判断两个对象是否相等。为了方便起见，我们永远返回 &lt;code class=&quot;language-text&quot;&gt;true&lt;/code&gt; 。实际中可以自行实现其业务逻辑。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;smalltalk&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-smalltalk line-numbers&quot;&gt;&lt;code class=&quot;language-smalltalk&quot;&gt;equals&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; other  
  &lt;span class=&quot;token operator&quot;&gt;^&lt;/span&gt; PTrue &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;最后，我们就可以愉快地使用 if-else 了：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;smalltalk&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-smalltalk line-numbers&quot;&gt;&lt;code class=&quot;language-smalltalk&quot;&gt;m1 &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; MyClass &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
m2 &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; MyClass &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;m1 equals&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; m2&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; ifTrue&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;  
  Transcript show&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;They are equal&apos;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; else&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;  
  Transcript show&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;They are not equal&apos;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;写在最后&lt;/h2&gt;
&lt;p&gt;本文介绍了 Smalltalk 中最为基础的语言规则与设计思想。在它出现的时候，它引领了面向对象、IDE 等等前沿的概念，而即使放到现在，它的语言特性也毫不过时。愿大家都能在了解 Smalltalk 的过程中有所收获。&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Update Log 20171005]]></title><description><![CDATA[…]]></description><link>https://maliut.space/p/update-log-20171005/</link><guid isPermaLink="false">https://maliut.space/p/update-log-20171005/</guid><pubDate>Thu, 05 Oct 2017 19:43:00 GMT</pubDate><content:encoded>&lt;p&gt;距离上次更新也快一年了。虽说有篇元编程的文章不过也是坑着，别的文章也是坑着。一年以来也发生了很多事情（主要还是进入职场了吧喂），不过其实一直没有忘记这里，只是自己懒罢了。&lt;/p&gt;
&lt;!--more--&gt;
&lt;p&gt;于是趁着这次一时兴起，也对网站做了次大更新。契机应该是多说的倒闭（虽说也是很久之前了），然后网传规定说评论都要实名制，于是要将网站的评论系统迁移到 Disqus 。实际上呢更新了很多东西，在这里记录一下，也算是对自己的一次 restart 和激励好了。&lt;/p&gt;
&lt;p&gt;主要做了三件事：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;网站主题换用 Typescript&lt;/p&gt;
&lt;p&gt;老的主题有些看厌了，选择了很久选中了这个主题，简洁而富有设计感。字体不再是微软雅黑了，依然很舒服。图片会有一个 114% 的放大，很适合图片的展示，甚至想把每篇文章配上一张美美的图。不过这样的话倒是有点像微信公众号了（笑）。&lt;/p&gt;
&lt;p&gt;个人感觉，这个主题放些设计的东西是很漂亮啦，放些严肃的博文倒是感觉有点怪？不过好看就是正义啦。 114% 放大效果用来展示 UML 图倒是有点谜 23333 虽说 class=small-img 就可以取消掉。&lt;/p&gt;
&lt;p&gt;为了配合这个主题没有个人展示的区域，新建了一个 about 页面，不过仍在施工中。另外配置了一下站内的搜索，为了构建成功还升级了一波 node 和 npm ，倒也是挺有趣的。&lt;/p&gt;
&lt;p&gt;此外还对这个主题做了一些魔改：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;略微放大了一下正文和 archive 页的字体。原来的字体实在小了些。&lt;/li&gt;
&lt;li&gt;修改了底部社交网络链接的图标。主要增加了原来没有的 steam 图标，也顺便删了些用不到的。依旧使用 icomoon 的服务。&lt;/li&gt;
&lt;li&gt;修改了头部的 logo ，毕竟是 blog 的名字不得不改。还好主题作者提供了原始的 psd 文件，少了很多工夫。名字变长以后， css 也要做出一定的修改。副作用是移动端上来看显得不太美观，不过先不管了。&lt;/li&gt;
&lt;li&gt;原本使用的 adobe typekit 字体貌似要收费，于是干脆弃用之。 fallback 方案看着也还行， 如果有更好的字体欢迎推荐。同样，更换了字体以后也需要小改 css 。&lt;/li&gt;
&lt;li&gt;对日期格式也做了修改。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;评论系统换用 Disqus 。需要翻墙以后才能看到。&lt;/li&gt;
&lt;li&gt;全站升级 https 。这里参考了&lt;a href=&quot;https://molunerfinn.com/hexo-travisci-https/&quot;&gt;这篇教程&lt;/a&gt;。旧文章里还有几张图片是 http 的，有空最好也做个替换。不过没有大碍，就先放进 TODO List 好了。是不是也抽空做个 favicon 呢？ emmm&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;很惭愧，就做了一些微小的工作，谢谢大家。&lt;/p&gt;</content:encoded></item><item><title><![CDATA[JavaScript 元编程]]></title><description><![CDATA[最近阅读《Ruby 元编程》一书，拍案叫绝，又想到 JavaScript 语言和 Ruby 类似，相当灵活且具有一些元编程的特性，而且最近以及不久的将来都可能需要和 JavaScript 打交道，因此希望对照着这本书，探究些 JavaScript…]]></description><link>https://maliut.space/p/javascript-metaprogramming/</link><guid isPermaLink="false">https://maliut.space/p/javascript-metaprogramming/</guid><pubDate>Fri, 30 Jun 2017 20:51:39 GMT</pubDate><content:encoded>&lt;p&gt;最近阅读《Ruby 元编程》一书，拍案叫绝，又想到 JavaScript 语言和 Ruby 类似，相当灵活且具有一些元编程的特性，而且最近以及不久的将来都可能需要和 JavaScript 打交道，因此希望对照着这本书，探究些 JavaScript 元编程的特性。&lt;/p&gt;
&lt;!--more--&gt;
&lt;h1&gt;语言构件&lt;/h1&gt;
&lt;p&gt;元编程是对语言构件的操作，因此为了了解元编程，需要先了解它们语言构件的异同。&lt;/p&gt;
&lt;p&gt;在 Ruby 中，一切都是对象。一个对象则必然属于一个类。一个类是 &lt;code class=&quot;language-text&quot;&gt;Class&lt;/code&gt; 类的对象，而所有的类都是 &lt;code class=&quot;language-text&quot;&gt;Object&lt;/code&gt; 类的子类（严格来说是 &lt;code class=&quot;language-text&quot;&gt;BasicObject&lt;/code&gt;）。可以用一张图来展示：&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 690px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/80c1264b3ffa9bf98d891b9755130b6a/15ec7/meta1.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 46.30541871921182%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAJABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAIDBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAe3OwlQ//8QAGRAAAQUAAAAAAAAAAAAAAAAAAQIQITFB/9oACAEBAAEFAiYxNP8A/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFhABAQEAAAAAAAAAAAAAAAAAQQAg/9oACAEBAAY/Amc//8QAGRAAAwADAAAAAAAAAAAAAAAAAAEREDGR/9oACAEBAAE/IbMpwOA1XK0f/9oADAMBAAIAAwAAABCzD//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABoQAQEAAgMAAAAAAAAAAAAAAAERACEgMVH/2gAIAQEAAT8QE4HqmIXCexpg7FhN8L//2Q==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;img&quot;
        title=&quot;img&quot;
        src=&quot;/static/80c1264b3ffa9bf98d891b9755130b6a/15ec7/meta1.jpg&quot;
        srcset=&quot;/static/80c1264b3ffa9bf98d891b9755130b6a/efcb5/meta1.jpg 203w,
/static/80c1264b3ffa9bf98d891b9755130b6a/02e66/meta1.jpg 405w,
/static/80c1264b3ffa9bf98d891b9755130b6a/15ec7/meta1.jpg 690w&quot;
        sizes=&quot;(max-width: 690px) 100vw, 690px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;在 JavaScript 中，一切依然是对象。但是它并不是基于类和继承构建的，而是基于独特的原型机制。JavaScript 的对象分为普通对象和函数。而函数除了普通调用以外，还可以通过 &lt;code class=&quot;language-text&quot;&gt;new&lt;/code&gt; 关键字调用，生成一个新的对象，而此时这个函数被称为构造函数。从形式上看，就像 Java 之类的用法。而每一个函数都会有一个 &lt;code class=&quot;language-text&quot;&gt;prototype&lt;/code&gt; 属性（除 &lt;code class=&quot;language-text&quot;&gt;Function.prototype&lt;/code&gt;），每一个对象都会有 &lt;code class=&quot;language-text&quot;&gt;__proto__&lt;/code&gt;  属性指向它的 &lt;code class=&quot;language-text&quot;&gt;prototype&lt;/code&gt; 。当访问一个对象的属性时，先在这个对象自身上找，若没有则在 &lt;code class=&quot;language-text&quot;&gt;__proto__&lt;/code&gt; 属性上寻找。这就是字面上“原型机制”的意义，即通过同一个构造函数构造的对象，都会表现得像这个构造函数的原型。&lt;/p&gt;
&lt;p&gt;JavaScript 的原型机制很有趣但令人费解。这里也只是蜻蜓点水，详细的解释可以参考网上的各种文章和知乎问答。只是随着 JavaScript 的用途越发广泛，对于适应了主流语言的程序员来说，很难利用它的原型机制构建起可靠的大规模应用，因此不停地有各种将 JavaScript 类化的方案。一种比较常规的做法是，将构造函数作为类，对于各个对象的属性，定义在对象自身上；而对于各个对象共享的方法，定义在类的原型对象上。对于继承，由于类的原型对象也是一个普通的对象，将其 &lt;code class=&quot;language-text&quot;&gt;__proto__&lt;/code&gt; 属性指向父类的原型对象，就可以继承父类的方法了。（讲的比较简略，读者可以自己推演下。另外，这并不是完美的做法，关于 JS 的继承衍生出不下五六种方法，感兴趣可以自行搜索）&lt;/p&gt;
&lt;p&gt;面对程序员们的广泛需求，在最新的 es6 标准中引入了 class 语法糖，帮助程序员以他们熟悉的方式来编写代码。 class 的基本原理正是上述的方案（当然，总有各种细节上的注意点，具体请参考 es6 标准的解读）。模仿上面那张图可以得到：&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 690px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/e5734b8d7a9c7f0452a451ed93ef1e15/15ec7/meta2.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 41.87192118226601%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAIABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAECBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAdyAuD//xAAXEAEAAwAAAAAAAAAAAAAAAAAAAREh/9oACAEBAAEFArah/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGRAAAQUAAAAAAAAAAAAAAAAAAAEQITGh/9oACAEBAAY/AqUjW//EABgQAQEBAQEAAAAAAAAAAAAAAAEAIREx/9oACAEBAAE/IXoY8UlNNv/aAAwDAQACAAMAAAAQ8A//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAaEAEAAwEBAQAAAAAAAAAAAAABABExIWHw/9oACAEBAAE/EDM040dhQocxfdh1q8T/2Q==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;img&quot;
        title=&quot;img&quot;
        src=&quot;/static/e5734b8d7a9c7f0452a451ed93ef1e15/15ec7/meta2.jpg&quot;
        srcset=&quot;/static/e5734b8d7a9c7f0452a451ed93ef1e15/efcb5/meta2.jpg 203w,
/static/e5734b8d7a9c7f0452a451ed93ef1e15/02e66/meta2.jpg 405w,
/static/e5734b8d7a9c7f0452a451ed93ef1e15/15ec7/meta2.jpg 690w&quot;
        sizes=&quot;(max-width: 690px) 100vw, 690px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;首先 JavaScript 中并没有和 Ruby 意义类似的 Module。其次，Function 在很大程度上类似其他语言的 Class 概念。再次，我没有在图中列出 superclass 关系。如果按照 es6 的 extends 关键字，那么 superclass 一定指代正确的父类，而对于图中这三个顶层的类，若按照上文的逻辑来分析，则会显得有些奇怪。&lt;/p&gt;
&lt;p&gt;姑且称图中的 &lt;code class=&quot;language-text&quot;&gt;Object&lt;/code&gt;、&lt;code class=&quot;language-text&quot;&gt;Function&lt;/code&gt;、&lt;code class=&quot;language-text&quot;&gt;MyClass&lt;/code&gt; 是顶层类。按照上文逻辑分析它们的 superclass，则都指向 &lt;code class=&quot;language-text&quot;&gt;Function.prototype&lt;/code&gt;，这是一个函数对象。而它的 superclass 指向 &lt;code class=&quot;language-text&quot;&gt;Object.prototype&lt;/code&gt;，这是一个普通对象。尽管一个普通对象不再是一个类了，但你仍然可以找到它的 &lt;code class=&quot;language-text&quot;&gt;__proto__&lt;/code&gt; 属性指向 null。在网上也能找到继承这三个奇怪的东西的分析。扯得有点远了。由于我们希望对程序员隐藏 JavaScript 的原型机制，我个人并不希望将 &lt;code class=&quot;language-text&quot;&gt;Function.prototype&lt;/code&gt; 视作所有类的父类。尽管如此，你依然可以在 &lt;code class=&quot;language-text&quot;&gt;Function.prototype&lt;/code&gt; 中定义所有函数对象可以访问的属性/方法，在 &lt;code class=&quot;language-text&quot;&gt;Object.prototype&lt;/code&gt; 中定义所有对象可以访问的属性/方法。&lt;/p&gt;
&lt;h1&gt;元编程&lt;/h1&gt;
&lt;p&gt;在上文中，我们实际上已经完成了第一步：将 JavaScript 类化。接下来，不妨按照《Ruby 元编程》中所列出的各种“法术”，寻求在 JavaScript 中的实现方法。&lt;/p&gt;
&lt;h2&gt;内省&lt;/h2&gt;
&lt;p&gt;内省使对象可以在运行时查询关于自己的一些信息，例如对象的类，类的父类，对象拥有哪些属性和方法等等。我们知道 JavaScript 中的类就是一个对象的构造函数，正好 JavaScript 提供了 &lt;code class=&quot;language-text&quot;&gt;obj.constructor&lt;/code&gt; 属性来查询对象的构造函数。得到父类同样简单，根据继承的原理，一个类的父类正是这个类的原型的原型所在的类，即 &lt;code class=&quot;language-text&quot;&gt;class.prototype.__proto__.constuctor&lt;/code&gt; 。&lt;/p&gt;
&lt;p&gt;至于对象身上的属性和方法， es6 提供了 Reflect 类来查询，其中很多方法来自于原先的 Object 类。将类命名为 Reflect 更好地体现了“反射”这一意图。&lt;/p&gt;
&lt;h2&gt;动态派发&lt;/h2&gt;
&lt;p&gt;调用一个对象的方法，实际上是向这个对象发送一条消息。基于这个思想，Ruby 中可以使用 &lt;code class=&quot;language-text&quot;&gt;obj.send(&amp;quot;method_name&amp;quot;, args)&lt;/code&gt;，动态地调用一个方法。方法名可以使用字符串拼装出来，因此大大提高了代码的灵活性。而在 JavaScript 中，方法不过是对象的一个函数属性，而属性本身也可以用字符串表示，也就是说，动态派发在 JavaScript 的设计中，并不是什么高级的用法，仅仅是一种再自然不过的语言特性罢了。在 Javascript 中上述代码等价于 &lt;code class=&quot;language-text&quot;&gt;obj[&amp;quot;method_name&amp;quot;]()&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;作用域绑定、define/delete、eval 和 new Function&lt;/p&gt;
&lt;p&gt;不能做的要素：类宏&lt;/p&gt;
&lt;p&gt;proxy能做的：methodmissing&lt;/p&gt;
&lt;h1&gt;一些感想&lt;/h1&gt;</content:encoded></item><item><title><![CDATA[Awesome Soccer - Rocking Soccer 游戏插件]]></title><description><![CDATA[Awesome Soccer 是为 Rocking Soccer 提供的 chrome 插件，为 chrome 用户在游戏时提供更好的体验。 你可以从此处获取插件并查看使用方法。 Rocking Soccer…]]></description><link>https://maliut.space/p/awesome-soccer/</link><guid isPermaLink="false">https://maliut.space/p/awesome-soccer/</guid><pubDate>Sat, 13 May 2017 20:15:00 GMT</pubDate><content:encoded>&lt;p&gt;Awesome Soccer 是为 &lt;a href=&quot;https://rockingsoccer.com/zh/soccer&quot;&gt;Rocking Soccer&lt;/a&gt; 提供的 chrome 插件，为 chrome 用户在游戏时提供更好的体验。&lt;/p&gt;
&lt;p&gt;你可以&lt;a href=&quot;https://github.com/maliut/awesome-soccer&quot;&gt;从此处获取插件并查看使用方法&lt;/a&gt;。&lt;/p&gt;
&lt;!--more--&gt;
&lt;br&gt;
&lt;p&gt;Rocking Soccer 是一款国外的足球经理网页游戏。相比于网络上形形色色的足球经理的游戏，它一方面比较良心，不需要氪金变强，而是靠长期的努力养成变强；另一方面，它的整个游戏系统也较为简单，无需投入很大的时间和精力去研究，适合休闲游玩。&lt;/p&gt;
&lt;p&gt;有段时间里我和群友们纷纷入坑了这个游戏，而游戏需要一些数据分析辅助决策以及优化体验，因此诞生了这个插件。&lt;/p&gt;
&lt;p&gt;在这个插件之前，还有一个 rshelper 插件，提供了球员经验分值计算的核心功能，对球员的培养选择很有帮助。但是当我们想要更多的功能时，却发现原插件的代码也比较一言难尽（也许程序员看别人的代码都是这么想的吧，看自己以前的代码也是一样的（笑））。既然如此，那就自己写一个吧——于是这个插件就诞生了。&lt;/p&gt;
&lt;p&gt;插件目前主要提供了 3 个功能：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;球员经验评分和未来经验、主属性预测。这部分基于 rshelper 插件。&lt;/li&gt;
&lt;li&gt;多货币显示。鼠标移到价格上时会显示 RSD 、日元、人民币三种价格。这是因为群友们分布在各个不同的国家，看到的价格都有所不同，需要有个统一的单位进行交流。&lt;/li&gt;
&lt;li&gt;本地表格排序。在球员界面对各个属性排序时无需刷新网页，忍受很慢的速度。相当于把服务端排序改成了客户端排序。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;虽然目前的功能还不是很多，但从开发理念上，我们希望一开始就给项目定下一个良好的框架，即对游戏中的球员、建筑等各个概念进行建模，使用面向对象的思想组织代码，而不是过程式一把梭，从而在未来增加和修改功能时能够有良好的维护性与可扩展性。&lt;/p&gt;
&lt;h2&gt;手机版&lt;/h2&gt;
&lt;p&gt;考虑到如今大部分时间大家都在手机上玩游戏了，而 chrome 插件是没法在手机上使用的，因此也萌生了手机版 Awesome Soccer 的想法。&lt;/p&gt;
&lt;p&gt;从技术上来说有两种实现方案：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;套壳浏览器：整个应用就是一个 WebView，在加载 Rocking Soccer 的网页后注入 JavaScript 代码，实现与浏览器插件同样的功能。优点是开发简单，缺点是体验较差，毕竟 Rocking Soccer 老掉牙的页面根本不支持手机展示，在手机上操作十分蛋疼。&lt;/li&gt;
&lt;li&gt;Headless 模式：即我们在手机上重新实现整个游戏的界面，而需要交互的部分就通过发请求的方式去实现。这样做的用户体验是比较好的，缺点是工作量较大，且需要一定预研。而且有些功能例如比赛直播等应该还是要跳到网页去。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;不过无论哪种模式，内在的逻辑应该都是可以与网页端的插件共用的。这也是使用面向对象进行逻辑层开发的好处。&lt;/p&gt;
&lt;p&gt;目前已经使用第一种方案做了 Android 版的应用出来，不过代码已经不可考。&lt;/p&gt;
&lt;br&gt;
&lt;p&gt;当然，随着大家逐渐弃坑，这个项目也不再维护了。&lt;/p&gt;</content:encoded></item><item><title><![CDATA[关于密码管理的一个想法]]></title><description><![CDATA[…]]></description><link>https://maliut.space/p/thought-for-password-management/</link><guid isPermaLink="false">https://maliut.space/p/thought-for-password-management/</guid><pubDate>Mon, 19 Sep 2016 22:26:49 GMT</pubDate><content:encoded>&lt;p&gt;密码的重要性毋庸多言，尤其是在当今人们越来越离不开互联网的情况之下。最近各种密码泄露事件层出不穷，社工技术也是比想象中厉害很多。虽说密码的原则，例如不要重复啊，要复杂啊，大家都知道，然而真正能做到的人也是少数，大多数仍然是偷懒几个密码走天下。然而这终究不是长久之计，因此一些密码管理工具诸如 1Password， LastPass 等开始流行起来。这类工具一般的做法是需要你设定一个主密码，进入后就可以查看各个网站的单独密码，也可以为你生成比较安全的密码，这样比较灵活。但它们仍然需要在本地保存各种密码（或许是用主密码作为 key 的对称加密？），并且会把这些信息加密后保存在网上。然而需要保存密码本身加之安全性全系于主密码一身，仍让人对其可靠性产生担忧。于是突发奇想，能否设计一套密码管理机制，使得我们并不需要保存每个密码，而是在需要时由其实时计算而出。&lt;/p&gt;
&lt;!--more--&gt;
&lt;h1&gt;初步设想&lt;/h1&gt;
&lt;p&gt;在这个机制中，用户输入一个自定义 key，得到一个输出，即计算出来的密码。密码计算出后可以自动复制到剪贴板，用户不需要知道密码的具体内容。&lt;/p&gt;
&lt;p&gt;假设存在这样一个系统，那么它需要保证：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;针对不同的网站，需要生成不同的密码。这个可以通过自定义 key 来保证。&lt;/li&gt;
&lt;li&gt;对于同样的自定义 key，不同的用户得到的密码应当不同。否则 key 实质就成了密码。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;这个机制不需要联网，也不需要本地存储各种密码。key 实质就是一个助记符，用户需要将它记在心中，但相比于各种复杂密码，记忆的难度已经大大降低。此外，它不应该被除主人外的其他人使用，否则其他人只要知道了主人的各个 key，也就相当于知道了密码。为此我们仍然需要一个主密码。不过和传统意义上的主密码不同，由于我们的机制并不记录密码或联网，我们并不能验证主密码的正确性，而是将主密码和自定义 key 共同组成算法的输入。这样他人即使知道了主人的 key，但因为不知道主密码，得到的输出也将是错误的。为此，虽然不是必需（因为主密码只是参与运算的一个普通字符串），我们仍然建议主密码足够复杂（例如包含数字、大小写字母、特殊符号且足够长）以至于难以猜测（因为自定义 key 为了方便记忆必然是容易被猜到的）。&lt;/p&gt;
&lt;p&gt;让我们回到上文的第二点，因为同样的输入必然需要得到同样的输出，而算法本身并不能改变，除非你对每个用户都特殊定制一个软件。也不能使用什么元编程之类的手段，因为若不直接编译好，就等于公开了你的计算算法从而增加被破解的可能性。最简单的方法便是在用户第一次使用时产生一个随机数或者 UUID 加入输入。不过加入了主密码以后也就相当于解决了这个问题。然而主密码是用户自己选取的，仍然存在重复的可能，因此保险起见仍然可以加入随机数或者 UUID，将重复概率降低到约等于 0。&lt;/p&gt;
&lt;h1&gt;如何更换单个密码&lt;/h1&gt;
&lt;p&gt;更换单个密码是一个常用功能，假如怀疑某个密码遭遇到泄露可以方便地重置它而不影响其他密码。目前我们使用主密码 + key + 一次生成的随机数来唯一确定一个密码。最简单的想法是用户修改自己的 key 就行。然而 key 作为助记符，若是频繁修改，也会给用户带来记忆上的困难。而修改主密码和随机数即意味着所有的密码都要进行修改，这显然是无法接受的。照道理应该通过修改随机数实现，但为了不影响其他密码，我们必须建立每个 key 和随机数之间的映射关系，即需要保存这些 key 和对应的随机数，而这却恰恰是设计之初想要极力避免的。&lt;/p&gt;
&lt;p&gt;为此需要设计一个妥协的方案，目前的设想如下：生成一个随机数的表，这不得不保存为文件。另外将 key 和对应的随机数组合，通过非对称加密后保存为文件（可以进一步通过改变组合方式、加 salt 等增加安全性）。这样即使文件被他人得到也无法破译出 key 及对应关系。软件工作时也无从得知，而是需要穷举随机数表，加密后比对，才能确定该 key 对应了哪个随机数。此外，对于大多数密码而言，它们永远不会变化，即不需要使用新的随机数，也就不需要保存在文件中。对于一些特定的重要密码，用户也可以选择修改自己记忆中的 key 值，通过增加记忆成本来降低风险。&lt;/p&gt;
&lt;h1&gt;多端的数据一致性&lt;/h1&gt;
&lt;p&gt;需要输入密码的场合，电脑端仍是大头，然而手机端也越来越需要了，为此需要开发手机上能用的版本。移植工作简单，但对于这样一个非联网的密码管理工具，如何才能保证电脑上和手机上得到的密码是一样的？自然主密码， key 和算法都是一样的，那么只需要保证随机数表相同。然而你不能要求用户来同步整个随机数表。容易想到，我们只需要系统生成一个 appkey，再由算法利用这个 appkey 生成整个随机数表即可。用户在一个新的端第一次使用时需要输入这个 appkey，这样问题解决。&lt;/p&gt;
&lt;h1&gt;软件升级&lt;/h1&gt;
&lt;p&gt;理想状态下只要做出来就永远不会改变，然而信息技术的发展日新月异，也不能预测这个工具中使用的各种算法等是否需要更改。一旦更改则用户的全部密码都需要改变，而用户很难记起自己通过这一工具“保存”了多少密码。在此提个可行的解决方法：使用时双开前后两个版本，先用新版本得到的密码尝试，若错误则说明该网站的密码依然需要通过旧版本得到，此时用户应当及时修改密码为新版本。长此以往所有密码均被修改，版本过渡完成。&lt;/p&gt;
&lt;h1&gt;总结&lt;/h1&gt;
&lt;p&gt;相比于目前常用的密码管理工具，本工具不联网，不保存，减少密码本身被简单泄露的危险。但也丢失了灵活性，即用户不能保存自定义的密码，而是只能用计算出来的密码。不过一般来说这都是更加安全的，既然选择使用密码管理工具，就应该有这样的安全意识。&lt;/p&gt;
&lt;p&gt;这套机制中，用户需要记忆自己的主密码和各网站的 key。工具则需要提供一个随机的 appkey，以及三套算法：通过 appkey 可重复地生成随机数表、非对称加密验证 key 和随机数的对应关系、通过主密码 + key + 随机数可重复地计算出密码。&lt;/p&gt;
&lt;p&gt;那么什么时候能做出来呢？待续……&lt;/p&gt;</content:encoded></item><item><title><![CDATA[TIS-100]]></title><description><![CDATA[通过编写汇编代码，根据给定的输入得到正确的输出，以完成关卡目标。《TIS-100》初看并不像是一个游戏：黑乎乎的堪比命令行的界面，不存在的新手教程，查看游戏手册也仅仅是在游戏外给你打开一个 PDF 文件而已。也许它更像是一个游戏化的编程模拟软件。 我并不知道 TIS-10…]]></description><link>https://maliut.space/p/tis-100/</link><guid isPermaLink="false">https://maliut.space/p/tis-100/</guid><pubDate>Sun, 22 May 2016 15:24:31 GMT</pubDate><content:encoded>&lt;p&gt;通过编写汇编代码，根据给定的输入得到正确的输出，以完成关卡目标。《TIS-100》初看并不像是一个游戏：黑乎乎的堪比命令行的界面，不存在的新手教程，查看游戏手册也仅仅是在游戏外给你打开一个 PDF 文件而已。也许它更像是一个游戏化的编程模拟软件。&lt;/p&gt;
&lt;!-- more --&gt;
&lt;p&gt;我并不知道 TIS-100 的架构是否有历史上的原型，但其的确与现实的汇编有着不小差别。指令集被精简得可怜，只支持简单的赋值、加减、判断等操作，并不支持位运算和寻址等。如果说这是为了让之前没有汇编知识的玩家能够低门槛上手的话，那只提供了一个半寄存器、限制代码的长度和宽度，就是单纯为了增加游戏的难度了。此外，和其他大多数编程题材游戏不同，它提供了多个按拓扑关系连接的节点（相当于一个处理器内核），节点与节点之间通过端口传递数据，这就需要你合理利用各个节点拆分代码，或是提供额外的寄存器，或是用来并行处理以提高程序的性能。&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 810px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/0fc128823297074cd4dedf57e5e03b8e/ad00e/image.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 56.15763546798029%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABqUlEQVQoz12TyZLCMAxEDQlkg4QtJOx7sRScIEdO/P83afQ046mpOagcR61Wq227wWAg4/FY+v2+xHEsURRZhGEoaZpKkiRyvV7l+XzKdDq1f2VZ2gqe+vV6LaPRyPau0+lYsV8hsIRzVggJDSms61rO57N8Ph95vV5yPB4tBxk4wm02GzkcDhYQQAQx62Qykaqq7JuAcLvdymq1Msxut5M0yyyHCPLudrvJ/X6Xx+NhBCSHw6F1m81mNlqv1zNL+J/n+S8x6iKdLIliydNMeop1FDIOshkbQsB0XywWpvr9fkvTNPYPQoK6Shvm7bY8lXARhBK3Wt+EdCY8oR8ZBfgEWaajYQ/NvQW7/V4KxTZKuAw7krYDcSj4rxA/WtoNQmyAlDx7xg+CwBrUWKIKSyUbeoXL5dLAKOx2u0borwT/8I6DOZ1OApY96+VykVKni7Qm1WuWa4NcmzkUFEVhKtvaDUJPTM6uws+IHBJYvsFy2t3oG5twP8FivI/5fG4EnhBl7BmfgMB7CIZD4hGwxwq7NnT1ZJwuxuMR4V8Mq39F7P++KHD+YRBfAlwE8tbuE+IAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;image&quot;
        title=&quot;image&quot;
        src=&quot;/static/0fc128823297074cd4dedf57e5e03b8e/d7542/image.png&quot;
        srcset=&quot;/static/0fc128823297074cd4dedf57e5e03b8e/2efce/image.png 203w,
/static/0fc128823297074cd4dedf57e5e03b8e/1d180/image.png 405w,
/static/0fc128823297074cd4dedf57e5e03b8e/d7542/image.png 810w,
/static/0fc128823297074cd4dedf57e5e03b8e/d56b5/image.png 1215w,
/static/0fc128823297074cd4dedf57e5e03b8e/ad00e/image.png 1366w&quot;
        sizes=&quot;(max-width: 810px) 100vw, 810px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;虽说其与现实编程存在差距，但倘若接受了这个设定，《TIS-100》就是一个相当不错的解谜游戏。对数据进行加减乘除、比较、排序、作图等，这些看似简单的功能，在游戏严苛的限制下，也成为了极具挑战性的谜题。如果你还嫌不够，你还可以尝试下完成增加了更多限制的游戏成就。此外，游戏自带了关卡编辑器，你可以下载其他玩家的谜题，也可以使用 Lua 语言编写自己的谜题考验他人。&lt;/p&gt;
&lt;p&gt;不过过关仅仅是这游戏的一半。在你运行程序的时候，游戏会记录下你的程序使用的节点数、指令数和运行的 cycle 数（相当于运行的时间），并在好友中排名。这给了玩家不断优化程序性能的动力，也为游戏带来了较高的可重玩价值。由于这三项指标往往难以同时达到最优，游戏为每个谜题提供了 3 个存档以便于你试验各种代码结构和算法。完成一个谜题已属不易，找到它的最优解更是难上加难。当然，在这之后超越了好友，排名第一的成就感也是难以用语言来形容的。&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 810px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/5398ca1c92a4b8d81ebcd401e40c45ff/ad00e/image_1.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 56.15763546798029%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABgklEQVQoz3WTx47CQBBETc7RLMHGBCFACEQQCIHEhQO/wC9w5v8PvX4leeUlHEoz09NdXV1jO5lMxvL5vJDL5SyRSGjtdDrW6/X+Vs/zrNvtWrvdVqxQKCj3FQ7FkJEAHMcx3/dtMplYq9Wy6XRqu93O1uu1rVYr3RELgsCSyaRADSviHDZiDoMRUFSpVOxwOEgRMchLpZL2rutKcSqVeidMp9MihIBiLkhGwePxsPv9brPZTGcIyK3ValIaEYE/8nq9LoL5fC5FJOIRI9MRkDMYDOQhAmhMHuRxhZA61WpVif1+XyoajYZGut1uatBsNnXPGllDzXA4VLO3kcUa8w+gGBWQ4x3n8Xgsb7PZrCaIj/xPIQkAAsYsFov247ZssVjY8/nUiMRQGBWXy2Up/OrhaDSy5XJp+/3egnB0P1Sy3W7ter0qDmjG6KhlD+HHV+bbwxOIUYEaLyw8HY+23WzsEDbBS3A+n+10OtnlcpHnH79DRgKRbAVfPP2G6JHif8ovPhIGe6wKKvsAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;image 1&quot;
        title=&quot;image 1&quot;
        src=&quot;/static/5398ca1c92a4b8d81ebcd401e40c45ff/d7542/image_1.png&quot;
        srcset=&quot;/static/5398ca1c92a4b8d81ebcd401e40c45ff/2efce/image_1.png 203w,
/static/5398ca1c92a4b8d81ebcd401e40c45ff/1d180/image_1.png 405w,
/static/5398ca1c92a4b8d81ebcd401e40c45ff/d7542/image_1.png 810w,
/static/5398ca1c92a4b8d81ebcd401e40c45ff/d56b5/image_1.png 1215w,
/static/5398ca1c92a4b8d81ebcd401e40c45ff/ad00e/image_1.png 1366w&quot;
        sizes=&quot;(max-width: 810px) 100vw, 810px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;值得一提的是，《TIS-100》并不单纯是一个程序题的集合，它还自带了一个幕后剧情。手册封面的书信、里面的涂涂画画、每个谜题中 DEBUG 节点中的日记、全是乱码的隐藏谜题，似乎都在说明这台机器背后的故事。然而作为一个还没打通第一页关卡的菜鸡码农预备役，我目前并没有余裕去探索，而 steam 评测和社区中讨论这个的人似乎也不多。希望有大神能还原它背后的故事。&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 810px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/acc06028ac8b7600d22cc06df0924ca0/ef916/image_2.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 56.65024630541872%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABlklEQVQoz4VT14oCQRDc//8SwZdFUUQxrKiIYg6LypowR8Qc66iW3oO7kxsoZpydrq6ubo1YLIbpdIrX64Xn8/kLP9ene/1mdLtdHA4HIXw8Hi7u97vsq9UKg8FAMBqNcD6fcb1esVgsBPv9HrPZDMfjUUiN2+2Gy+Uij7gzQHdm7PV6CIVCCAaD8Hg8SKVSyGazCAQCAsuy4PP5YNv2m5BBqohgApJrolarhXQ6jWg0Cq/XC1qUy+UQiUTg9/uRSCRgmiYqlco3IeWyNGK9Xgu22y2Gw6E8ZmA4HBZQIROQKJlMolQqybler78JqUoJN5uNC/292+2EnKDXDCQxFefzeWQyGcTjcTiOIxWKQjaEOJ1O4h0t+LSWyyWazaaADaUljUZD7t2SCfpVq9XkY6FQcM/VahXtdlsUTCYTUc6K+P7PsdGmEBwBZmIQy2PJ7LKChPSMCcrlstjBeDaQ8UKoB4IPxuMx/ltUp1NAq+gdz7TMoGe8IOF8PpcyaXaxWESn0xGf+v2+DDX/UVSuY0YSFaNVfgGXwTVEhnDlCgAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;image 2&quot;
        title=&quot;image 2&quot;
        src=&quot;/static/acc06028ac8b7600d22cc06df0924ca0/d7542/image_2.png&quot;
        srcset=&quot;/static/acc06028ac8b7600d22cc06df0924ca0/2efce/image_2.png 203w,
/static/acc06028ac8b7600d22cc06df0924ca0/1d180/image_2.png 405w,
/static/acc06028ac8b7600d22cc06df0924ca0/d7542/image_2.png 810w,
/static/acc06028ac8b7600d22cc06df0924ca0/ef916/image_2.png 815w&quot;
        sizes=&quot;(max-width: 810px) 100vw, 810px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;然而《TIS-100》终究只能是一个小众的游戏。对于只想体验下编程思想的非程序员，相比于《Human Resource Machine》和《Lightbot》之类，它缺乏形象化的反馈，远不如它们直观和友好。对于希望用编程发挥创造力的玩家，尽管游戏有沙盒模式，但也只能做做简单的数字比较和画个分辨率感人的像素图，可发挥的余地也不大。而以程序员的角度，则可能会不满足于其过于精简的指令集和诸多严苛的限制。不过与其他编程题材的同类游戏相比，《TIS-100》很好地塑造了编程体验本身，开关机的动画音效、手敲代码的输入方式以及程序运行时的嗒嗒声等，都能让你身临其境地感受到你是在一台老机器上从事着真正的编程工作。如果你对这样的体验很感兴趣，也愿意静下心来盯着屏幕烧上几个小时的脑子，那么我向你强烈安利这款游戏。&lt;/p&gt;
&lt;p&gt;最后说句题外话，看到有不少人希望通过这种类型的游戏来学习些编程，我想说人生苦短，还是学门 Python 、Ruby 这样的脚本语言比较好。拿这样被极度精简的类汇编语言只会让你事倍功半。&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Unity 使用多个 Android 插件与二次开发]]></title><description><![CDATA[利用 Unity 开发 Android 应用时往往需要调用 Android 原生开发的方法，或是导出 Android 工程进行二次开发。单独一个问题很容易就能在互联网上找到答案，但当需要导入多个 Jar 包（ Android 原生方法通过打成 Jar 包在 Unity…]]></description><link>https://maliut.space/p/unity-with-multiply-jars/</link><guid isPermaLink="false">https://maliut.space/p/unity-with-multiply-jars/</guid><pubDate>Wed, 16 Mar 2016 19:51:05 GMT</pubDate><content:encoded>&lt;blockquote class=&quot;warning&quot;&gt;本文的写作时间距今已久，其中涉及到的 API 可能发生了较大的变化，且 Unity 集成 Vuforia 已有了官方支持。本文的解决方案可能不再适合您当前遇到的问题，请酌情谨慎参考。&lt;/blockquote&gt;
&lt;hr&gt;
&lt;p&gt;利用 Unity 开发 Android 应用时往往需要调用 Android 原生开发的方法，或是导出 Android 工程进行二次开发。单独一个问题很容易就能在互联网上找到答案，但当需要导入多个 Jar 包（ Android 原生方法通过打成 Jar 包在 Unity 工程中使用）、又需要导出 Android 工程继续开发时，就有可能遇到问题了。&lt;/p&gt;
&lt;!--more--&gt;
&lt;blockquote&gt;
&lt;p&gt;本文记录了解决过程。想看结论及解决方案可以直接拉到最后。&lt;/p&gt;
&lt;p&gt;本文所述的解决方案不具有普适性&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1&gt;场景&lt;/h1&gt;
&lt;p&gt;场景来源于一个实际面对的任务，即在「使用高通 Vuforia 的 Unity 工程」中「调用 Android 方法（即引入新的 Jar 包）」，并「接入 KTPlay 的 SDK 」。由于 Vuforia 的 Unity SDK 本身就引入了 Jar 包，若引入新的 Jar 包，就会牵涉到如何修改共同的 XML 文件，如何处理和已有 Jar 包的关系等问题。而后者 KTPlay 的接入需要 Unity 工程导出 Android 工程继续开发。这本来并不会有问题，但事实上 Unity 使用了 Jar 包后进行二次开发的确会出现一些变化。当然这也是因为我半吊子水平，对 Unity 和 Android 开发都不够了解。不过总会有这样的时候，人也是这样过来的，网上难以轻易找到的东西，总归做个记录有利无弊。&lt;/p&gt;
&lt;h1&gt;使用第二个 Android 插件&lt;/h1&gt;
&lt;p&gt;Unity 调用单个 Android 插件的方法其实网上都找得到，主要的思路是新建一个 Android 工程，在里面编写好方法后，打成 Jar 包放入 Unity 的插件文件夹中。然后利用 Unity 中的 AndroidJavaClass 来调用 Android 工程中的方法。但是在 Vuforia 工程中本身已经用到了 Android 插件，如果把新的内容覆盖进去，别的倒是没什么，但是 AndroidManifest.xml 文件却会被覆盖掉。这个文件是对 Android 应用很关键的配置文件， Vuforia 插件显然也用到了这个文件，将其覆盖掉明显是不行的。&lt;/p&gt;
&lt;p&gt;于是我开始搜索网上的解决方案。一开始搜索的是如何在 Unity 中导入2个 Jar 包，但根本无法找到答案。倒是很多此类问题中提到了他们要解决的也是关于 Vuforia 工程导入 jar 包的问题，这启发了我，最后在 Vuforia 的官网文档中找到了官方撰写的教程。这对我也是一个启示，搜索问题时要先 specific 再 general 。&lt;/p&gt;
&lt;p&gt;我的解决参考了 &lt;a href=&quot;https://developer.vuforia.com/library/articles/Solution/How-To-Use-Android-Plugins-in-Unity-Apps&quot;&gt;官方文档&lt;/a&gt; 和 &lt;a href=&quot;http://blog.csdn.net/xv_ly15/article/details/9314199/&quot;&gt;这篇文章&lt;/a&gt; （讲的是通常调用 1 个 Jar 包的情况）。两篇文章都挺好，就是由于作者和读者的思路问题在细节上理解容易出偏差，我是综合了两篇文章并自己试验后最终成功的。&lt;/p&gt;
&lt;p&gt;具体可以顺着官方文档来，首先新建工程，但是注意&lt;strong&gt;新建工程的包名要与 Unity 工程导出 Android 应用时使用的包名一致&lt;/strong&gt;，这会省很多麻烦。官方文档似乎没说明这一点。然后导入 Unity 和 Vuforia 相关的 Jar 包。注意 classes.jar 随 Unity 版本的变化，放置的位置也有区别，需要自己找一找。编写完以后需要导出 Jar 包，在工程属性中勾选 isLibrary 然后可在工程目录中找到自动生成的 Jar 包。然后把 Jar 包复制到 Unity 插件目录下，并修改  Unity 目录下 AndroidManifest.xml 文件中的主 Activity 名。（不能直接覆盖这个xml文件，因为 Vuforia 在里面也有些配置）。以上两步官方文档都说的很好，不过它用的是一个简单的 toast 的例子。实际我们开发时往往还会用到一些第三方的 Jar 包、 so 文件等，因此也要把这些文件也放入 Unity 插件目录对应位置下；使用这些东西导致的  AndroidManifest.xml 文件修改（如增加权限等）也需要在 Unity 目录下 AndroidManifest.xml 文件中对应修改。如果有素材变动啥的最好把 res 文件夹也复制过去。这里官方文档就说把 Jar 包放过去，可能是觉得这些都是常识性问题吧，我说的就比较细了，新手说不定觉得那些第三方的 Jar 和 so 都打包进自己的 Jar 了呢？（虽说看文件大小还是很容易判断的）&lt;/p&gt;
&lt;p&gt;顺便一提，如果你自己的 Jar 用到了第三方的 Jar 包，那么做完导入 Unity 后那些第三方 Jar 包的地位和 Vuforia 的两个 Jjar 包目测是平等的。而我们在开发自己的 Jar 时并没有用到 Vuforia 那两个 Jar 包的东西，是不是说明如果我们不用 Vuforia 那两个 Jar 包里的东西，不导入那两个 Jar 包也没事？待测试。&lt;/p&gt;
&lt;p&gt;还有，至于我说为什么没有普适性，因为我们是用自己的包名、主方法名取代了 AndroidManifest.xml 原来的相应内容，看来 Vuforia 的两个 Jar 包并不需要这两个东西。因此这两个 Jar 包和我们自己写的 Jar 包有很大的区别。虽然如此，应该不会有个第三方 Jar 包需要让你修改这些才能加进去吧……&lt;/p&gt;
&lt;h1&gt;加入插件后的二次开发&lt;/h1&gt;
&lt;p&gt;其实就是关于 KTPlay ，这个游戏内社区总的来说挺好用的。接入 Unity 的过程比较奇葩，首先要在 Unity 中做相关的配置，然后还要导出 Android 工程，在主 Activity 的 onStart 等一系列方法中加入相关的代码。其实也很简单，我试验的时候也很顺利，以至于当我把导入插件后的实际项目再拿去加入 KTPlay 却发现毫无反应时，大脑简直一片空白，连大概的可能性都猜不出。后来还是顿悟了，因为测试后发现不是 KTPlay 有问题，而是二次开发加入的相关代码根本没有被执行，然后就想到了，当之前加入 Android 插件后，这个应用的主方法已经不是那个 UnityActivity 了，而是自己编写的插件中的那个 Activity （由于之前更改了 AndroidManifest.xml ）。于是问题解决。&lt;/p&gt;
&lt;p&gt;当然这样就十分有趣了，因为我编写插件在前，引入 KTPlay 在后，也就是说没引入 KTPlay 之前就加入了它的相关代码。当然这并不是一件坏事，事实上反而是一件好事，因为这样你可以直接在 Unity 中打包 apk 了，而不用再使用蛋疼的 Eclipse 。KTPlay 可以考虑下这样的用法啊。&lt;/p&gt;
&lt;h1&gt;总结&lt;/h1&gt;
&lt;p&gt;对于此类需要在 Unity 中使用多个 Android 插件，并进行二次开发的问题，需要注意：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;新建 Android 插件的工程时，确保包名与 Unity 导出 Android 的包名一致。&lt;/li&gt;
&lt;li&gt;导入 classes.jar 和其他 Unity 插件工程下的 Jar 包和 so 文件。&lt;/li&gt;
&lt;li&gt;事先观察需要二次开发的内容，把二次开发需要在主 Activity 中改动的地方事先改动好（主 Activity 就是你现在写的插件的 Activity）。&lt;/li&gt;
&lt;li&gt;工程属性下勾选 isLibrary 导出 Jar 包。&lt;/li&gt;
&lt;li&gt;把导出的 Jar 包和你开发插件过程中另外用到的第三方 jar 包和 so 文件复制到 Unity 工程的相关目录下。 res 文件夹也复制过去。&lt;/li&gt;
&lt;li&gt;相应修改 AndroidManifest.xml （而不是粗暴覆盖原有的文件）。&lt;/li&gt;
&lt;/ol&gt;</content:encoded></item><item><title><![CDATA[Hello World Again and Again]]></title><description><![CDATA[终于在 Github…]]></description><link>https://maliut.space/p/hello-world-again-and-again/</link><guid isPermaLink="false">https://maliut.space/p/hello-world-again-and-again/</guid><pubDate>Wed, 09 Mar 2016 00:01:04 GMT</pubDate><content:encoded>&lt;p&gt;终于在 Github 上开了静态博客。&lt;/p&gt;
&lt;!--more--&gt;
&lt;p&gt;从知乎上看到然而找不到原文的大大曾经说过写博客的三个阶段，正好和我的经历完全吻合。曾经的百度空间，得益于百度，还有不少关键词排名靠前的文章，虽然现在看来都是些小学生烂文章罢了。其实还是挺怀念当时的心态，敢写，有自信，甚至将其当作一件很自豪的事情。虽然都是些垃圾文，然而随着百度空间的灰飞烟灭，现在就是想看也看不到了。还有那个益达，也许要不是现在在这里写这个，我已经将它永久遗忘了吧，还有我甚至也是有网友的人[破涕为笑]……别的零零碎碎也有不少吧，在当时那个博客流行的时代，随便啥网站都愿意配一个博客系统来留住用户。那个时候微博还没有被人听说，腾讯微博还叫滔滔，轻博客更是以后的事。而现在点点网早已时常抽风，只有宿舍二楼开水房墙上的告示贴纸还诉说着它曾经的辉煌。只剩下 Lofter 。&lt;/p&gt;
&lt;p&gt;后来就是自搭博客的历程了，这得从我的建站经历说起。始于小学毕业的那个暑假从 5d6d 开始，后来的 Edicy ， Weebly ， Tap.cn ……还有好多我记不起来的名字，其中好多也都消失在了历史的长河里。虽然这些本质上和提供博客的服务并无太大不同，但对于习惯了博客的我，能建立一个论坛，一个主站，还是一个非常令人激动的事情。我也忘记了我是怎么进入虚拟主机的这个大坑，很早在 6R 的某个帖子下听说了 kilu.de 并觉得以后会有用便加入了收藏夹，而又在好久以后不明但又确定地觉得它就是我所听说的那个“虚拟主机”。然后看教程，搭 Discuz! ，虽然一片陌生却也尝试成功了，渐渐开始熟悉相关的流程和概念。&lt;/p&gt;
&lt;p&gt;提到了 kilu.de 就又不得不说到 clistock 。虽然在 kilu.de 上做了很多尝试但 clistock 无疑是付出心血最大的一个，从搭建到选模板选图标选插件设置版块主站运营搞校网和贴吧然后还把走廊电脑的主页都设了一遍，虽然如今只剩下了 favicon.ico ，还有 QQ 每周一封啥都没有的数据分析邮件。还是要感谢当时的环保社还有后来的文学社我也不知道我怎么抱到的大腿总之作为圈外人士却也经历了很多事情。当时的自己还是 too naive 觉得能找到免费的资源是一件很了不起的事情然后用着那么慢的服务器，晦涩的域名，还有进入时的大幅广告，包括后来甚至被成为了危险网站。不知道那些素不相识的同学们为了提交一个三行诗还要来到这种可疑的地方忍受麻烦的服务的时候是一个什么心态，是新奇冲淡了疑惑还是心里鄙视了我好几十遍呢。不过对我来说那大概也是一段梦一般的时间吧，看着我熟悉的不熟悉的那么多人能够用上我的服务。不过有些事情，从一开始就是注定的，就像我即使用上了最好的服务也无法阻止论坛等在互联网上的整体式微。我的努力只不过是那个从 ASP 末期随各种论坛走来的一点情怀。想来这种情怀，从小六起，到了大学也没有消散。&lt;/p&gt;
&lt;p&gt;的确，有些事情，从开始就注定了。比如遇到 6R ，比如进入 xs 的随机座位，比如决定推广 MAP ，比如我接触到独立博客。不知道什么时候接触的概念，但注定了以后迟早会成为其中的一员。实话说我根本不知道独立博客有什么用，明明基本功能都是那样，都能绑独立域名，论自由度，百度空间也能自己写 CSS ，即使独立博客你可以改源文件，大多数时候我们也只是选择一个既定的主题，不会自己费力修改。相反，走独立意味着你要选择一家靠谱的服务提供商，自己上传安装程序，设定数据库，即使静态空间也要搭各种环境，处理各种匪夷所思的问题。免费空间倒的倒，难用的更加难用，我最终还是意识到没有免费的午餐。这个时候付出的还有金钱成本。我想这只能用独立精神来解释。不像各种博客服务为了留住用户努力把自己变成一个大社区，独立博客让自己成为茫茫互联网海洋中的一个孤岛，而你就是这个孤岛完全的主人，即使是孤岛，即使岛很小。（当然也有些独立博客是朝着扩大知名度建立自己品牌的方向去努力运营的，那其实就是一个普通网站了）&lt;/p&gt;
&lt;p&gt;真正开始认真建站也是在大学了，用的华夏名网的香港虚机+独立域名，各方面还是差强人意的。后来出了阿里云的云翼计划，说来也有趣，明明是针对学生的优惠计划，我却是在 RS 的广告里看到的。云翼计划实在是太优惠，价钱比虚机便宜，容量、带宽、网速却又远高。于是迅速买下一年。云主机其实就是个远程的只有命令行的 Linux ，自由度是大不少，适合经验人士。我嘛只能靠他给的自带 PHP+MySQL 环境加之少的可怜的 Linux 知识勉强搭上网站。懒得备案，因此也任由域名过期，通过 IP 访问。反正也写得不多。如果一切顺利的话我会就这样用到大学毕业然后再考虑搬去哪里，然而就在最近当我访问的时候却发现无法访问了。进后台看看，先跳出来的却是让我购买云盾服务的广告。然后我就看到主机被攻击。强行重启之后，数据库明显损坏了，我作为管理员也无法登录。真的很想以最大的恶意去揣测阿里云。总之寻找下一个落脚之处就显得非常迫切了，然后这段时间频繁看到 Hexo ，就尝试了。其实以前也不是没有过搞静态的想法，不过那时没搞成功 Jekyll ，就搁置了。这大概也算是机缘巧合吧，总之现在我还是很喜欢这个 blog 的，小规模的用静态也是正好，除了没有用户管理都能够用。&lt;/p&gt;
&lt;p&gt;行文万里，不知所云，看到这里的都是真爱。也是突然想到，时下流行的人工智能、深度学习等等，将大数据用于分析以形成总体意义上的统计学规律。然而对于我们个体而言，我们毕竟独一无二，我们也有必要独一无二。&lt;/p&gt;
&lt;p&gt;愿独立精神长存。&lt;/p&gt;
&lt;p&gt;“好巧，我也不讨厌这样的自己。”&lt;/p&gt;</content:encoded></item><item><title><![CDATA[CSAPP:Bufbomb]]></title><description><![CDATA[from wordpress, 放 tietuku 的图都挂光了 关于 CSAPP 的各个经典的 Lab ，网上的解答已是一搜一大堆。本文的目的是记录自己亲身做完后的一些感悟，不过多探讨具体的做法，而是归纳一些平时看书不太注意的，而需要在 Lab 里理解透彻的地方，和做 Lab…]]></description><link>https://maliut.space/p/csapp-bufbomb/</link><guid isPermaLink="false">https://maliut.space/p/csapp-bufbomb/</guid><pubDate>Sat, 01 Aug 2015 00:00:00 GMT</pubDate><content:encoded>&lt;blockquote&gt;
&lt;p&gt;from wordpress, 放 tietuku 的图都挂光了&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;关于 CSAPP 的各个经典的 Lab ，网上的解答已是一搜一大堆。本文的目的是记录自己亲身做完后的一些感悟，不过多探讨具体的做法，而是归纳一些平时看书不太注意的，而需要在 Lab 里理解透彻的地方，和做 Lab 时需要默认知道的一些信息和经验，以便少走弯路。在此基础上略谈各题做法。&lt;/p&gt;
&lt;!--more--&gt;
&lt;p&gt;我的解题主要参考了&lt;a href=&quot;http://blog.sina.com.cn/s/blog_65eb367a0101exfa.html&quot;&gt;这篇文章&lt;/a&gt;，尽管网上有许多解答，但这篇图文并茂的博文给我带来的帮助显然是最大的，此外还有&lt;a href=&quot;http://blog.youlingman.info/csapp-bufbomb-lab-solve/&quot;&gt;这篇文章&lt;/a&gt;，通过对比两篇文章，我才能更好理解最后一题。在此表示感谢。&lt;/p&gt;
&lt;p&gt;在我看来，这个 Lab 的主要目的在于，使你对栈帧的结构、调用过程中的寄存器变化（&lt;code class=&quot;language-text&quot;&gt;%esp&lt;/code&gt;,&lt;code class=&quot;language-text&quot;&gt;%ebp&lt;/code&gt;,&lt;code class=&quot;language-text&quot;&gt;%eax&lt;/code&gt;）有更加深刻的了解。在这个 Lab 里你必须要对 &lt;code class=&quot;language-text&quot;&gt;leave&lt;/code&gt; 和 &lt;code class=&quot;language-text&quot;&gt;ret&lt;/code&gt; 指令的具体操作有了解，而不能仅仅像上一个 Lab:Binarybomb 那样，仅仅将它们抽象为回到调用过程前的状态。因为通过缓冲区溢出，你已经破坏了原来的栈帧结构。&lt;/p&gt;
&lt;p&gt;关于解题，你需要知道的一些知识：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;栈帧结构&lt;/p&gt;
&lt;p&gt;当调用一个过程后，栈帧结构如下所示&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-text line-numbers&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;......
传入参数2
传入参数1
返回地址
旧的 %ebp
......
栈顶&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;其中 &lt;code class=&quot;language-text&quot;&gt;%ebp&lt;/code&gt; 指向旧的 &lt;code class=&quot;language-text&quot;&gt;%ebp&lt;/code&gt; ， &lt;code class=&quot;language-text&quot;&gt;%esp&lt;/code&gt; 指向栈顶&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;本 Lab 中输入字符串的保存位置和合法的字符串最大长度&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;getbuf&lt;/code&gt; 函数的代码如下（图挂）&lt;/p&gt;
&lt;p&gt;其中调用了 &lt;code class=&quot;language-text&quot;&gt;Gets&lt;/code&gt; 读取输入，但这个大概和系统函数差不多，就不深究了。观察之前系统为这个函数分配了 0x38 的空间，但这并不代表字符串允许长度为 0x38 。下一行的 &lt;code class=&quot;language-text&quot;&gt;lea&lt;/code&gt; 指令计算了 &lt;code class=&quot;language-text&quot;&gt;%ebp-0x28&lt;/code&gt; 的值。这里先验地说明，这个值，即旧的 &lt;code class=&quot;language-text&quot;&gt;%ebp&lt;/code&gt; 往下 0x28 的空间里，才是存储字符串的地方。如果字符串超出了这个限制，则会继续向上覆盖旧的 &lt;code class=&quot;language-text&quot;&gt;%ebp&lt;/code&gt; ，返回地址，etc。
同时这也说明真正合法字符串的长度并不是 PDF 给的代码中规定的值。 0x28 即十进制 40 说明最多 40 个字节，那么 41-44 字节就覆盖了旧的 &lt;code class=&quot;language-text&quot;&gt;%ebp&lt;/code&gt; ， 45-48 字节覆盖了返回地址。最后一题的 &lt;code class=&quot;language-text&quot;&gt;getbufn&lt;/code&gt; 也是同理（开始做的时候直接以为是 512 但其实是 520 所以被坑死）。
那么如何查看输入的字符串？以使用 GDB 为例，在 &lt;code class=&quot;language-text&quot;&gt;0x804940d&lt;/code&gt; 设下断点，在此处可以查看 &lt;code class=&quot;language-text&quot;&gt;%ebp&lt;/code&gt; 的值，其减去 0x28 即字符串的起始地址。也可直接查看 &lt;code class=&quot;language-text&quot;&gt;%eax&lt;/code&gt; ，先验认为从 &lt;code class=&quot;language-text&quot;&gt;Get&lt;/code&gt; 返回后， &lt;code class=&quot;language-text&quot;&gt;%eax&lt;/code&gt; 即保存了返回值的地址。查看时要注意代码为&lt;code class=&quot;language-text&quot;&gt;p (char *) %eax&lt;/code&gt;，因为 &lt;code class=&quot;language-text&quot;&gt;%eax&lt;/code&gt; 的值已经是字符串的地址，不能再在 &lt;code class=&quot;language-text&quot;&gt;%eax&lt;/code&gt; 前加 &lt;code class=&quot;language-text&quot;&gt;*&lt;/code&gt; 。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;leave&lt;/code&gt; 和 &lt;code class=&quot;language-text&quot;&gt;ret&lt;/code&gt; 指令&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;ret&lt;/code&gt; 指令前必须要 &lt;code class=&quot;language-text&quot;&gt;leave&lt;/code&gt; ，否则无法完全恢复调用前的状态，但也可以自己手动模拟这两个指令的效果。
&lt;code class=&quot;language-text&quot;&gt;leave&lt;/code&gt; 指令等价于：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;assembly&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-assembly line-numbers&quot;&gt;&lt;code class=&quot;language-assembly&quot;&gt;movl %ebp, %esp  # %esp 指向 %ebp 指向的位置，即旧的 %ebp
                # 由于 %esp 就是栈顶指针， pop 和 push 都相对与这个操作，
                # 所以相当于 %esp 下面的东西都没了
popl %ebp        # 注意 %esp 指向旧的 %ebp ，所以将 %ebp 恢复为旧的 %ebp
                # 同时 %esp+4，指向返回地址&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;ret&lt;/code&gt; 指令的效果为从栈中弹出一个地址，并跳转到这个地址
因为此时 &lt;code class=&quot;language-text&quot;&gt;%esp&lt;/code&gt; 指向返回地址，因此程序跳转到返回地址，此时 &lt;code class=&quot;language-text&quot;&gt;%esp&lt;/code&gt; 继续 +4 ，指向返回地址的上一个&lt;/p&gt;
&lt;p&gt;利用 &lt;code class=&quot;language-text&quot;&gt;ret&lt;/code&gt; 的性质，本 Lab 中后几题都要用到一个技巧，在这些题中我们要自己输入汇编代码，再修改 &lt;code class=&quot;language-text&quot;&gt;getbuf&lt;/code&gt; 的返回地址，让程序执行我们输入的代码，然后再 &lt;code class=&quot;language-text&quot;&gt;ret&lt;/code&gt; 到别的函数中。但先让程序跳转到我们输入的地方已经使栈帧结构荡然无存，如何再让其 &lt;code class=&quot;language-text&quot;&gt;ret&lt;/code&gt; 到一个特定位置？使用如下代码：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;assembly&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-assembly line-numbers&quot;&gt;&lt;code class=&quot;language-assembly&quot;&gt;push $0xabcdefg
ret&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;这段代码使程序 &lt;code class=&quot;language-text&quot;&gt;ret&lt;/code&gt; 到地址 &lt;code class=&quot;language-text&quot;&gt;0xabcdefg&lt;/code&gt; 处。知道了 &lt;code class=&quot;language-text&quot;&gt;ret&lt;/code&gt; 的具体效果，应该不难理解它的原理。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;小端法&lt;/p&gt;
&lt;p&gt;这只是一个小提醒了，直接输入地址作为 char 时要反一下，但如果是通过反编译生成的 char 就不用了，因为编译时系统已自动生成。看一下反编译出来的 asm 文件就能明白。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;下面开始题目相关：&lt;/p&gt;
&lt;h1&gt;Level 0：Candle&lt;/h1&gt;
&lt;p&gt;要求执行完 &lt;code class=&quot;language-text&quot;&gt;getbuf&lt;/code&gt; 后跳转到 &lt;code class=&quot;language-text&quot;&gt;smoke&lt;/code&gt; 中，只要覆盖掉返回地址就可以，把原来的返回地址改为 &lt;code class=&quot;language-text&quot;&gt;smoke&lt;/code&gt; 函数的起始地址，本机上是 &lt;code class=&quot;language-text&quot;&gt;0x08048c8c&lt;/code&gt; ，这样答案可写成&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-text line-numbers&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00
00 00 00 00
8c 8c 04 08&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;前面 40 个是正常存储的字节，后 4 个是旧的 &lt;code class=&quot;language-text&quot;&gt;%ebp&lt;/code&gt; 区域，最后 4 个就是返回地址。前面 00 只要是除了 &lt;code class=&quot;language-text&quot;&gt;’n’&lt;/code&gt; 任意均可，最后写成 &lt;code class=&quot;language-text&quot;&gt;smoke&lt;/code&gt; 起始地址的反序。&lt;/p&gt;
&lt;h1&gt;Level 1： Sparkler&lt;/h1&gt;
&lt;p&gt;跳转到 &lt;code class=&quot;language-text&quot;&gt;fizz&lt;/code&gt; 中，但是这时要把你的 cookie 作为参数传进去。第一感觉参数放在返回地址上面，但实际上却不是。 &lt;code class=&quot;language-text&quot;&gt;ret&lt;/code&gt; 完事后 &lt;code class=&quot;language-text&quot;&gt;%esp&lt;/code&gt; 指向返回地址上面一个地址，然后执行 &lt;code class=&quot;language-text&quot;&gt;fizz&lt;/code&gt; 时，先 push 了 &lt;code class=&quot;language-text&quot;&gt;%ebp&lt;/code&gt; ，此时 &lt;code class=&quot;language-text&quot;&gt;%esp-4&lt;/code&gt;  ，即原来保存返回地址的地方，然后 &lt;code class=&quot;language-text&quot;&gt;mov&lt;/code&gt; 指令将 &lt;code class=&quot;language-text&quot;&gt;%ebp&lt;/code&gt; 也指向 &lt;code class=&quot;language-text&quot;&gt;%esp&lt;/code&gt; 指向的地方，再取了 &lt;code class=&quot;language-text&quot;&gt;%ebp+8&lt;/code&gt; 指向的值作为参数，所以参数应该保存在这个位置，即返回地址向上 2 格的位置处！&lt;/p&gt;
&lt;p&gt;（图挂）&lt;/p&gt;
&lt;p&gt;至于为什么和常识不一样，是因为我们篡改了 &lt;code class=&quot;language-text&quot;&gt;getbuf&lt;/code&gt; 的返回地址运行 &lt;code class=&quot;language-text&quot;&gt;fizz&lt;/code&gt; ，而没有 call &lt;code class=&quot;language-text&quot;&gt;fizz&lt;/code&gt; ，因此没有另保存一个返回地址，导致了偏差。&lt;/p&gt;
&lt;p&gt;答案与上题类似，不专门给出，可以自行推算或查看我开头给的两个别人的博客。&lt;/p&gt;
&lt;h1&gt;Level 2： Firecracker&lt;/h1&gt;
&lt;p&gt;跳转到 &lt;code class=&quot;language-text&quot;&gt;bang&lt;/code&gt; 中，但是需要更改一个全局变量。先验地知道全局变量存在程序中一个固定的地址处。&lt;/p&gt;
&lt;p&gt;查看 &lt;code class=&quot;language-text&quot;&gt;bang&lt;/code&gt; 中比较两数的代码：&lt;/p&gt;
&lt;p&gt;（图挂）&lt;/p&gt;
&lt;p&gt;不难发现 &lt;code class=&quot;language-text&quot;&gt;0x804d2a0&lt;/code&gt; 和 &lt;code class=&quot;language-text&quot;&gt;0x804d298&lt;/code&gt; 中存着全局变量和 cookie ，通过 GDB 调试进一步确定各自保存的东西（我在图中已经标出，另，据说也可通过 &lt;code class=&quot;language-text&quot;&gt;objdump -D&lt;/code&gt; 查看，此处不提）。知道了全局变量的保存地址，接下来就是自己构造代码了。思路如下：让代码以字符串的形式输入，然后修改 &lt;code class=&quot;language-text&quot;&gt;getbuf&lt;/code&gt; 的返回地址为保存的字符串的起始位置，使程序执行这些代码，然后 &lt;code class=&quot;language-text&quot;&gt;ret&lt;/code&gt; 到 &lt;code class=&quot;language-text&quot;&gt;bang&lt;/code&gt; 中。我们需要手写汇编代码，然后使用 gcc 编译后再利用 objdump 反编译得到对应的 char 。代码如下：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;assembly&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-assembly line-numbers&quot;&gt;&lt;code class=&quot;language-assembly&quot;&gt;movl $0xcookie, 0x804d2a0   # 把你的 cookie 放入全局变量，不用反序
push $0x8048d08             # 让这段代码执行完后返回 bang 函数
ret                         # 如果看不懂，复习本文之前的内容&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;反编译得到 char 后任意填充到 40 字节，再任意 4 字节覆盖旧的 &lt;code class=&quot;language-text&quot;&gt;%ebp&lt;/code&gt; ，最后 4 字节写为保存字符串的起始地址即可。具体的就不再给出了。&lt;/p&gt;
&lt;h1&gt;Level 3：Dynamite&lt;/h1&gt;
&lt;p&gt;需要使 &lt;code class=&quot;language-text&quot;&gt;getbuf&lt;/code&gt; 返回 cookie 而不是 1 。返回值保存在 &lt;code class=&quot;language-text&quot;&gt;%eax&lt;/code&gt; 中，只需要使 &lt;code class=&quot;language-text&quot;&gt;getbuf&lt;/code&gt; 先返回到我们输入的代码处，替换掉 &lt;code class=&quot;language-text&quot;&gt;%eax&lt;/code&gt; 后再返回原来的 &lt;code class=&quot;language-text&quot;&gt;test&lt;/code&gt; 中即可。但是我们想让电脑以为什么错误都没发生，而之前的代码都把旧的 &lt;code class=&quot;language-text&quot;&gt;%ebp&lt;/code&gt; 覆盖掉了，这次不能覆盖它。（可以手工推一下，因为之前都是跳转到别的函数然后退出程序，这次返回到 &lt;code class=&quot;language-text&quot;&gt;test&lt;/code&gt; 中，而 &lt;code class=&quot;language-text&quot;&gt;test&lt;/code&gt; 是 &lt;code class=&quot;language-text&quot;&gt;getbuf&lt;/code&gt; 真正的调用者，返回后 &lt;code class=&quot;language-text&quot;&gt;%ebp&lt;/code&gt; 要读自己指向的内容即旧的 &lt;code class=&quot;language-text&quot;&gt;%ebp&lt;/code&gt; 才能恢复 &lt;code class=&quot;language-text&quot;&gt;test&lt;/code&gt; 的栈帧，若被覆盖则不能还原）
因此这题的答案要注意两点。一是手工编写的汇编代码：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;assembly&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-assembly line-numbers&quot;&gt;&lt;code class=&quot;language-assembly&quot;&gt;movl $0xcookie, %eax  # 把 %eax 改为你的cookie
push $0x8048d75       # 返回地址设为 test 中 call&amp;lt;getbuf&amp;gt; 的下一条，即正常状态下的返回地址
ret&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;二是要先用 GDB 调试读出旧的 &lt;code class=&quot;language-text&quot;&gt;%ebp&lt;/code&gt; 的值，其地址即为此刻 &lt;code class=&quot;language-text&quot;&gt;%ebp&lt;/code&gt; 的值。然后要用这个值反序写在答案中覆盖旧的 &lt;code class=&quot;language-text&quot;&gt;%ebp&lt;/code&gt; 的部分。&lt;/p&gt;
&lt;h1&gt;Level 4：Nitroglycerin&lt;/h1&gt;
&lt;p&gt;运行一次程序，会提示你输入 5 次字符串，要求每次的字符串都要相等，但 5 次字符串保存的位置不一样。其余要求同上一题。同样面临两个问题。一是无法得知 &lt;code class=&quot;language-text&quot;&gt;getbufn&lt;/code&gt; 的返回地址应该设在哪里，因不知道每次字符串的保存位置。解决方法是用 &lt;code class=&quot;language-text&quot;&gt;nop&lt;/code&gt; 指令，至于为什么，可以参考文首给出的两篇博客，我虽可理解但也未必讲得出所以然。只想说注意跳转的位置指向 5 次随机数的最高处。这个静下心来想一想可以想清楚。还有就是不知道 &lt;code class=&quot;language-text&quot;&gt;%ebp&lt;/code&gt; 要恢复成哪一个值，解决方法是依靠其与 &lt;code class=&quot;language-text&quot;&gt;%esp&lt;/code&gt; 的数量关系，那两篇博客也讲得很好了，此处不提。&lt;/p&gt;</content:encoded></item><item><title><![CDATA[解决 JSP 与 MySQL 下各种中文乱码问题]]></title><description><![CDATA[近来 Web 课需要处理 JSP、MySQL 前台后台各种，不可避免地遇到了乱码问题。经过无数折腾以后终于（算是）解决，遂将经验总结如下： 本文记录了解决过程。想看结论及解决方案可以直接拉到最后。 Lab7 中已经遇到了连接数据库乱码的问题，当时的情况是： MySQL…]]></description><link>https://maliut.space/p/jsp-mysql-deal-messy-code/</link><guid isPermaLink="false">https://maliut.space/p/jsp-mysql-deal-messy-code/</guid><pubDate>Fri, 22 May 2015 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;近来 Web 课需要处理 JSP、MySQL 前台后台各种，不可避免地遇到了乱码问题。经过无数折腾以后终于（算是）解决，遂将经验总结如下：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;本文记录了解决过程。想看结论及解决方案可以直接拉到最后。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;!--more--&gt;
&lt;p&gt;Lab7 中已经遇到了连接数据库乱码的问题，当时的情况是：&lt;/p&gt;
&lt;p&gt;MySQL 默认安装的编码是 Latin1（ISO8859-1）
Eclipse 默认编码是 GBK ，后改为 UTF-8&lt;/p&gt;
&lt;p&gt;当时的现象：
MySQL 使用 UTF-8 建的数据库&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-sql line-numbers&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;DEFAULT&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;CHARACTER&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;SET&lt;/span&gt; utf8 &lt;span class=&quot;token keyword&quot;&gt;COLLATE&lt;/span&gt; utf8_general_ci&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;在命令行中可以正常输入中文并在命令行中显示，但是从 Java 中读取而且从 Java 中插入数据库的中文会乱码。&lt;/p&gt;
&lt;p&gt;当时的解决方法：
读取时：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; sql &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;SELECT * FROM user&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token class-name&quot;&gt;Statement&lt;/span&gt; stm &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; connection&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;createStatement&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token class-name&quot;&gt;ResultSet&lt;/span&gt; rs &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; stm&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;executeQuery&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;sql&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;rs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; isbn &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; rs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getString&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Name&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; bookName &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; rs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getString&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Username&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    bookName &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;bookName&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getBytes&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;iso8859-1&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;gbk&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;out&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;bookName &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;:&quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; isbn&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;写入时：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; sql &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;INSERT INTO ISBN_LIST (ISBN, BOOK_NAME) VALUES (&apos;%s&apos; , &apos;%s&apos;);&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; isbn&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; bookName&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
sql &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;sql&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getBytes&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;gbk&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;iso8859-1&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token class-name&quot;&gt;Statement&lt;/span&gt; stm &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; connection&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;createStatement&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; row &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; stm&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;executeUpdate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;sql&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token class-name&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;out&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;ok,&quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; row &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;row(s) affected&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;为什么要转字符而且和 UTF-8 完全无关？不明！&lt;/strong&gt;
（ PS ：后来了解到 MySQL 变量因此转 ISO8859-1 应该是这方面的原因，但是 GBK 为什么有仍然不明）&lt;/p&gt;
&lt;p&gt;后来的探索：
因写 Lab 时中文是从 Eclipse 中打进去的，而 Project 的中文是从表单中用户输入获得的，上文的方法依旧导致乱码。
（ PS ：后来意识到中文从前台传到后台还没写入数据库就已经乱码，因此如果再转一次可能可以解决，但已经没办法回去试了，而且这样也不是长久之计，因为 MySQL 本身设置有问题）&lt;/p&gt;
&lt;p&gt;网上查询各种方法未果。
因为数据库建成时已经指定了 UTF-8 ，因此网上说的临时改字符集的方法都是没有用的。
网上某处看到 &lt;code class=&quot;language-text&quot;&gt;show variables like &amp;#39;character_set_%&amp;#39;;&lt;/code&gt;
查看 MySQL 的环境变量，发现除了指定了 database 是 UTF-8 ，其他有好多 Latin1 ，通过 &lt;code class=&quot;language-text&quot;&gt;SET character_set_database = utf8;&lt;/code&gt; 之类的方法全改成 UTF-8 并若干次重开 MySQL 服务（伴随删除数据表再新建）后发现重启 MySQL 后仍然还原成默认设置。也通过修改 my.ini 尝试过，但是仍有两项为 Latin1
这时候我认为把所有的改成 UTF-8 可以解决问题，因此在这种思路下在网上找到了真正的永久修改的方法：在 MySQL 安装目录下 bin 下找到 MYSQLInstanceConfig.exe 重新配置安装选项，在选择编码时选择 UTF-8 ，这样成功将所有环境变量变成 UTF-8 。（ PS ：这样也解决了 mysqldump 导出后中文乱码的问题）&lt;/p&gt;
&lt;p&gt;然而仍然不成功，而且发现这时候在命令行下也无法输入中文的值了。因为之前也看到过命令行的默认编码是 GBK ，会影响中文的显示（但是试过改成 UTF-8 结果出了一堆窗口上的变化导致不敢乱试而且觉得并不是主要），因此使用 &lt;code class=&quot;language-text&quot;&gt;SET NAMES &amp;#39;GBK&amp;#39;&lt;/code&gt; ，这样可以在命令行显示中文了，但在命令行看并没有什么用，最终还是要解决 JSP 下获取的问题.&lt;/p&gt;
&lt;p&gt;寄希望于能在 JSP 下正常得到，新建了一个 servlet 用来在网页中输出当前数据库的各条记录，使用本文开头 Lab 里所用的转换编码的方法多次尝试，但发现一点用处没有。这使我将目光转向生成 SQL 语句时的编码。生成 SQL 语句后同样按照本文开头 Lab 中的方法对其自身转换编码，虽然回回得到的还是乱码，但是乱码的形式在改变，证明这里可以起作用，或许只要找到正确的转换即可解决。这个时候我注意到之前插的一句调试语句：输出从前台得到的 name 的值，如果从前台得到的就是乱码，那么插进去肯定还是乱码（我也真是迟钝明明之前已经放了这个语句然而写完居然忘记了又去试验别的方法）
发现果然这个值得到的时候就已经是乱码了，观察乱码的形式感觉像是西欧文字，因此将转换的语句写为&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;sql &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;sql&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getBytes&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;iso8859-1&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;utf8&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;果然可以正常显示中文了，我认为至此得到了使用上的解决
以前因为网页啊 Eclipse 啊都是 UTF-8 因此前一个编码认为应该是 UTF-8 ，但是后面不管怎么试都没用。这样确定了前面是西欧文字后，因为 MySQL 等都被我改成了 UTF-8 ，后面自然就觉得是 UTF-8
&lt;strong&gt;但是，为什么从前台得到的中文是西欧文字，并不知道&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;另：此时重开 MySQL 命令行，因为没有设置 &lt;code class=&quot;language-text&quot;&gt;SET NAMES ‘GBK’&lt;/code&gt; ，所以在 MySQL 中显示中文变了乱码，但是既然 JSP 得到是正常了，我认为命令行中 &lt;code class=&quot;language-text&quot;&gt;SET NAMES ‘GBK’&lt;/code&gt; ，或者把命令行编码改成 UTF-8 应该能显示正常。
（ PS: 的确如此）&lt;/p&gt;
&lt;p&gt;// 一天过去了 5.22
昨天只解决了 name 字段的中文乱码问题，而 name 字段只是一个普通的字段。今天当测试 username 字段为中文时出现了其他的问题。
username 字段需要用在登录页面中进行 SQL 查询，而且需要保存在 cookie 中
首先登录时使用中文名字果然无法登录，提示用户名或密码错误，结合昨天的经验容易想到在登录验证的 SQL 查询语句后增加&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;sql &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;sql&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getBytes&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;iso8859-1&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;utf8&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;然而并没有什么用（事实上是可以的，只是 Eclipse 的默认浏览器出了问题）&lt;/p&gt;
&lt;p&gt;又想到使用 Ajax 进行实时检测时也要进行 SQL 查询，试验后发现对于中文名字重复无法正常提示用户名已被占用，怀疑是编码的问题但是无论怎么改都没用，而后调试输出发现并没有什么问题，最后去掉了改编码的代码，在 chrome 下可以正常提示，网上的说法是 Ajax 是默认用 UTF-8 传值的，看来这个问题已经得到了解决
PS：此时 Eclipse 默认浏览器还是错误的。这个浏览器真是害人不浅，浪费了我大量时间，现在已经把运行的默认浏览器改成了 chrome &lt;del&gt;，只不过无法通过 &lt;code class=&quot;language-text&quot;&gt;system.out.println&lt;/code&gt; 方便调试了&lt;/del&gt;（更正：可以调试）。
知道了 Eclipse 浏览器的问题，换用 chrome ，登录问题也可以得到解决.&lt;/p&gt;
&lt;p&gt;此外我还探索了为什么前台后台传值使用 ISO8859-1 的问题，网上有说法说要改 Tomcat 的 server.xml 文件。我在安装目录和 Eclipse 的 project explorer 下的 Tomcat 都做了修改然而并没有什么用。或许是我没改对吧。不过更多的地方说更改这个文件并不是什么好方法，因为实际情况下有时不能改变服务器配置。因此作罢。&lt;/p&gt;
&lt;p&gt;随后是 cookie 存中文的问题，存中文会报错说有控制字符。这其实是一个小问题了，查阅网上资料后得知只要 &lt;code class=&quot;language-text&quot;&gt;URLEncoder.encode(username, &amp;quot;UTF-8&amp;quot;)&lt;/code&gt; 即可，这时候中文变成  &lt;code class=&quot;language-text&quot;&gt;%C3%A5%C2%95%C2%8A%C3%A5%C2%95%C2%8A%C3%A5%C2%95%C2%8A&lt;/code&gt; 这样的形式，可以正常存储了，但是在读取时却出了问题。
首先是 JS 读取 cookies 问题，用于在主页显示当前登录用户的用户名。然而用 JS 读出来并解码后发现还是乱码，西欧字符。经过检查， JS 读取 cookies 的内容是没问题的，就是之前存入的 cookies 的内容，这样问题就很明显了。因为从前台到后台得到的中文本来就是西欧字符，为了方便起见我在构成 SQL 查询字符串后进行了转码，这样不用单独对每一个得到的有可能是中文的前台表单元素在后台获得时就挨个进行转码。但是这样的话在存进 cookies 时所用来编码的 username 仍然是西欧字符的 username 。
因此，在保存 cookies 时先将 username 转码再 encode 存储即可。
注意： JS 解码时应使用 &lt;code class=&quot;language-text&quot;&gt;decodeURI&lt;/code&gt; 函数而不是 &lt;code class=&quot;language-text&quot;&gt;unescape&lt;/code&gt; 函数，后者仍然使用西欧编码解码。
注意：这样 SQL 和 cookie 处都有需要解码的地方，感觉看起来略杂乱，觉得还是不能偷懒，在获得前台表单值时就应立即转码。&lt;/p&gt;
&lt;p&gt;接下来是 servlet(JSP) 读取 cookies 问题，用于访问主页时根据 cookies 中是否有值判断应跳转至主页还是登录页面。既然前面已经将 cookies 正确储存了，这里就没什么问题了，直接在得到 cookies 以后 &lt;code class=&quot;language-text&quot;&gt;URLDecoder.decode(cUsername,&amp;quot;UTF-8&amp;quot;)&lt;/code&gt; 即可。
注意：这里的 SQL 查询构建 SQL 语句后就不用从西欧转到 UTF-8 了，因为这里有可能是中文的字段并不是从前台得到，而是从 cookie 中格式正确的中文得到。&lt;/p&gt;
&lt;h1&gt;结论&lt;/h1&gt;
&lt;p&gt;为了消灭乱码，请如下操作：&lt;/p&gt;
&lt;p&gt;一次性操作：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;将 Eclipse 默认编码设置为 UTF-8&lt;/li&gt;
&lt;li&gt;在 MySQL 安装目录下 bin 下找到 MYSQLInstanceConfig.exe 重新配置安装选项，在选择编码时选择 UTF-8
（这样也不需要在每次建库时用长长一串指定 UTF-8 了）&lt;/li&gt;
&lt;li&gt;（补充）Eclipse：Window =&gt; Preference =&gt; Web=&gt; Jsp file下也改编码为 UTF-8 ，这个值不随 Eclipse 默认值改变，如果不改的话每次新建 Jsp 还要手动把三处 ISO8859-1 改成 UTF-8&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;编程时需要注意的：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;后台接收前台传来的值时，如果值有可能是中文，接收完立即调用 &lt;code class=&quot;language-text&quot;&gt;str = new String(str.getBytes(&amp;quot;iso8859-1&amp;quot;), &amp;quot;utf8&amp;quot;)&lt;/code&gt;转码（立即调用：这样进行 SQL 查询和存 cookie 时都不用额外转码）
（5.23 PS：按 ltl 同学的方法，在接收值之前加上&lt;code class=&quot;language-text&quot;&gt;request.setCharacterEncoding(&amp;quot;UTF-8&amp;quot;)&lt;/code&gt;可以解决这个问题，照原理来看应该也是可以的，然而我之前试验过没有成功，可能是那时候 Eclipse 自带浏览器的问题，待试验。如果这个证明可行，那么这一点可以和“其他”下的第 2 点归结为同一点，即后台 servlet 的 &lt;code class=&quot;language-text&quot;&gt;doGet&lt;/code&gt; 和 &lt;code class=&quot;language-text&quot;&gt;doPost&lt;/code&gt; 在开始写代码前都要把 request 和 response 的编码设一遍。）&lt;/li&gt;
&lt;li&gt;中文存进 cookies 时对可能为中文的字段需额外编码， &lt;code class=&quot;language-text&quot;&gt;URLEncoder.encode(str,&amp;quot;UTF-8&amp;quot;)&lt;/code&gt;
使用 Java 读取时使用 &lt;code class=&quot;language-text&quot;&gt;URLDecoder.decode(str, ”UTF-8″)&lt;/code&gt; 解码。使用 JS 读取时使用 &lt;code class=&quot;language-text&quot;&gt;decodeURI(str)&lt;/code&gt;解码&lt;/li&gt;
&lt;li&gt;以上步骤正确，那么 Ajax 不需要额外操作&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;其他：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Eclipse 自带浏览器难以信任，请使用外部浏览器测试。（然而 chrome 多次测试后也出现了不正常的现象，可能需要休息一会？）&lt;/li&gt;
&lt;li&gt;关于在 servlet 中使用 &lt;code class=&quot;language-text&quot;&gt;out.print&lt;/code&gt; 输出引起乱码的问题：&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;request&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setCharacterEncoding&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;UTF-8&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
response&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setContentType&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;text/html&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
response&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setCharacterEncoding&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;UTF-8&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token class-name&quot;&gt;PrintWriter&lt;/span&gt; out &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; response&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getWriter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[Java 使用 Gson 操作 JSON 数据]]></title><description><![CDATA[Lab8 需要操作 JSON 格式。毕竟用处广泛，而 Java 中有许多包可以用于操作 JSON （参见：http://www.json.org/） 起初使用 org.json ，但是将对象保存为 JSON…]]></description><link>https://maliut.space/p/java-use-gson/</link><guid isPermaLink="false">https://maliut.space/p/java-use-gson/</guid><pubDate>Fri, 12 Dec 2014 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;Lab8 需要操作 JSON 格式。毕竟用处广泛，而 Java 中有许多包可以用于操作 JSON （参见：&lt;a href=&quot;http://www.json.org/&quot;&gt;http://www.json.org/&lt;/a&gt;）&lt;/p&gt;
&lt;p&gt;起初使用 org.json ，但是将对象保存为 JSON 时似乎需要将对象的每个属性都手工写入，而我的设想是自动探测对象的所有属性并写为 JSON （毕竟重复劳动）。遍寻网络无果，后来在某个角落发现 Gson 似乎可以实现。遂用之，发现功能强大。&lt;/p&gt;
&lt;!--more--&gt;
&lt;h1&gt;生成 JSON&lt;/h1&gt;
&lt;p&gt;需要生成 JSON 的数据类：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Player&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; name&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; deposit&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Player&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; name&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; deposit&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; name&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;deposit &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; deposit&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;用于生成的代码：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;com&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;google&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;gson&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Gson&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token class-name&quot;&gt;Player&lt;/span&gt; players &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Player&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i&lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    players&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Player&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; i&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token class-name&quot;&gt;Gson&lt;/span&gt; gson &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Gson&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;// create Gson object&lt;/span&gt;
&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; str &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; gson&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;toJson&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;players&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;注：生成 Gson 对象除了用 &lt;code class=&quot;language-text&quot;&gt;new Gson()&lt;/code&gt; 外还有一种据说更高端的方法，反正我也不知道用处和区别就不写了&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;toJson&lt;/code&gt; 方法后的参数可以为对象，也可以为对象数组。都可以生成符合规范的 JSON 格式&lt;/p&gt;
&lt;h1&gt;读取 JSON&lt;/h1&gt;
&lt;p&gt;以从 OpenWeatherMap 的 API 返回的 JSON 为例（查询天气：&lt;a href=&quot;http://api.openweathermap.org/data/2.5/weather?q=London&quot;&gt;http://api.openweathermap.org/data/2.5/weather?q=London&lt;/a&gt;，各参数可参考 &lt;a href=&quot;http://openweathermap.org/weather-data#current&quot;&gt;http://openweathermap.org/weather-data#current&lt;/a&gt;）&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;json&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-json line-numbers&quot;&gt;&lt;code class=&quot;language-json&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token property&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;88319&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token property&quot;&gt;&quot;dt&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1345284000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token property&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Benghazi&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;coord&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token property&quot;&gt;&quot;lat&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;32.12&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token property&quot;&gt;&quot;lon&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;20.07&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;main&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token property&quot;&gt;&quot;temp&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;306.15&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token property&quot;&gt;&quot;pressure&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1013&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token property&quot;&gt;&quot;humidity&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;44&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token property&quot;&gt;&quot;temp_min&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;306&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token property&quot;&gt;&quot;temp_max&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;306&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;wind&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token property&quot;&gt;&quot;speed&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token property&quot;&gt;&quot;deg&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;-7&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;weather&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
                 &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token property&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;520&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token property&quot;&gt;&quot;main&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;rain&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token property&quot;&gt;&quot;description&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;light intensity shower rain&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token property&quot;&gt;&quot;icon&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;09d&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                 &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token property&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;500&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token property&quot;&gt;&quot;main&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;rain&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token property&quot;&gt;&quot;description&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;light rain&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token property&quot;&gt;&quot;icon&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;10d&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                 &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token property&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;701&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token property&quot;&gt;&quot;main&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;mist&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token property&quot;&gt;&quot;description&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;mist&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token property&quot;&gt;&quot;icon&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;50d&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
              &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;clouds&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token property&quot;&gt;&quot;all&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;90&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;rain&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token property&quot;&gt;&quot;3h&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;这是一个复杂的 JSON 数据，为了读取需要先根据数据生成特定的类结构。结构如下：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;WeatherState&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Main&lt;/span&gt; main&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Weather&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; weather&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; id&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Main&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;double&lt;/span&gt; temp&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; temp_min&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; temp_max&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Weather&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; id&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;注：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;类名随意&lt;/li&gt;
&lt;li&gt;变量名需要严格符合 JSON 中的内容&lt;/li&gt;
&lt;li&gt;内部类需要 static ，这里使用内部类看起来更加清晰，用继承也可以&lt;/li&gt;
&lt;li&gt;变量 private + get/set 方法应该也可以，图方便用 public&lt;/li&gt;
&lt;li&gt;不需要把 JSON 中所有的数据都建构出来，你建了多少就会读出来多少（这一点非常好啊）&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;用于读取的代码&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; jsonWeather &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;/* 前面的 Json 数据 */&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token class-name&quot;&gt;Gson&lt;/span&gt; gson &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Gson&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;// create gson object&lt;/span&gt;
&lt;span class=&quot;token class-name&quot;&gt;WeatherState&lt;/span&gt; w &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; gson&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;fromJson&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;jsonWeather&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;WeatherState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token class-name&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;out&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;w&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token class-name&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;out&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;w&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;main&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;temp&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token class-name&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;out&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;w&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;weather&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;以上即为 Gson 的基本用法&lt;/p&gt;</content:encoded></item><item><title><![CDATA[直与弯：我们喜欢的究竟是什么？]]></title><description><![CDATA[草稿 涉及到爱情本质的问题有空再写 喜欢 康德：物自体不可知 我们对外界事物的任何认识，实质上只不过是在脑中建构出关于事物的概念，也就是说我们并不是认识事物本身，而是它带给我们的感觉。 同理，当我们说『喜欢xxx』时，我们喜欢的也并不是xxx…]]></description><link>https://maliut.space/p/bent-and-straight/</link><guid isPermaLink="false">https://maliut.space/p/bent-and-straight/</guid><pubDate>Mon, 08 Dec 2014 00:00:00 GMT</pubDate><content:encoded>&lt;h1&gt;草稿&lt;/h1&gt;
&lt;p&gt;涉及到爱情本质的问题有空再写&lt;/p&gt;
&lt;!--more--&gt;
&lt;h1&gt;喜欢&lt;/h1&gt;
&lt;p&gt;康德：物自体不可知&lt;/p&gt;
&lt;p&gt;我们对外界事物的任何认识，实质上只不过是在脑中建构出关于事物的概念，也就是说我们并不是认识事物本身，而是它带给我们的感觉。&lt;/p&gt;
&lt;p&gt;同理，当我们说『喜欢xxx』时，我们喜欢的也并不是xxx本身，而是它带给我们的感觉。&lt;/p&gt;
&lt;h1&gt;性别&lt;/h1&gt;
&lt;p&gt;性别可以分成生理学性别和社会学性别&lt;/p&gt;
&lt;p&gt;生理学性别就是生理学上根据拥有染色体、器官种类等定义出来的。用哲学一点的话讲，就是根据第一世界的东西定义在第三世界中的概念。&lt;/p&gt;
&lt;p&gt;相对来说社会学性别就是第四世界中的概念（对较为公认的社会学性别来说）。&lt;/p&gt;
&lt;h1&gt;&lt;/h1&gt;
&lt;p&gt;这就是所谓【可爱的男孩子】，当你不知道他是男孩子之前也会蠢蠢欲动。也用来解释有些bl一个人扮演女生的角色。（当然心理学上也存在男生喜欢肌肉男的这并不否认）&lt;/p&gt;
&lt;p&gt;【所以只是喜欢看jpg也是很正常的啊&lt;/p&gt;
&lt;p&gt;【待续&lt;/p&gt;</content:encoded></item><item><title><![CDATA[游戏的艺术性]]></title><description><![CDATA[这篇文章需要重写 2018.08.0…]]></description><link>https://maliut.space/p/the-art-of-game/</link><guid isPermaLink="false">https://maliut.space/p/the-art-of-game/</guid><pubDate>Mon, 08 Dec 2014 00:00:00 GMT</pubDate><content:encoded>&lt;blockquote&gt;
&lt;p&gt;这篇文章需要重写 2018.08.02&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;首先我坚信游戏是一门艺术。&lt;/p&gt;
&lt;p&gt;但是游戏之所以成其为艺术，必有其独特之处。&lt;/p&gt;
&lt;!--more--&gt;
&lt;p&gt;关于游戏的艺术性，我前后也看了不少他人的观点，接触了不少思想（关于何谓游戏，何谓艺术，以及游戏的艺术性本身），观点也有一个发展的过程。&lt;/p&gt;
&lt;p&gt;现在我的基本观点如下：游戏的艺术性，最重要的在于交互性，这是游戏特有的。（在这里，交互性的定义不应该太过于广泛，比如你被动的看然后心里产生思想，但是并不影响你被看的事物）&lt;/p&gt;
&lt;p&gt;一般我们说游戏很有艺术感，往往是指游戏的音乐啊美术啊之类，这些只不过是音乐艺术，美术艺术用在游戏中，不能将其称为游戏艺术。但是它们也不是独立的，它们用在游戏中，帮助展现了游戏的交互性，因此已经不是纯粹的音乐和美术艺术了。因此它们也是游戏艺术不可分割的一部分。&lt;/p&gt;
&lt;h1&gt;交互性所带来的&lt;/h1&gt;
&lt;p&gt;为什么游戏仅仅多了交互性就能显得如此种类丰富且让人入迷呢？交互性使得表现形式的多样性大大增加，而更为关键的是给了玩家代入感。其他的所有艺术形式，观众永远只能位于观赏者的地位，即使与作品产生共情，也难以改变作品本身。而对于玩家而言，每一位玩家的游戏过程，都是一个不同的故事（不考虑某些特殊、极端情况，下文不加说明时同）。而为了配合这份交互性，很多游戏都是由一个主角作为世界中的观察者，而不是全局视角。这就让玩家真切地感受到自己是这个世界的一份子，而不是世界的旁观者。不可否认人总是关注自己比关注别人更多一点。&lt;/p&gt;
&lt;p&gt;有人认为游戏的交互性让玩家可以改变世界，这说法没有错，但其实不严谨。改变世界只是交互性可以带来的结果之一，但即使并没有改变世界，玩家的输入能够得到反馈，也让玩家有能够改变世界的错觉，甚至在有些游戏中玩家知道不能改变世界，但仍喜欢着交互性本身，这些玩家会对诸如打击感之类的有很高的要求。有些高自由度的游戏像 minecraft ，玩家可以随意改变世界，而 RPG 这种游戏类型，尤其是那些单线的 RPG ，玩家能够操作的仅仅是走路、打怪等，这只是给了玩家自由度的错觉，而结局早已确定。而 never alone 这种游戏（ps：写到这里我正在下载这个游戏，我不确定这里是否合适，这里只是用其指代我心目中的一类理想游戏），交互性的引入根本不是追求改变世界，而是为了提供一种体验。顺带一提，正如果文字教程的效果不如视频教程，而视频教程又不如亲自动手实践，这样的交互性正是未来实现教育游戏化的重要手段。&lt;del&gt;（大蛋糕啊）&lt;/del&gt;&lt;/p&gt;
&lt;h1&gt;游戏的定义&lt;/h1&gt;
&lt;p&gt;游戏的定义是什么？现在我们所说的游戏，颇有点折衷的感觉。要从词语本身来看，游戏就是跟干正事相对的娱乐活动。然而，现在越来越多的游戏不再追求娱乐，而是给人以震撼、感动或是启示等。毕竟在古代小说戏剧什么也不过是娱乐而已，这是游戏词义的正常变化。如果从交互来看，我们和现实世界进行着远远更加频繁和真实的交互，这也是为什么很多人说一切都是游戏。这也是完全正确的，&lt;del&gt;毕竟现实就是个垃圾游戏（当然从这里也有很多可以说，比如为什么人们更愿意沉迷游戏等，不过现在不想扯了，而且已经有很多人扯的很好了）&lt;/del&gt;。当然大部分人的直觉当然是把发生在虚拟中的才叫做游戏，但是随着增强现实的兴起，这一划分界限也在慢慢模糊。比如我带着 Google Glass 玩 Ingress 或者玩体感的 Kinect 算什么？&lt;/p&gt;
&lt;p&gt;游戏和体育的界限也很模糊。本来体育也不过是一些原始的工作（狩猎活动）和游戏活动（篮球etc）而已，只不过后来为了追求更高更快更强而逐渐专业化走上了一条不归路（大误）。现在电子竞技也成为体育运动了。其实这类竞技运动和别的游戏也挺好区分的，前者主要是一局一局的有着一个或几个对手的竞技活动。 66rpg 的某次短篇比赛就曾举例将单纯的黑白棋游戏和一个主角通过黑白棋一步步战胜敌人最终如何如何这两类做对比。其实我个人是挺不喜欢把前者叫做游戏的，不过这样说起来我倒是异端了。不过反正也是个定义的问题也没有对错，曾经也将后者定义为交互艺术，（然而也很难说体育不能成为艺术&lt;del&gt;虽然这样又扯远了但是大概就算说体育是艺术这两个艺术所指代的概念也是不一样的&lt;/del&gt;）。写到这里感觉一些SLG游戏的区分就有点模糊了像三国志啊海岛大亨什么的……大家怎么想呢？&lt;/p&gt;
&lt;h1&gt;如何欣赏一个游戏？&lt;/h1&gt;
&lt;p&gt;从哪个角度评价游戏的好坏呢？当然是有多少玩家氪金了！唔开个玩笑。我尚不知道最好的方法，然而很多人将游戏与电影对比，毕竟它们更为接近。我也上了一学期的电影赏析课，就就着两者的区别和共同点慢慢探索吧。&lt;/p&gt;
&lt;p&gt;一部电影一般来说是讲述一个故事，但其与现实世界的不同在于电影通过剪辑可以打破线性的结构，也可以通过不同的视角来讲故事。但一部电影的目的并不单纯是展示一种剪辑风格，而是将其作为一种手段，为导演所想要表达的内容服务，这有可能是一个好故事，有可能是一种思想，也有可能就是想展现一种镜头语言和剪辑风格。类比到游戏，游戏的交互性也是为主题、故事、或是玩法服务的。&lt;/p&gt;
&lt;p&gt;【待续，待整理&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Hello World Again！]]></title><description><![CDATA[from the start of wordpress@aliyun…]]></description><link>https://maliut.space/p/Hello-world-again/</link><guid isPermaLink="false">https://maliut.space/p/Hello-world-again/</guid><pubDate>Sun, 07 Dec 2014 00:00:00 GMT</pubDate><content:encoded>&lt;blockquote&gt;
&lt;p&gt;from the start of wordpress@aliyun&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;我们总是希望有一个地方来记录自己，哪怕只是一次又一次的开坑。&lt;/p&gt;
&lt;!--more--&gt;
&lt;p&gt;我们总是渴望被人理解，却又逃避社交，渴望从回忆中得到慰藉。藉由回忆的极端化效应【←我自己编的你来打我啊】而使看待现实的眼光更加消极。&lt;/p&gt;
&lt;p&gt;但是我就是我。追求真实但是明明知道根本找不到真实，追求所谓的真实但有不忍直视。雪之下主张改变，大老师主张面对，这两者又有什么区别呢？关键是，我正走在成为我所希望成为的人的道路上，这就够了。&lt;/p&gt;</content:encoded></item></channel></rss>